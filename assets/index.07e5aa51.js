var $l=Object.defineProperty,Fl=Object.defineProperties;var jl=Object.getOwnPropertyDescriptors;var Ds=Object.getOwnPropertySymbols;var Ul=Object.prototype.hasOwnProperty,Wl=Object.prototype.propertyIsEnumerable;var Fn=(r,i,n)=>i in r?$l(r,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[i]=n,Bs=(r,i)=>{for(var n in i||(i={}))Ul.call(i,n)&&Fn(r,n,i[n]);if(Ds)for(var n of Ds(i))Wl.call(i,n)&&Fn(r,n,i[n]);return r},Rs=(r,i)=>Fl(r,jl(i));var Oe=(r,i,n)=>(Fn(r,typeof i!="symbol"?i+"":i,n),n);const Gl=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerpolicy&&(u.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?u.credentials="include":a.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}};Gl();function et(){}function So(r,i){for(const n in i)r[n]=i[n];return r}function Co(r){return r()}function Zs(){return Object.create(null)}function Kt(r){r.forEach(Co)}function Eo(r){return typeof r=="function"}function Lt(r,i){return r!=r?i==i:r!==i||r&&typeof r=="object"||typeof r=="function"}function ql(r){return Object.keys(r).length===0}function Ao(r,...i){if(r==null)return et;const n=r.subscribe(...i);return n.unsubscribe?()=>n.unsubscribe():n}function Vl(r,i,n){r.$$.on_destroy.push(Ao(i,n))}function w(r,i){r.appendChild(i)}function W(r,i,n){r.insertBefore(i,n||null)}function U(r){r.parentNode.removeChild(r)}function tr(r,i){for(let n=0;n<r.length;n+=1)r[n]&&r[n].d(i)}function S(r){return document.createElement(r)}function xt(r){return document.createTextNode(r)}function Z(){return xt(" ")}function _i(){return xt("")}function Mt(r,i,n,o){return r.addEventListener(i,n,o),()=>r.removeEventListener(i,n,o)}function hr(r){return function(i){return i.preventDefault(),r.call(this,i)}}function b(r,i,n){n==null?r.removeAttribute(i):r.getAttribute(i)!==n&&r.setAttribute(i,n)}function Oo(r){return r===""?null:+r}function Yl(r){return Array.from(r.childNodes)}function Dt(r,i){i=""+i,r.wholeText!==i&&(r.data=i)}function Pt(r,i){r.value=i==null?"":i}function cr(r,i,n,o){n===null?r.style.removeProperty(i):r.style.setProperty(i,n,o?"important":"")}function Hs(r,i){for(let n=0;n<r.options.length;n+=1){const o=r.options[n];if(o.__value===i){o.selected=!0;return}}r.selectedIndex=-1}function Kl(r){const i=r.querySelector(":checked")||r.options[0];return i&&i.__value}function Xl(r,i,{bubbles:n=!1,cancelable:o=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(r,n,o,i),a}let di;function ci(r){di=r}function Ue(){if(!di)throw new Error("Function called outside component initialization");return di}function gi(r){Ue().$$.on_mount.push(r)}function Jl(r){Ue().$$.after_update.push(r)}function Mo(r){Ue().$$.on_destroy.push(r)}function zo(){const r=Ue();return(i,n,{cancelable:o=!1}={})=>{const a=r.$$.callbacks[i];if(a){const u=Xl(i,n,{cancelable:o});return a.slice().forEach(c=>{c.call(r,u)}),!u.defaultPrevented}return!0}}function Ql(r,i){return Ue().$$.context.set(r,i),i}function be(r){return Ue().$$.context.get(r)}function er(r,i){const n=r.$$.callbacks[i.type];n&&n.slice().forEach(o=>o.call(this,i))}const li=[],$e=[],Ui=[],ir=[],No=Promise.resolve();let nr=!1;function Io(){nr||(nr=!0,No.then(Bo))}function Do(){return Io(),No}function Ki(r){Ui.push(r)}function $s(r){ir.push(r)}const jn=new Set;let Hi=0;function Bo(){const r=di;do{for(;Hi<li.length;){const i=li[Hi];Hi++,ci(i),tu(i.$$)}for(ci(null),li.length=0,Hi=0;$e.length;)$e.pop()();for(let i=0;i<Ui.length;i+=1){const n=Ui[i];jn.has(n)||(jn.add(n),n())}Ui.length=0}while(li.length);for(;ir.length;)ir.pop()();nr=!1,jn.clear(),ci(r)}function tu(r){if(r.fragment!==null){r.update(),Kt(r.before_update);const i=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,i),r.after_update.forEach(Ki)}}const Wi=new Set;let ye;function fr(){ye={r:0,c:[],p:ye}}function dr(){ye.r||Kt(ye.c),ye=ye.p}function rt(r,i){r&&r.i&&(Wi.delete(r),r.i(i))}function ot(r,i,n,o){if(r&&r.o){if(Wi.has(r))return;Wi.add(r),ye.c.push(()=>{Wi.delete(r),o&&(n&&r.d(1),o())}),r.o(i)}}function Ro(r,i){const n={},o={},a={$$scope:1};let u=r.length;for(;u--;){const c=r[u],f=i[u];if(f){for(const d in c)d in f||(o[d]=1);for(const d in f)a[d]||(n[d]=f[d],a[d]=1);r[u]=f}else for(const d in c)a[d]=1}for(const c in o)c in n||(n[c]=void 0);return n}function Zo(r){return typeof r=="object"&&r!==null?r:{}}function Fs(r,i,n){const o=r.$$.props[i];o!==void 0&&(r.$$.bound[o]=n,n(r.$$.ctx[o]))}function ht(r){r&&r.c()}function lt(r,i,n,o){const{fragment:a,on_mount:u,on_destroy:c,after_update:f}=r.$$;a&&a.m(i,n),o||Ki(()=>{const d=u.map(Co).filter(Eo);c?c.push(...d):Kt(d),r.$$.on_mount=[]}),f.forEach(Ki)}function ut(r,i){const n=r.$$;n.fragment!==null&&(Kt(n.on_destroy),n.fragment&&n.fragment.d(i),n.on_destroy=n.fragment=null,n.ctx=[])}function eu(r,i){r.$$.dirty[0]===-1&&(li.push(r),Io(),r.$$.dirty.fill(0)),r.$$.dirty[i/31|0]|=1<<i%31}function kt(r,i,n,o,a,u,c,f=[-1]){const d=di;ci(r);const _=r.$$={fragment:null,ctx:null,props:u,update:et,not_equal:a,bound:Zs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:Zs(),dirty:f,skip_bound:!1,root:i.target||d.$$.root};c&&c(_.root);let m=!1;if(_.ctx=n?n(r,i.props||{},(v,y,...k)=>{const C=k.length?k[0]:y;return _.ctx&&a(_.ctx[v],_.ctx[v]=C)&&(!_.skip_bound&&_.bound[v]&&_.bound[v](C),m&&eu(r,v)),y}):[],_.update(),m=!0,Kt(_.before_update),_.fragment=o?o(_.ctx):!1,i.target){if(i.hydrate){const v=Yl(i.target);_.fragment&&_.fragment.l(v),v.forEach(U)}else _.fragment&&_.fragment.c();i.intro&&rt(r.$$.fragment),lt(r,i.target,i.anchor,i.customElement),Bo()}ci(d)}class St{$destroy(){ut(this,1),this.$destroy=et}$on(i,n){const o=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return o.push(n),()=>{const a=o.indexOf(n);a!==-1&&o.splice(a,1)}}$set(i){this.$$set&&!ql(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}}var iu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},pr={exports:{}},Ho=function(i,n){return function(){for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];return i.apply(n,a)}},nu=Ho,ce=Object.prototype.toString;function mr(r){return Array.isArray(r)}function rr(r){return typeof r=="undefined"}function ru(r){return r!==null&&!rr(r)&&r.constructor!==null&&!rr(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function $o(r){return ce.call(r)==="[object ArrayBuffer]"}function su(r){return ce.call(r)==="[object FormData]"}function ou(r){var i;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?i=ArrayBuffer.isView(r):i=r&&r.buffer&&$o(r.buffer),i}function au(r){return typeof r=="string"}function lu(r){return typeof r=="number"}function Fo(r){return r!==null&&typeof r=="object"}function Gi(r){if(ce.call(r)!=="[object Object]")return!1;var i=Object.getPrototypeOf(r);return i===null||i===Object.prototype}function uu(r){return ce.call(r)==="[object Date]"}function hu(r){return ce.call(r)==="[object File]"}function cu(r){return ce.call(r)==="[object Blob]"}function jo(r){return ce.call(r)==="[object Function]"}function fu(r){return Fo(r)&&jo(r.pipe)}function du(r){return ce.call(r)==="[object URLSearchParams]"}function pu(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function mu(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function _r(r,i){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),mr(r))for(var n=0,o=r.length;n<o;n++)i.call(null,r[n],n,r);else for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&i.call(null,r[a],a,r)}function sr(){var r={};function i(a,u){Gi(r[u])&&Gi(a)?r[u]=sr(r[u],a):Gi(a)?r[u]=sr({},a):mr(a)?r[u]=a.slice():r[u]=a}for(var n=0,o=arguments.length;n<o;n++)_r(arguments[n],i);return r}function _u(r,i,n){return _r(i,function(a,u){n&&typeof a=="function"?r[u]=nu(a,n):r[u]=a}),r}function gu(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var Bt={isArray:mr,isArrayBuffer:$o,isBuffer:ru,isFormData:su,isArrayBufferView:ou,isString:au,isNumber:lu,isObject:Fo,isPlainObject:Gi,isUndefined:rr,isDate:uu,isFile:hu,isBlob:cu,isFunction:jo,isStream:fu,isURLSearchParams:du,isStandardBrowserEnv:mu,forEach:_r,merge:sr,extend:_u,trim:pu,stripBOM:gu},Me=Bt;function js(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Uo=function(i,n,o){if(!n)return i;var a;if(o)a=o(n);else if(Me.isURLSearchParams(n))a=n.toString();else{var u=[];Me.forEach(n,function(d,_){d===null||typeof d=="undefined"||(Me.isArray(d)?_=_+"[]":d=[d],Me.forEach(d,function(v){Me.isDate(v)?v=v.toISOString():Me.isObject(v)&&(v=JSON.stringify(v)),u.push(js(_)+"="+js(v))}))}),a=u.join("&")}if(a){var c=i.indexOf("#");c!==-1&&(i=i.slice(0,c)),i+=(i.indexOf("?")===-1?"?":"&")+a}return i},vu=Bt;function en(){this.handlers=[]}en.prototype.use=function(i,n,o){return this.handlers.push({fulfilled:i,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};en.prototype.eject=function(i){this.handlers[i]&&(this.handlers[i]=null)};en.prototype.forEach=function(i){vu.forEach(this.handlers,function(o){o!==null&&i(o)})};var yu=en,bu=Bt,wu=function(i,n){bu.forEach(i,function(a,u){u!==n&&u.toUpperCase()===n.toUpperCase()&&(i[n]=a,delete i[u])})},Wo=function(i,n,o,a,u){return i.config=n,o&&(i.code=o),i.request=a,i.response=u,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},i},Go={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xu=Wo,qo=function(i,n,o,a,u){var c=new Error(i);return xu(c,n,o,a,u)},Pu=qo,Lu=function(i,n,o){var a=o.config.validateStatus;!o.status||!a||a(o.status)?i(o):n(Pu("Request failed with status code "+o.status,o.config,null,o.request,o))},$i=Bt,Tu=$i.isStandardBrowserEnv()?function(){return{write:function(n,o,a,u,c,f){var d=[];d.push(n+"="+encodeURIComponent(o)),$i.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),$i.isString(u)&&d.push("path="+u),$i.isString(c)&&d.push("domain="+c),f===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),ku=function(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)},Su=function(i,n){return n?i.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):i},Cu=ku,Eu=Su,Au=function(i,n){return i&&!Cu(n)?Eu(i,n):n},Un=Bt,Ou=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Mu=function(i){var n={},o,a,u;return i&&Un.forEach(i.split(`
`),function(f){if(u=f.indexOf(":"),o=Un.trim(f.substr(0,u)).toLowerCase(),a=Un.trim(f.substr(u+1)),o){if(n[o]&&Ou.indexOf(o)>=0)return;o==="set-cookie"?n[o]=(n[o]?n[o]:[]).concat([a]):n[o]=n[o]?n[o]+", "+a:a}}),n},Us=Bt,zu=Us.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function a(u){var c=u;return i&&(n.setAttribute("href",c),c=n.href),n.setAttribute("href",c),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=a(window.location.href),function(c){var f=Us.isString(c)?a(c):c;return f.protocol===o.protocol&&f.host===o.host}}():function(){return function(){return!0}}();function gr(r){this.message=r}gr.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};gr.prototype.__CANCEL__=!0;var nn=gr,Fi=Bt,Nu=Lu,Iu=Tu,Du=Uo,Bu=Au,Ru=Mu,Zu=zu,Wn=qo,Hu=Go,$u=nn,Ws=function(i){return new Promise(function(o,a){var u=i.data,c=i.headers,f=i.responseType,d;function _(){i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}Fi.isFormData(u)&&delete c["Content-Type"];var m=new XMLHttpRequest;if(i.auth){var v=i.auth.username||"",y=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";c.Authorization="Basic "+btoa(v+":"+y)}var k=Bu(i.baseURL,i.url);m.open(i.method.toUpperCase(),Du(k,i.params,i.paramsSerializer),!0),m.timeout=i.timeout;function C(){if(!!m){var A="getAllResponseHeaders"in m?Ru(m.getAllResponseHeaders()):null,P=!f||f==="text"||f==="json"?m.responseText:m.response,M={data:P,status:m.status,statusText:m.statusText,headers:A,config:i,request:m};Nu(function(z){o(z),_()},function(z){a(z),_()},M),m=null}}if("onloadend"in m?m.onloadend=C:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(C)},m.onabort=function(){!m||(a(Wn("Request aborted",i,"ECONNABORTED",m)),m=null)},m.onerror=function(){a(Wn("Network Error",i,null,m)),m=null},m.ontimeout=function(){var P=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",M=i.transitional||Hu;i.timeoutErrorMessage&&(P=i.timeoutErrorMessage),a(Wn(P,i,M.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},Fi.isStandardBrowserEnv()){var E=(i.withCredentials||Zu(k))&&i.xsrfCookieName?Iu.read(i.xsrfCookieName):void 0;E&&(c[i.xsrfHeaderName]=E)}"setRequestHeader"in m&&Fi.forEach(c,function(P,M){typeof u=="undefined"&&M.toLowerCase()==="content-type"?delete c[M]:m.setRequestHeader(M,P)}),Fi.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),f&&f!=="json"&&(m.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&m.addEventListener("progress",i.onDownloadProgress),typeof i.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",i.onUploadProgress),(i.cancelToken||i.signal)&&(d=function(A){!m||(a(!A||A&&A.type?new $u("canceled"):A),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d))),u||(u=null),m.send(u)})},At=Bt,Gs=wu,Fu=Wo,ju=Go,Uu={"Content-Type":"application/x-www-form-urlencoded"};function qs(r,i){!At.isUndefined(r)&&At.isUndefined(r["Content-Type"])&&(r["Content-Type"]=i)}function Wu(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(r=Ws),r}function Gu(r,i,n){if(At.isString(r))try{return(i||JSON.parse)(r),At.trim(r)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(r)}var rn={transitional:ju,adapter:Wu(),transformRequest:[function(i,n){return Gs(n,"Accept"),Gs(n,"Content-Type"),At.isFormData(i)||At.isArrayBuffer(i)||At.isBuffer(i)||At.isStream(i)||At.isFile(i)||At.isBlob(i)?i:At.isArrayBufferView(i)?i.buffer:At.isURLSearchParams(i)?(qs(n,"application/x-www-form-urlencoded;charset=utf-8"),i.toString()):At.isObject(i)||n&&n["Content-Type"]==="application/json"?(qs(n,"application/json"),Gu(i)):i}],transformResponse:[function(i){var n=this.transitional||rn.transitional,o=n&&n.silentJSONParsing,a=n&&n.forcedJSONParsing,u=!o&&this.responseType==="json";if(u||a&&At.isString(i)&&i.length)try{return JSON.parse(i)}catch(c){if(u)throw c.name==="SyntaxError"?Fu(c,this,"E_JSON_PARSE"):c}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};At.forEach(["delete","get","head"],function(i){rn.headers[i]={}});At.forEach(["post","put","patch"],function(i){rn.headers[i]=At.merge(Uu)});var vr=rn,qu=Bt,Vu=vr,Yu=function(i,n,o){var a=this||Vu;return qu.forEach(o,function(c){i=c.call(a,i,n)}),i},Vo=function(i){return!!(i&&i.__CANCEL__)},Vs=Bt,Gn=Yu,Ku=Vo,Xu=vr,Ju=nn;function qn(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ju("canceled")}var Qu=function(i){qn(i),i.headers=i.headers||{},i.data=Gn.call(i,i.data,i.headers,i.transformRequest),i.headers=Vs.merge(i.headers.common||{},i.headers[i.method]||{},i.headers),Vs.forEach(["delete","get","head","post","put","patch","common"],function(a){delete i.headers[a]});var n=i.adapter||Xu.adapter;return n(i).then(function(a){return qn(i),a.data=Gn.call(i,a.data,a.headers,i.transformResponse),a},function(a){return Ku(a)||(qn(i),a&&a.response&&(a.response.data=Gn.call(i,a.response.data,a.response.headers,i.transformResponse))),Promise.reject(a)})},Rt=Bt,Yo=function(i,n){n=n||{};var o={};function a(m,v){return Rt.isPlainObject(m)&&Rt.isPlainObject(v)?Rt.merge(m,v):Rt.isPlainObject(v)?Rt.merge({},v):Rt.isArray(v)?v.slice():v}function u(m){if(Rt.isUndefined(n[m])){if(!Rt.isUndefined(i[m]))return a(void 0,i[m])}else return a(i[m],n[m])}function c(m){if(!Rt.isUndefined(n[m]))return a(void 0,n[m])}function f(m){if(Rt.isUndefined(n[m])){if(!Rt.isUndefined(i[m]))return a(void 0,i[m])}else return a(void 0,n[m])}function d(m){if(m in n)return a(i[m],n[m]);if(m in i)return a(void 0,i[m])}var _={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:d};return Rt.forEach(Object.keys(i).concat(Object.keys(n)),function(v){var y=_[v]||u,k=y(v);Rt.isUndefined(k)&&y!==d||(o[v]=k)}),o},Ko={version:"0.26.1"},th=Ko.version,yr={};["object","boolean","number","function","string","symbol"].forEach(function(r,i){yr[r]=function(o){return typeof o===r||"a"+(i<1?"n ":" ")+r}});var Ys={};yr.transitional=function(i,n,o){function a(u,c){return"[Axios v"+th+"] Transitional option '"+u+"'"+c+(o?". "+o:"")}return function(u,c,f){if(i===!1)throw new Error(a(c," has been removed"+(n?" in "+n:"")));return n&&!Ys[c]&&(Ys[c]=!0,console.warn(a(c," has been deprecated since v"+n+" and will be removed in the near future"))),i?i(u,c,f):!0}};function eh(r,i,n){if(typeof r!="object")throw new TypeError("options must be an object");for(var o=Object.keys(r),a=o.length;a-- >0;){var u=o[a],c=i[u];if(c){var f=r[u],d=f===void 0||c(f,u,r);if(d!==!0)throw new TypeError("option "+u+" must be "+d);continue}if(n!==!0)throw Error("Unknown option "+u)}}var ih={assertOptions:eh,validators:yr},Xo=Bt,nh=Uo,Ks=yu,Xs=Qu,sn=Yo,Jo=ih,ze=Jo.validators;function vi(r){this.defaults=r,this.interceptors={request:new Ks,response:new Ks}}vi.prototype.request=function(i,n){typeof i=="string"?(n=n||{},n.url=i):n=i||{},n=sn(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var o=n.transitional;o!==void 0&&Jo.assertOptions(o,{silentJSONParsing:ze.transitional(ze.boolean),forcedJSONParsing:ze.transitional(ze.boolean),clarifyTimeoutError:ze.transitional(ze.boolean)},!1);var a=[],u=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(u=u&&k.synchronous,a.unshift(k.fulfilled,k.rejected))});var c=[];this.interceptors.response.forEach(function(k){c.push(k.fulfilled,k.rejected)});var f;if(!u){var d=[Xs,void 0];for(Array.prototype.unshift.apply(d,a),d=d.concat(c),f=Promise.resolve(n);d.length;)f=f.then(d.shift(),d.shift());return f}for(var _=n;a.length;){var m=a.shift(),v=a.shift();try{_=m(_)}catch(y){v(y);break}}try{f=Xs(_)}catch(y){return Promise.reject(y)}for(;c.length;)f=f.then(c.shift(),c.shift());return f};vi.prototype.getUri=function(i){return i=sn(this.defaults,i),nh(i.url,i.params,i.paramsSerializer).replace(/^\?/,"")};Xo.forEach(["delete","get","head","options"],function(i){vi.prototype[i]=function(n,o){return this.request(sn(o||{},{method:i,url:n,data:(o||{}).data}))}});Xo.forEach(["post","put","patch"],function(i){vi.prototype[i]=function(n,o,a){return this.request(sn(a||{},{method:i,url:n,data:o}))}});var rh=vi,sh=nn;function Fe(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(a){i=a});var n=this;this.promise.then(function(o){if(!!n._listeners){var a,u=n._listeners.length;for(a=0;a<u;a++)n._listeners[a](o);n._listeners=null}}),this.promise.then=function(o){var a,u=new Promise(function(c){n.subscribe(c),a=c}).then(o);return u.cancel=function(){n.unsubscribe(a)},u},r(function(a){n.reason||(n.reason=new sh(a),i(n.reason))})}Fe.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Fe.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]};Fe.prototype.unsubscribe=function(i){if(!!this._listeners){var n=this._listeners.indexOf(i);n!==-1&&this._listeners.splice(n,1)}};Fe.source=function(){var i,n=new Fe(function(a){i=a});return{token:n,cancel:i}};var oh=Fe,ah=function(i){return function(o){return i.apply(null,o)}},lh=Bt,uh=function(i){return lh.isObject(i)&&i.isAxiosError===!0},Js=Bt,hh=Ho,qi=rh,ch=Yo,fh=vr;function Qo(r){var i=new qi(r),n=hh(qi.prototype.request,i);return Js.extend(n,qi.prototype,i),Js.extend(n,i),n.create=function(a){return Qo(ch(r,a))},n}var Xt=Qo(fh);Xt.Axios=qi;Xt.Cancel=nn;Xt.CancelToken=oh;Xt.isCancel=Vo;Xt.VERSION=Ko.version;Xt.all=function(i){return Promise.all(i)};Xt.spread=ah;Xt.isAxiosError=uh;pr.exports=Xt;pr.exports.default=Xt;var ae=pr.exports;const Ne=[];function ta(r,i){return{subscribe:br(r,i).subscribe}}function br(r,i=et){let n;const o=new Set;function a(f){if(Lt(r,f)&&(r=f,n)){const d=!Ne.length;for(const _ of o)_[1](),Ne.push(_,r);if(d){for(let _=0;_<Ne.length;_+=2)Ne[_][0](Ne[_+1]);Ne.length=0}}}function u(f){a(f(r))}function c(f,d=et){const _=[f,d];return o.add(_),o.size===1&&(n=i(a)||et),f(r),()=>{o.delete(_),o.size===0&&(n(),n=null)}}return{set:a,update:u,subscribe:c}}function ea(r,i,n){const o=!Array.isArray(r),a=o?[r]:r,u=i.length<2;return ta(n,c=>{let f=!1;const d=[];let _=0,m=et;const v=()=>{if(_)return;m();const k=i(o?d[0]:d,c);u?c(k):m=Eo(k)?k:et},y=a.map((k,C)=>Ao(k,E=>{d[C]=E,_&=~(1<<C),f&&v()},()=>{_|=1<<C}));return f=!0,v(),function(){Kt(y),m()}})}const Vi=br({email:"",token:""});class dh{constructor(i){Oe(this,"baseUrl","https://webbackendpaul.herokuapp.com");console.log("HELLO"),this.baseUrl="https://webbackendpaul.herokuapp.com",console.log(this.baseUrl);const n=localStorage.donation;if(n){const o=JSON.parse(n);Vi.set({email:o.email,token:o.token}),ae.defaults.headers.common.Authorization="Bearer "+o.token}}async login(i,n){try{const o=await ae.post(`${this.baseUrl}/api/users/authenticate`,{email:i,password:n});return ae.defaults.headers.common.Authorization="Bearer "+o.data.token,o.data.success?(Vi.set({email:i,token:o.data.token}),localStorage.donation=JSON.stringify({email:i,token:o.data.token}),!0):!1}catch{return!1}}async logout(){Vi.set({email:"",token:""}),ae.defaults.headers.common.Authorization="",localStorage.removeItem("donation")}async signup(i,n,o,a){try{const u={firstName:i,lastName:n,email:o,password:a};return await ae.post(this.baseUrl+"/api/users",u),!0}catch{return!1}}async donate(i){try{return(await ae.post(this.baseUrl+"/api/candidates/"+i.candidate+"/donations",i)).status==200}catch{return!1}}async getCandidates(){try{return(await ae.get(this.baseUrl+"/api/candidates")).data}catch{return[]}}async getDonations(){try{return(await ae.get(this.baseUrl+"/api/donations")).data}catch{return[]}}}function ph(r){let i;return{c(){i=S("div"),i.innerHTML=`<a href="/#/signup" class="column"><i class="fas fa-user-cog fa-3x" style="color:rgb(63, 160, 155)"></i></a> 
  <a href="/#/login" class="column"><i class="fas fa-user-edit fa-3x" style="color:green" title="Log in"></i></a>`,b(i,"class","box has-text-centered columns m-2")},m(n,o){W(n,i,o)},p:et,i:et,o:et,d(n){n&&U(i)}}}class wr extends St{constructor(i){super(),kt(this,i,null,ph,Lt,{})}}function mh(r){let i;return{c(){i=S("div"),i.textContent="Schools of University of Paris-Saclay 0.2",b(i,"class","is-size-7")},m(n,o){W(n,i,o)},p:et,d(n){n&&U(i)}}}function _h(r){let i,n=r[2].email+"",o;return{c(){i=S("div"),o=xt(n),b(i,"class","is-size-7")},m(a,u){W(a,i,u),w(i,o)},p(a,u){u&4&&n!==(n=a[2].email+"")&&Dt(o,n)},d(a){a&&U(i)}}}function gh(r){let i,n,o,a,u,c,f,d,_,m,v,y,k;function C(P,M){return P[2].email?_h:mh}let E=C(r),A=E(r);return{c(){i=S("div"),n=S("div"),o=Z(),a=S("div"),u=S("div"),c=xt(r[0]),f=Z(),d=S("div"),_=xt(r[1]),m=Z(),v=S("div"),y=S("i"),k=Z(),A.c(),b(n,"class","column"),b(u,"class","title is-5"),b(d,"class","subtitle is-5"),b(a,"class","column"),b(y,"class","fas fa-donate fa-3x"),cr(y,"color","rgb(95, 96, 173)"),b(y,"title","Source repo"),b(y,"pos","bottom"),b(y,"uk-tooltip",""),b(v,"class","column"),b(i,"class","box has-text-centered columns m-2")},m(P,M){W(P,i,M),w(i,n),w(i,o),w(i,a),w(a,u),w(u,c),w(a,f),w(a,d),w(d,_),w(i,m),w(i,v),w(v,y),w(v,k),A.m(v,null)},p(P,[M]){M&1&&Dt(c,P[0]),M&2&&Dt(_,P[1]),E===(E=C(P))&&A?A.p(P,M):(A.d(1),A=E(P),A&&(A.c(),A.m(v,null)))},i:et,o:et,d(P){P&&U(i),A.d()}}}function vh(r,i,n){let o;Vl(r,Vi,c=>n(2,o=c));let{title:a=""}=i,{subTitle:u=""}=i;return r.$$set=c=>{"title"in c&&n(0,a=c.title),"subTitle"in c&&n(1,u=c.subTitle)},[a,u,o]}class we extends St{constructor(i){super(),kt(this,i,vh,gh,Lt,{title:0,subTitle:1})}}function yh(r){let i,n,o,a,u,c,f,d,_;return o=new we({props:{subTitle:"Sign up or Log in",title:"Schools of University of Paris-Saclay"}}),c=new wr({}),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),d=S("div"),d.innerHTML=`<div class="column has-text-centered"></div> 
  <div class="column"><h1 class="title">Help Me Create This Database About Schools of The University Of Paris-Saclay</h1> 
    <p>Create an account, check if there is already info about one of its schools. If not, you can add it</p></div>`,b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered"),b(d,"class","columns is-vcentered content")},m(m,v){W(m,i,v),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(m,f,v),W(m,d,v),_=!0},p:et,i(m){_||(rt(o.$$.fragment,m),rt(c.$$.fragment,m),_=!0)},o(m){ot(o.$$.fragment,m),ot(c.$$.fragment,m),_=!1},d(m){m&&U(i),ut(o),ut(c),m&&U(f),m&&U(d)}}}function bh(r){return be("DonationService").logout(),[]}class Qs extends St{constructor(i){super(),kt(this,i,bh,yh,Lt,{})}}function wh(r,i){if(r instanceof RegExp)return{keys:!1,pattern:r};var n,o,a,u,c=[],f="",d=r.split("/");for(d[0]||d.shift();a=d.shift();)n=a[0],n==="*"?(c.push("wild"),f+="/(.*)"):n===":"?(o=a.indexOf("?",1),u=a.indexOf(".",1),c.push(a.substring(1,~o?o:~u?u:a.length)),f+=!!~o&&!~u?"(?:/([^/]+?))?":"/([^/]+?)",~u&&(f+=(~o?"?":"")+"\\"+a.substring(u))):f+="/"+a;return{keys:c,pattern:new RegExp("^"+f+(i?"(?=$|/)":"/?$"),"i")}}function xh(r){let i,n,o;const a=[r[2]];var u=r[0];function c(f){let d={};for(let _=0;_<a.length;_+=1)d=So(d,a[_]);return{props:d}}return u&&(i=new u(c()),i.$on("routeEvent",r[7])),{c(){i&&ht(i.$$.fragment),n=_i()},m(f,d){i&&lt(i,f,d),W(f,n,d),o=!0},p(f,d){const _=d&4?Ro(a,[Zo(f[2])]):{};if(u!==(u=f[0])){if(i){fr();const m=i;ot(m.$$.fragment,1,0,()=>{ut(m,1)}),dr()}u?(i=new u(c()),i.$on("routeEvent",f[7]),ht(i.$$.fragment),rt(i.$$.fragment,1),lt(i,n.parentNode,n)):i=null}else u&&i.$set(_)},i(f){o||(i&&rt(i.$$.fragment,f),o=!0)},o(f){i&&ot(i.$$.fragment,f),o=!1},d(f){f&&U(n),i&&ut(i,f)}}}function Ph(r){let i,n,o;const a=[{params:r[1]},r[2]];var u=r[0];function c(f){let d={};for(let _=0;_<a.length;_+=1)d=So(d,a[_]);return{props:d}}return u&&(i=new u(c()),i.$on("routeEvent",r[6])),{c(){i&&ht(i.$$.fragment),n=_i()},m(f,d){i&&lt(i,f,d),W(f,n,d),o=!0},p(f,d){const _=d&6?Ro(a,[d&2&&{params:f[1]},d&4&&Zo(f[2])]):{};if(u!==(u=f[0])){if(i){fr();const m=i;ot(m.$$.fragment,1,0,()=>{ut(m,1)}),dr()}u?(i=new u(c()),i.$on("routeEvent",f[6]),ht(i.$$.fragment),rt(i.$$.fragment,1),lt(i,n.parentNode,n)):i=null}else u&&i.$set(_)},i(f){o||(i&&rt(i.$$.fragment,f),o=!0)},o(f){i&&ot(i.$$.fragment,f),o=!1},d(f){f&&U(n),i&&ut(i,f)}}}function Lh(r){let i,n,o,a;const u=[Ph,xh],c=[];function f(d,_){return d[1]?0:1}return i=f(r),n=c[i]=u[i](r),{c(){n.c(),o=_i()},m(d,_){c[i].m(d,_),W(d,o,_),a=!0},p(d,[_]){let m=i;i=f(d),i===m?c[i].p(d,_):(fr(),ot(c[m],1,1,()=>{c[m]=null}),dr(),n=c[i],n?n.p(d,_):(n=c[i]=u[i](d),n.c()),rt(n,1),n.m(o.parentNode,o))},i(d){a||(rt(n),a=!0)},o(d){ot(n),a=!1},d(d){c[i].d(d),d&&U(o)}}}function to(){const r=window.location.href.indexOf("#/");let i=r>-1?window.location.href.substr(r+1):"/";const n=i.indexOf("?");let o="";return n>-1&&(o=i.substr(n+1),i=i.substr(0,n)),{location:i,querystring:o}}const xr=ta(null,function(i){i(to());const n=()=>{i(to())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ea(xr,r=>r.location);ea(xr,r=>r.querystring);const eo=br(void 0);async function Pr(r){if(!r||r.length<1||r.charAt(0)!="/"&&r.indexOf("#/")!==0)throw Error("Invalid parameter location");await Do(),history.replaceState(Rs(Bs({},history.state),{__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY}),void 0,void 0),window.location.hash=(r.charAt(0)=="#"?"":"#")+r}function Th(r,i,n){let{routes:o={}}=i,{prefix:a=""}=i,{restoreScrollState:u=!1}=i;class c{constructor(I,B){if(!B||typeof B!="function"&&(typeof B!="object"||B._sveltesparouter!==!0))throw Error("Invalid component object");if(!I||typeof I=="string"&&(I.length<1||I.charAt(0)!="/"&&I.charAt(0)!="*")||typeof I=="object"&&!(I instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:at,keys:G}=wh(I);this.path=I,typeof B=="object"&&B._sveltesparouter===!0?(this.component=B.component,this.conditions=B.conditions||[],this.userData=B.userData,this.props=B.props||{}):(this.component=()=>Promise.resolve(B),this.conditions=[],this.props={}),this._pattern=at,this._keys=G}match(I){if(a){if(typeof a=="string")if(I.startsWith(a))I=I.substr(a.length)||"/";else return null;else if(a instanceof RegExp){const D=I.match(a);if(D&&D[0])I=I.substr(D[0].length)||"/";else return null}}const B=this._pattern.exec(I);if(B===null)return null;if(this._keys===!1)return B;const at={};let G=0;for(;G<this._keys.length;){try{at[this._keys[G]]=decodeURIComponent(B[G+1]||"")||null}catch{at[this._keys[G]]=null}G++}return at}async checkConditions(I){for(let B=0;B<this.conditions.length;B++)if(!await this.conditions[B](I))return!1;return!0}}const f=[];o instanceof Map?o.forEach((z,I)=>{f.push(new c(I,z))}):Object.keys(o).forEach(z=>{f.push(new c(z,o[z]))});let d=null,_=null,m={};const v=zo();async function y(z,I){await Do(),v(z,I)}let k=null,C=null;u&&(C=z=>{z.state&&z.state.__svelte_spa_router_scrollY?k=z.state:k=null},window.addEventListener("popstate",C),Jl(()=>{k?window.scrollTo(k.__svelte_spa_router_scrollX,k.__svelte_spa_router_scrollY):window.scrollTo(0,0)}));let E=null,A=null;const P=xr.subscribe(async z=>{E=z;let I=0;for(;I<f.length;){const B=f[I].match(z.location);if(!B){I++;continue}const at={route:f[I].path,location:z.location,querystring:z.querystring,userData:f[I].userData,params:B&&typeof B=="object"&&Object.keys(B).length?B:null};if(!await f[I].checkConditions(at)){n(0,d=null),A=null,y("conditionsFailed",at);return}y("routeLoading",Object.assign({},at));const G=f[I].component;if(A!=G){G.loading?(n(0,d=G.loading),A=G,n(1,_=G.loadingParams),n(2,m={}),y("routeLoaded",Object.assign({},at,{component:d,name:d.name,params:_}))):(n(0,d=null),A=null);const D=await G();if(z!=E)return;n(0,d=D&&D.default||D),A=G}B&&typeof B=="object"&&Object.keys(B).length?n(1,_=B):n(1,_=null),n(2,m=f[I].props),y("routeLoaded",Object.assign({},at,{component:d,name:d.name,params:_})).then(()=>{eo.set(_)});return}n(0,d=null),A=null,eo.set(void 0)});Mo(()=>{P(),C&&window.removeEventListener("popstate",C)});function M(z){er.call(this,r,z)}function N(z){er.call(this,r,z)}return r.$$set=z=>{"routes"in z&&n(3,o=z.routes),"prefix"in z&&n(4,a=z.prefix),"restoreScrollState"in z&&n(5,u=z.restoreScrollState)},r.$$.update=()=>{r.$$.dirty&32&&(history.scrollRestoration=u?"manual":"auto")},[d,_,m,o,a,u,M,N]}class kh extends St{constructor(i){super(),kt(this,i,Th,Lh,Lt,{routes:3,prefix:4,restoreScrollState:5})}}function io(r){let i,n;return{c(){i=S("div"),n=xt(r[2]),b(i,"class","section")},m(o,a){W(o,i,a),w(i,n)},p(o,a){a&4&&Dt(n,o[2])},d(o){o&&U(i)}}}function Sh(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A,P=r[2]&&io(r);return{c(){i=S("form"),n=S("div"),o=S("label"),o.textContent="Email",a=Z(),u=S("input"),c=Z(),f=S("div"),d=S("label"),d.textContent="Password",_=Z(),m=S("input"),v=Z(),y=S("div"),y.innerHTML='<button class="button is-link">Log In</button>',k=Z(),P&&P.c(),C=_i(),b(o,"class","label"),b(o,"for","email"),b(u,"class","input"),b(u,"id","email"),b(u,"name","email"),b(u,"placeholder","Enter email"),b(u,"type","text"),b(n,"class","field"),b(d,"class","label"),b(d,"for","password"),b(m,"class","input"),b(m,"id","password"),b(m,"name","password"),b(m,"placeholder","Enter Password"),b(m,"type","password"),b(f,"class","field"),b(y,"class","field is-grouped")},m(M,N){W(M,i,N),w(i,n),w(n,o),w(n,a),w(n,u),Pt(u,r[0]),w(i,c),w(i,f),w(f,d),w(f,_),w(f,m),Pt(m,r[1]),w(i,v),w(i,y),W(M,k,N),P&&P.m(M,N),W(M,C,N),E||(A=[Mt(u,"input",r[4]),Mt(m,"input",r[5]),Mt(i,"submit",hr(r[3]))],E=!0)},p(M,[N]){N&1&&u.value!==M[0]&&Pt(u,M[0]),N&2&&m.value!==M[1]&&Pt(m,M[1]),M[2]?P?P.p(M,N):(P=io(M),P.c(),P.m(C.parentNode,C)):P&&(P.d(1),P=null)},i:et,o:et,d(M){M&&U(i),M&&U(k),P&&P.d(M),M&&U(C),E=!1,Kt(A)}}}function Ch(r,i,n){let o="",a="",u="";const c=be("DonationService");async function f(){await c.login(o,a)?Pr("/donate"):(n(0,o=""),n(1,a=""),n(2,u="Invalid Credentials"))}function d(){o=this.value,n(0,o)}function _(){a=this.value,n(1,a)}return[o,a,u,f,d,_]}class Eh extends St{constructor(i){super(),kt(this,i,Ch,Sh,Lt,{})}}function Ah(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A;return o=new we({props:{title:"Schools of University of Paris-Saclay",subTitle:"Sign up or Log in"}}),c=new wr({}),E=new Eh({}),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),d=S("div"),_=S("div"),m=Z(),v=S("div"),y=S("div"),k=S("h1"),k.textContent="Login",C=Z(),ht(E.$$.fragment),b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered"),b(_,"class","column has-text-centered"),b(k,"class","title"),b(y,"class","box"),b(v,"class","column"),b(d,"class","columns")},m(P,M){W(P,i,M),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(P,f,M),W(P,d,M),w(d,_),w(d,m),w(d,v),w(v,y),w(y,k),w(y,C),lt(E,y,null),A=!0},p:et,i(P){A||(rt(o.$$.fragment,P),rt(c.$$.fragment,P),rt(E.$$.fragment,P),A=!0)},o(P){ot(o.$$.fragment,P),ot(c.$$.fragment,P),ot(E.$$.fragment,P),A=!1},d(P){P&&U(i),ut(o),ut(c),P&&U(f),P&&U(d),ut(E)}}}class Oh extends St{constructor(i){super(),kt(this,i,null,Ah,Lt,{})}}function no(r){let i,n;return{c(){i=S("div"),n=xt(r[4]),b(i,"class","section")},m(o,a){W(o,i,a),w(i,n)},p(o,a){a&16&&Dt(n,o[4])},d(o){o&&U(i)}}}function Mh(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A,P,M,N,z,I,B,at,G,D,Ct,ct,mt,_t=r[4]&&no(r);return{c(){i=S("form"),n=S("div"),o=S("div"),a=S("div"),u=S("label"),u.textContent="First Name",c=Z(),f=S("input"),d=Z(),_=S("div"),m=S("label"),m.textContent="Last Name",v=Z(),y=S("input"),k=Z(),C=S("div"),E=S("label"),E.textContent="Email",A=Z(),P=S("input"),M=Z(),N=S("div"),z=S("label"),z.textContent="Password",I=Z(),B=S("input"),at=Z(),G=S("div"),G.innerHTML='<button class="button is-link">Sign Up</button>',D=Z(),_t&&_t.c(),Ct=_i(),b(u,"for","firstname"),b(u,"class","label"),b(f,"id","firstname"),b(f,"class","input"),b(f,"type","text"),b(f,"placeholder","Enter first name"),b(f,"name","firstName"),b(a,"class","field"),b(m,"for","lastname"),b(m,"class","label"),b(y,"id","lastname"),b(y,"class","input"),b(y,"type","text"),b(y,"placeholder","Enter last name"),b(y,"name","lastName"),b(_,"class","field"),b(o,"class","field-body"),b(n,"class","field is-horizontal"),b(E,"for","email"),b(E,"class","label"),b(P,"id","email"),b(P,"class","input"),b(P,"type","text"),b(P,"placeholder","Enter email"),b(P,"name","email"),b(C,"class","field"),b(z,"for","password"),b(z,"class","label"),b(B,"id","password"),b(B,"class","input"),b(B,"type","password"),b(B,"placeholder","Enter Password"),b(B,"name","password"),b(N,"class","field"),b(G,"class","field is-grouped")},m(J,zt){W(J,i,zt),w(i,n),w(n,o),w(o,a),w(a,u),w(a,c),w(a,f),Pt(f,r[0]),w(o,d),w(o,_),w(_,m),w(_,v),w(_,y),Pt(y,r[1]),w(i,k),w(i,C),w(C,E),w(C,A),w(C,P),Pt(P,r[2]),w(i,M),w(i,N),w(N,z),w(N,I),w(N,B),Pt(B,r[3]),w(i,at),w(i,G),W(J,D,zt),_t&&_t.m(J,zt),W(J,Ct,zt),ct||(mt=[Mt(f,"input",r[6]),Mt(y,"input",r[7]),Mt(P,"input",r[8]),Mt(B,"input",r[9]),Mt(i,"submit",hr(r[5]))],ct=!0)},p(J,[zt]){zt&1&&f.value!==J[0]&&Pt(f,J[0]),zt&2&&y.value!==J[1]&&Pt(y,J[1]),zt&4&&P.value!==J[2]&&Pt(P,J[2]),zt&8&&B.value!==J[3]&&Pt(B,J[3]),J[4]?_t?_t.p(J,zt):(_t=no(J),_t.c(),_t.m(Ct.parentNode,Ct)):_t&&(_t.d(1),_t=null)},i:et,o:et,d(J){J&&U(i),J&&U(D),_t&&_t.d(J),J&&U(Ct),ct=!1,Kt(mt)}}}function zh(r,i,n){let o="",a="",u="",c="",f="";const d=be("DonationService");async function _(){await d.signup(o,a,u,c)?Pr("/login"):n(4,f="Error Trying to sign up")}function m(){o=this.value,n(0,o)}function v(){a=this.value,n(1,a)}function y(){u=this.value,n(2,u)}function k(){c=this.value,n(3,c)}return[o,a,u,c,f,_,m,v,y,k]}class Nh extends St{constructor(i){super(),kt(this,i,zh,Mh,Lt,{})}}function Ih(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A;return o=new we({props:{subTitle:"Sign up or Log in",title:"Schools of University of Paris-Saclay"}}),c=new wr({}),k=new Nh({}),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),d=S("div"),_=S("div"),m=S("div"),v=S("h1"),v.textContent="Login",y=Z(),ht(k.$$.fragment),C=Z(),E=S("div"),b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered"),b(v,"class","title"),b(m,"class","box"),b(_,"class","column"),b(E,"class","column has-text-centered"),b(d,"class","columns")},m(P,M){W(P,i,M),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(P,f,M),W(P,d,M),w(d,_),w(_,m),w(m,v),w(m,y),lt(k,m,null),w(d,C),w(d,E),A=!0},p:et,i(P){A||(rt(o.$$.fragment,P),rt(c.$$.fragment,P),rt(k.$$.fragment,P),A=!0)},o(P){ot(o.$$.fragment,P),ot(c.$$.fragment,P),ot(k.$$.fragment,P),A=!1},d(P){P&&U(i),ut(o),ut(c),P&&U(f),P&&U(d),ut(k)}}}class Dh extends St{constructor(i){super(),kt(this,i,null,Ih,Lt,{})}}function ro(r,i,n){const o=r.slice();return o[2]=i[n],o}function so(r){let i,n,o=r[2].candidate.lastName+"",a,u,c=r[2].candidate.firstName+"",f,d,_,m=r[2].amount+"",v,y,k,C=r[2].method+"",E,A,P,M=r[2].donor.lastName+"",N,z,I=r[2].donor.firstName+"",B,at;return{c(){i=S("tr"),n=S("td"),a=xt(o),u=xt(", "),f=xt(c),d=Z(),_=S("td"),v=xt(m),y=Z(),k=S("td"),E=xt(C),A=Z(),P=S("td"),N=xt(M),z=xt(",  "),B=xt(I),at=Z()},m(G,D){W(G,i,D),w(i,n),w(n,a),w(n,u),w(n,f),w(i,d),w(i,_),w(_,v),w(i,y),w(i,k),w(k,E),w(i,A),w(i,P),w(P,N),w(P,z),w(P,B),w(i,at)},p(G,D){D&1&&o!==(o=G[2].candidate.lastName+"")&&Dt(a,o),D&1&&c!==(c=G[2].candidate.firstName+"")&&Dt(f,c),D&1&&m!==(m=G[2].amount+"")&&Dt(v,m),D&1&&C!==(C=G[2].method+"")&&Dt(E,C),D&1&&M!==(M=G[2].donor.lastName+"")&&Dt(N,M),D&1&&I!==(I=G[2].donor.firstName+"")&&Dt(B,I)},d(G){G&&U(i)}}}function Bh(r){let i,n,o,a,u=r[0],c=[];for(let f=0;f<u.length;f+=1)c[f]=so(ro(r,u,f));return{c(){i=S("table"),n=S("thead"),n.innerHTML=`<th>Campus</th> 
    <th>Number Of Students</th> 
    <th>Type</th> 
    <th>User</th>`,o=Z(),a=S("tbody");for(let f=0;f<c.length;f+=1)c[f].c();b(i,"class","table is-fullwidth")},m(f,d){W(f,i,d),w(i,n),w(i,o),w(i,a);for(let _=0;_<c.length;_+=1)c[_].m(a,null)},p(f,[d]){if(d&1){u=f[0];let _;for(_=0;_<u.length;_+=1){const m=ro(f,u,_);c[_]?c[_].p(m,d):(c[_]=so(m),c[_].c(),c[_].m(a,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=u.length}},i:et,o:et,d(f){f&&U(i),tr(c,f)}}}function Rh(r,i,n){const o=be("DonationService");let a=[];return gi(async()=>{n(0,a=await o.getDonations())}),[a]}class Zh extends St{constructor(i){super(),kt(this,i,Rh,Bh,Lt,{})}}function Hh(r){let i;return{c(){i=S("div"),i.innerHTML=`<a href="/#/donate" class="column is-2 mx-2"><i class="fas fa-hand-holding-usd fa-3x" style="color:rgb(153, 196, 74)"></i></a> 
  <a href="/#/report" class="column is-2 mx-2"><i class="fas fa-th-list fa-3x" style="color:rgb(63, 122, 139)"></i></a> 
  <a href="/#/map" class="column is-2 mx-2"><i class="fas fa-map-marked-alt fa-3x" style="color:rgb(102, 153, 255)"></i></a> 
  <a href="/#/charts" class="column is-2 mx-2"><i class="fas fa-chart-line fa-3x" style="color:rgb(149, 93, 176)"></i></a> 
  <a href="/#/logout" class="column is-2 mx-2"><i class="fas fa-sign-out-alt fa-3x" style="color:rgb(156, 70, 128)"></i></a>`,b(i,"class","box has-text-centered columns m-2")},m(n,o){W(n,i,o)},p:et,i:et,o:et,d(n){n&&U(i)}}}class on extends St{constructor(i){super(),kt(this,i,null,Hh,Lt,{})}}function $h(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E;return o=new we({props:{subTitle:"Updates...",title:"Schools of University of Paris-Saclay"}}),c=new on({}),C=new Zh({}),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),d=S("div"),_=S("div"),m=Z(),v=S("div"),y=S("h1"),y.textContent="Updates so far",k=Z(),ht(C.$$.fragment),b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered"),b(_,"class","column has-text-centered"),b(y,"class","title is-4"),b(v,"class","column box has-text-centered"),b(d,"class","columns")},m(A,P){W(A,i,P),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(A,f,P),W(A,d,P),w(d,_),w(d,m),w(d,v),w(v,y),w(v,k),lt(C,v,null),E=!0},p:et,i(A){E||(rt(o.$$.fragment,A),rt(c.$$.fragment,A),rt(C.$$.fragment,A),E=!0)},o(A){ot(o.$$.fragment,A),ot(c.$$.fragment,A),ot(C.$$.fragment,A),E=!1},d(A){A&&U(i),ut(o),ut(c),A&&U(f),A&&U(d),ut(C)}}}class Fh extends St{constructor(i){super(),kt(this,i,null,$h,Lt,{})}}function jh(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E;return{c(){i=S("div"),n=S("div"),n.innerHTML='<label for="lng" class="label">Lat</label>',o=Z(),a=S("div"),u=S("div"),c=S("p"),f=S("input"),d=Z(),_=S("div"),_.innerHTML='<label for="lat" class="label">Lng</label>',m=Z(),v=S("div"),y=S("p"),k=S("input"),b(n,"class","field-label is-normal"),b(f,"id","lng"),b(f,"class","input"),b(f,"type","float"),b(c,"class","control is-expanded"),b(u,"class","field"),b(_,"class","field-label is-normal"),b(k,"id","lat"),b(k,"class","input"),b(k,"type","float"),b(y,"class","control is-expanded "),b(v,"class","field"),b(a,"class","field-body"),b(i,"class","box field is-horizontal")},m(A,P){W(A,i,P),w(i,n),w(i,o),w(i,a),w(a,u),w(u,c),w(c,f),Pt(f,r[0]),w(a,d),w(a,_),w(a,m),w(a,v),w(v,y),w(y,k),Pt(k,r[1]),C||(E=[Mt(f,"input",r[2]),Mt(k,"input",r[3])],C=!0)},p(A,[P]){P&1&&Pt(f,A[0]),P&2&&Pt(k,A[1])},i:et,o:et,d(A){A&&U(i),C=!1,Kt(E)}}}function Uh(r,i,n){let{lat:o=0}=i,{lng:a=0}=i;function u(){o=this.value,n(0,o)}function c(){a=this.value,n(1,a)}return r.$$set=f=>{"lat"in f&&n(0,o=f.lat),"lng"in f&&n(1,a=f.lng)},[o,a,u,c]}class Wh extends St{constructor(i){super(),kt(this,i,Uh,jh,Lt,{lat:0,lng:1})}}function oo(r,i,n){const o=r.slice();return o[19]=i[n],o}function ao(r,i,n){const o=r.slice();return o[22]=i[n],o}function lo(r){let i,n,o,a=r[22]+"",u,c,f;return{c(){i=S("input"),o=Z(),u=xt(a),b(i,"class","radio"),b(i,"type","radio"),i.__value=n=r[22],i.value=i.__value,r[12][0].push(i)},m(d,_){W(d,i,_),i.checked=i.__value===r[4],W(d,o,_),W(d,u,_),c||(f=Mt(i,"change",r[11]),c=!0)},p(d,_){_&16&&(i.checked=i.__value===d[4])},d(d){d&&U(i),r[12][0].splice(r[12][0].indexOf(i),1),d&&U(o),d&&U(u),c=!1,f()}}}function uo(r){let i,n=r[19].lastName+"",o,a,u=r[19].firstName+"",c,f;return{c(){i=S("option"),o=xt(n),a=xt(","),c=xt(u),i.__value=f=r[19].lastName+","+r[19].firstName,i.value=i.__value},m(d,_){W(d,i,_),w(i,o),w(i,a),w(i,c)},p(d,_){_&4&&n!==(n=d[19].lastName+"")&&Dt(o,n),_&4&&u!==(u=d[19].firstName+"")&&Dt(c,u),_&4&&f!==(f=d[19].lastName+","+d[19].firstName)&&(i.__value=f,i.value=i.__value)},d(d){d&&U(i)}}}function Gh(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A,P,M,N,z,I,B,at,G,D,Ct,ct,mt,_t,J,zt,vt=r[8],yt=[];for(let R=0;R<vt.length;R+=1)yt[R]=lo(ao(r,vt,R));let F=r[2],Et=[];for(let R=0;R<F.length;R+=1)Et[R]=uo(oo(r,F,R));function K(R){r[14](R)}function dt(R){r[15](R)}let Nt={};return r[5]!==void 0&&(Nt.lat=r[5]),r[6]!==void 0&&(Nt.lng=r[6]),C=new Wh({props:Nt}),$e.push(()=>Fs(C,"lat",K)),$e.push(()=>Fs(C,"lng",dt)),{c(){i=S("form"),n=S("div"),o=S("label"),o.textContent="Enter Number Of Students",a=Z(),u=S("input"),c=Z(),f=S("div"),d=S("div");for(let R=0;R<yt.length;R+=1)yt[R].c();_=Z(),m=S("div"),v=S("div"),y=S("select");for(let R=0;R<Et.length;R+=1)Et[R].c();k=Z(),ht(C.$$.fragment),P=Z(),M=S("div"),N=S("label"),N.textContent="Enter https URLs of images of the school, separated by a space",z=Z(),I=S("input"),B=Z(),at=S("div"),at.innerHTML='<div class="control"><button class="button is-link is-light">Add</button></div>',G=Z(),D=S("div"),Ct=xt(r[7]),ct=Z(),mt=S("div"),b(o,"class","label"),b(o,"for","amount"),b(u,"class","input"),b(u,"id","amount"),b(u,"name","amount"),b(u,"placeholder","Euros"),b(u,"type","number"),b(n,"class","field"),b(d,"class","control"),b(f,"class","field"),r[3]===void 0&&Ki(()=>r[13].call(y)),b(v,"class","select"),b(m,"class","field"),b(N,"class","label"),b(N,"for","image"),b(I,"class","input"),b(I,"id","image"),b(I,"name","image"),b(I,"placeholder","image"),b(I,"type","string"),b(M,"class","field"),b(at,"class","field"),b(D,"class","section"),b(mt,"class","box"),b(mt,"id","donation-map"),cr(mt,"height","800px")},m(R,it){W(R,i,it),w(i,n),w(n,o),w(n,a),w(n,u),Pt(u,r[0]),w(i,c),w(i,f),w(f,d);for(let Y=0;Y<yt.length;Y+=1)yt[Y].m(d,null);w(i,_),w(i,m),w(m,v),w(v,y);for(let Y=0;Y<Et.length;Y+=1)Et[Y].m(y,null);Hs(y,r[3]),w(i,k),lt(C,i,null),w(i,P),w(i,M),w(M,N),w(M,z),w(M,I),Pt(I,r[1]),w(i,B),w(i,at),w(i,G),w(i,D),w(D,Ct),W(R,ct,it),W(R,mt,it),_t=!0,J||(zt=[Mt(u,"input",r[10]),Mt(y,"change",r[13]),Mt(I,"input",r[16]),Mt(i,"submit",hr(r[9]))],J=!0)},p(R,[it]){if(it&1&&Oo(u.value)!==R[0]&&Pt(u,R[0]),it&272){vt=R[8];let j;for(j=0;j<vt.length;j+=1){const It=ao(R,vt,j);yt[j]?yt[j].p(It,it):(yt[j]=lo(It),yt[j].c(),yt[j].m(d,null))}for(;j<yt.length;j+=1)yt[j].d(1);yt.length=vt.length}if(it&4){F=R[2];let j;for(j=0;j<F.length;j+=1){const It=oo(R,F,j);Et[j]?Et[j].p(It,it):(Et[j]=uo(It),Et[j].c(),Et[j].m(y,null))}for(;j<Et.length;j+=1)Et[j].d(1);Et.length=F.length}it&12&&Hs(y,R[3]);const Y={};!E&&it&32&&(E=!0,Y.lat=R[5],$s(()=>E=!1)),!A&&it&64&&(A=!0,Y.lng=R[6],$s(()=>A=!1)),C.$set(Y),it&2&&Pt(I,R[1]),(!_t||it&128)&&Dt(Ct,R[7])},i(R){_t||(rt(C.$$.fragment,R),_t=!0)},o(R){ot(C.$$.fragment,R),_t=!1},d(R){R&&U(i),tr(yt,R),tr(Et,R),ut(C),R&&U(ct),R&&U(mt),J=!1,Kt(zt)}}}function qh(r,i,n){const o=zo(),a=be("DonationService");let u=0,c="",f=[],d="",_=["Engineering School","Faculty"],m="",v=48.70903809919504,y=2.1714440879250816,k="Here You Can Add A School";gi(async()=>{n(2,f=await a.getCandidates()),console.log(f)});async function C(){if(d&&u&&m&&c){const B=d.split(","),at=f.find(Ct=>Ct.lastName==B[0]&&Ct.firstName==B[1]),G={amount:u,method:m,candidate:at._id,lat:v,lng:y,image:c};if(!await a.donate(G)){n(7,k="Not completed - some error occurred");return}n(7,k=`Thanks! You Added ${u} students`),o("message",{donation:G}),Pr("/map")}else n(7,k="Please select number, type and campus/school")}const E=[[]];function A(){u=Oo(this.value),n(0,u)}function P(){m=this.__value,n(4,m)}function M(){d=Kl(this),n(3,d),n(2,f)}function N(B){v=B,n(5,v)}function z(B){y=B,n(6,y)}function I(){c=this.value,n(1,c)}return[u,c,f,d,m,v,y,k,_,C,A,P,E,M,N,z,I]}class Vh extends St{constructor(i){super(),kt(this,i,qh,Gh,Lt,{})}}var $t={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(r,i){(function(n,o){o(i)})(iu,function(n){var o="1.8.0";function a(t){var e,s,l,h;for(s=1,l=arguments.length;s<l;s++){h=arguments[s];for(e in h)t[e]=h[e]}return t}var u=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function c(t,e){var s=Array.prototype.slice;if(t.bind)return t.bind.apply(t,s.call(arguments,1));var l=s.call(arguments,2);return function(){return t.apply(e,l.length?l.concat(s.call(arguments)):arguments)}}var f=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function _(t,e,s){var l,h,p,g;return g=function(){l=!1,h&&(p.apply(s,h),h=!1)},p=function(){l?h=arguments:(t.apply(s,arguments),setTimeout(g,e),l=!0)},p}function m(t,e,s){var l=e[1],h=e[0],p=l-h;return t===l&&s?t:((t-h)%p+p)%p+h}function v(){return!1}function y(t,e){if(e===!1)return t;var s=Math.pow(10,e===void 0?6:e);return Math.round(t*s)/s}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return k(t).split(/\s+/)}function E(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var s in e)t.options[s]=e[s];return t.options}function A(t,e,s){var l=[];for(var h in t)l.push(encodeURIComponent(s?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!e||e.indexOf("?")===-1?"?":"&")+l.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function M(t,e){return t.replace(P,function(s,l){var h=e[l];if(h===void 0)throw new Error("No value provided for variable "+s);return typeof h=="function"&&(h=h(e)),h})}var N=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function z(t,e){for(var s=0;s<t.length;s++)if(t[s]===e)return s;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var at=0;function G(t){var e=+new Date,s=Math.max(0,16-(e-at));return at=e+s,window.setTimeout(t,s)}var D=window.requestAnimationFrame||B("RequestAnimationFrame")||G,Ct=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ct(t,e,s){if(s&&D===G)t.call(e);else return D.call(window,c(t,e))}function mt(t){t&&Ct.call(window,t)}var _t={__proto__:null,extend:a,create:u,bind:c,get lastId(){return f},stamp:d,throttle:_,wrapNum:m,falseFn:v,formatNum:y,trim:k,splitWords:C,setOptions:E,getParamString:A,template:M,isArray:N,indexOf:z,emptyImageUrl:I,requestFn:D,cancelFn:Ct,requestAnimFrame:ct,cancelAnimFrame:mt};function J(){}J.extend=function(t){var e=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},s=e.__super__=this.prototype,l=u(s);l.constructor=e,e.prototype=l;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(e[h]=this[h]);return t.statics&&a(e,t.statics),t.includes&&(zt(t.includes),a.apply(null,[l].concat(t.includes))),a(l,t),delete l.statics,delete l.includes,l.options&&(l.options=s.options?u(s.options):{},a(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){s.callInitHooks&&s.callInitHooks.call(this),this._initHooksCalled=!0;for(var p=0,g=l._initHooks.length;p<g;p++)l._initHooks[p].call(this)}},e},J.include=function(t){var e=this.prototype.options;return a(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},J.mergeOptions=function(t){return a(this.prototype.options,t),this},J.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),s=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(s),this};function zt(t){if(!(typeof L=="undefined"||!L||!L.Mixin)){t=N(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var vt={on:function(t,e,s){if(typeof t=="object")for(var l in t)this._on(l,t[l],e);else{t=C(t);for(var h=0,p=t.length;h<p;h++)this._on(t[h],e,s)}return this},off:function(t,e,s){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],e);else{t=C(t);for(var h=arguments.length===1,p=0,g=t.length;p<g;p++)h?this._off(t[p]):this._off(t[p],e,s)}return this},_on:function(t,e,s){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}this._events=this._events||{};var l=this._events[t];l||(l=[],this._events[t]=l),s===this&&(s=void 0);for(var h={fn:e,ctx:s},p=l,g=0,x=p.length;g<x;g++)if(p[g].fn===e&&p[g].ctx===s)return;p.push(h)},_off:function(t,e,s){var l,h,p;if(!!this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(h=0,p=l.length;h<p;h++)l[h].fn=v;delete this._events[t];return}if(s===this&&(s=void 0),typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}for(h=0,p=l.length;h<p;h++){var g=l[h];if(g.ctx===s&&g.fn===e){this._firingCount&&(g.fn=v,this._events[t]=l=l.slice()),l.splice(h,1);return}}console.warn("listener not found")}},fire:function(t,e,s){if(!this.listens(t,s))return this;var l=a({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var p=0,g=h.length;p<g;p++){var x=h[p];x.fn.call(x.ctx||this,l)}this._firingCount--}}return s&&this._propagateEvent(l),this},listens:function(t,e){typeof t!="string"&&console.warn('"string" type argument expected');var s=this._events&&this._events[t];if(s&&s.length)return!0;if(e){for(var l in this._eventParents)if(this._eventParents[l].listens(t,e))return!0}return!1},once:function(t,e,s){if(typeof t=="object"){for(var l in t)this.once(l,t[l],e);return this}var h=c(function(){this.off(t,e,s).off(t,h,s)},this);return this.on(t,e,s).on(t,h,s)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,a({layer:t.target,propagatedFrom:t.target},t),!0)}};vt.addEventListener=vt.on,vt.removeEventListener=vt.clearAllEventListeners=vt.off,vt.addOneTimeEventListener=vt.once,vt.fireEvent=vt.fire,vt.hasEventListeners=vt.listens;var yt=J.extend(vt);function F(t,e,s){this.x=s?Math.round(t):t,this.y=s?Math.round(e):e}var Et=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(K(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(K(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Et(this.x),this.y=Et(this.y),this},distanceTo:function(t){t=K(t);var e=t.x-this.x,s=t.y-this.y;return Math.sqrt(e*e+s*s)},equals:function(t){return t=K(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=K(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function K(t,e,s){return t instanceof F?t:N(t)?new F(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,e,s)}function dt(t,e){if(!!t)for(var s=e?[t,e]:t,l=0,h=s.length;l<h;l++)this.extend(s[l])}dt.prototype={extend:function(t){return t=K(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new F(this.min.x,this.max.y)},getTopRight:function(){return new F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,s;return typeof t[0]=="number"||t instanceof F?t=K(t):t=Nt(t),t instanceof dt?(e=t.min,s=t.max):e=s=t,e.x>=this.min.x&&s.x<=this.max.x&&e.y>=this.min.y&&s.y<=this.max.y},intersects:function(t){t=Nt(t);var e=this.min,s=this.max,l=t.min,h=t.max,p=h.x>=e.x&&l.x<=s.x,g=h.y>=e.y&&l.y<=s.y;return p&&g},overlaps:function(t){t=Nt(t);var e=this.min,s=this.max,l=t.min,h=t.max,p=h.x>e.x&&l.x<s.x,g=h.y>e.y&&l.y<s.y;return p&&g},isValid:function(){return!!(this.min&&this.max)}};function Nt(t,e){return!t||t instanceof dt?t:new dt(t,e)}function R(t,e){if(!!t)for(var s=e?[t,e]:t,l=0,h=s.length;l<h;l++)this.extend(s[l])}R.prototype={extend:function(t){var e=this._southWest,s=this._northEast,l,h;if(t instanceof Y)l=t,h=t;else if(t instanceof R){if(l=t._southWest,h=t._northEast,!l||!h)return this}else return t?this.extend(j(t)||it(t)):this;return!e&&!s?(this._southWest=new Y(l.lat,l.lng),this._northEast=new Y(h.lat,h.lng)):(e.lat=Math.min(l.lat,e.lat),e.lng=Math.min(l.lng,e.lng),s.lat=Math.max(h.lat,s.lat),s.lng=Math.max(h.lng,s.lng)),this},pad:function(t){var e=this._southWest,s=this._northEast,l=Math.abs(e.lat-s.lat)*t,h=Math.abs(e.lng-s.lng)*t;return new R(new Y(e.lat-l,e.lng-h),new Y(s.lat+l,s.lng+h))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Y||"lat"in t?t=j(t):t=it(t);var e=this._southWest,s=this._northEast,l,h;return t instanceof R?(l=t.getSouthWest(),h=t.getNorthEast()):l=h=t,l.lat>=e.lat&&h.lat<=s.lat&&l.lng>=e.lng&&h.lng<=s.lng},intersects:function(t){t=it(t);var e=this._southWest,s=this._northEast,l=t.getSouthWest(),h=t.getNorthEast(),p=h.lat>=e.lat&&l.lat<=s.lat,g=h.lng>=e.lng&&l.lng<=s.lng;return p&&g},overlaps:function(t){t=it(t);var e=this._southWest,s=this._northEast,l=t.getSouthWest(),h=t.getNorthEast(),p=h.lat>e.lat&&l.lat<s.lat,g=h.lng>e.lng&&l.lng<s.lng;return p&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=it(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function it(t,e){return t instanceof R?t:new R(t,e)}function Y(t,e,s){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,s!==void 0&&(this.alt=+s)}Y.prototype={equals:function(t,e){if(!t)return!1;t=j(t);var s=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return s<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return ne.distance(this,j(t))},wrap:function(){return ne.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,s=e/Math.cos(Math.PI/180*this.lat);return it([this.lat-e,this.lng-s],[this.lat+e,this.lng+s])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function j(t,e,s){return t instanceof Y?t:N(t)&&typeof t[0]!="object"?t.length===3?new Y(t[0],t[1],t[2]):t.length===2?new Y(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Y(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new Y(t,e,s)}var It={latLngToPoint:function(t,e){var s=this.projection.project(t),l=this.scale(e);return this.transformation._transform(s,l)},pointToLatLng:function(t,e){var s=this.scale(e),l=this.transformation.untransform(t,s);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,s=this.scale(t),l=this.transformation.transform(e.min,s),h=this.transformation.transform(e.max,s);return new dt(l,h)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?m(t.lng,this.wrapLng,!0):t.lng,s=this.wrapLat?m(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new Y(s,e,l)},wrapLatLngBounds:function(t){var e=t.getCenter(),s=this.wrapLatLng(e),l=e.lat-s.lat,h=e.lng-s.lng;if(l===0&&h===0)return t;var p=t.getSouthWest(),g=t.getNorthEast(),x=new Y(p.lat-l,p.lng-h),T=new Y(g.lat-l,g.lng-h);return new R(x,T)}},ne=a({},It,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var s=Math.PI/180,l=t.lat*s,h=e.lat*s,p=Math.sin((e.lat-t.lat)*s/2),g=Math.sin((e.lng-t.lng)*s/2),x=p*p+Math.cos(l)*Math.cos(h)*g*g,T=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*T}}),Er=6378137,an={R:Er,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,s=this.MAX_LATITUDE,l=Math.max(Math.min(s,t.lat),-s),h=Math.sin(l*e);return new F(this.R*t.lng*e,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var e=180/Math.PI;return new Y((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Er*Math.PI;return new dt([-t,-t],[t,t])}()};function ln(t,e,s,l){if(N(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=s,this._d=l}ln.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new F((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Ge(t,e,s,l){return new ln(t,e,s,l)}var un=a({},ne,{code:"EPSG:3857",projection:an,transformation:function(){var t=.5/(Math.PI*an.R);return Ge(t,.5,-t,.5)}()}),ya=a({},un,{code:"EPSG:900913"});function Ar(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Or(t,e){var s="",l,h,p,g,x,T;for(l=0,p=t.length;l<p;l++){for(x=t[l],h=0,g=x.length;h<g;h++)T=x[h],s+=(h?"L":"M")+T.x+" "+T.y;s+=e?$.svg?"z":"x":""}return s||"M0 0"}var hn=document.documentElement.style,wi="ActiveXObject"in window,ba=wi&&!document.addEventListener,Mr="msLaunchUri"in navigator&&!("documentMode"in document),cn=Gt("webkit"),zr=Gt("android"),Nr=Gt("android 2")||Gt("android 3"),wa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xa=zr&&Gt("Google")&&wa<537&&!("AudioNode"in window),fn=!!window.opera,Ir=!Mr&&Gt("chrome"),Dr=Gt("gecko")&&!cn&&!fn&&!wi,Pa=!Ir&&Gt("safari"),Br=Gt("phantom"),Rr="OTransition"in hn,La=navigator.platform.indexOf("Win")===0,Zr=wi&&"transition"in hn,dn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Nr,Hr="MozPerspective"in hn,Ta=!window.L_DISABLE_3D&&(Zr||dn||Hr)&&!Rr&&!Br,qe=typeof orientation!="undefined"||Gt("mobile"),ka=qe&&cn,Sa=qe&&dn,$r=!window.PointerEvent&&window.MSPointerEvent,Fr=!!(window.PointerEvent||$r),jr="ontouchstart"in window||!!window.TouchEvent,Ca=!window.L_NO_TOUCH&&(jr||Fr),Ea=qe&&fn,Aa=qe&&Dr,Oa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ma=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,e),window.removeEventListener("testPassiveEventSupport",v,e)}catch{}return t}(),za=function(){return!!document.createElement("canvas").getContext}(),pn=!!(document.createElementNS&&Ar("svg").createSVGRect),Na=!!pn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ia=!pn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}();function Gt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var $={ie:wi,ielt9:ba,edge:Mr,webkit:cn,android:zr,android23:Nr,androidStock:xa,opera:fn,chrome:Ir,gecko:Dr,safari:Pa,phantom:Br,opera12:Rr,win:La,ie3d:Zr,webkit3d:dn,gecko3d:Hr,any3d:Ta,mobile:qe,mobileWebkit:ka,mobileWebkit3d:Sa,msPointer:$r,pointer:Fr,touch:Ca,touchNative:jr,mobileOpera:Ea,mobileGecko:Aa,retina:Oa,passiveEvents:Ma,canvas:za,svg:pn,vml:Ia,inlineSvg:Na},Ur=$.msPointer?"MSPointerDown":"pointerdown",Wr=$.msPointer?"MSPointerMove":"pointermove",Gr=$.msPointer?"MSPointerUp":"pointerup",qr=$.msPointer?"MSPointerCancel":"pointercancel",mn={touchstart:Ur,touchmove:Wr,touchend:Gr,touchcancel:qr},Vr={touchstart:$a,touchmove:xi,touchend:xi,touchcancel:xi},xe={},Yr=!1;function Da(t,e,s){return e==="touchstart"&&Ha(),Vr[e]?(s=Vr[e].bind(this,s),t.addEventListener(mn[e],s,!1),s):(console.warn("wrong event specified:",e),L.Util.falseFn)}function Ba(t,e,s){if(!mn[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(mn[e],s,!1)}function Ra(t){xe[t.pointerId]=t}function Za(t){xe[t.pointerId]&&(xe[t.pointerId]=t)}function Kr(t){delete xe[t.pointerId]}function Ha(){Yr||(document.addEventListener(Ur,Ra,!0),document.addEventListener(Wr,Za,!0),document.addEventListener(Gr,Kr,!0),document.addEventListener(qr,Kr,!0),Yr=!0)}function xi(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var s in xe)e.touches.push(xe[s]);e.changedTouches=[e],t(e)}}function $a(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ot(e),xi(t,e)}function Fa(t){var e={},s,l;for(l in t)s=t[l],e[l]=s&&s.bind?s.bind(t):s;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var ja=200;function Ua(t,e){t.addEventListener("dblclick",e);var s=0,l;function h(p){if(p.detail!==1){l=p.detail;return}if(!(p.pointerType==="mouse"||p.sourceCapabilities&&!p.sourceCapabilities.firesTouchEvents)){var g=Date.now();g-s<=ja?(l++,l===2&&e(Fa(p))):l=1,s=g}}return t.addEventListener("click",h),{dblclick:e,simDblclick:h}}function Wa(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var _n=Ti(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ve=Ti(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xr=Ve==="webkitTransition"||Ve==="OTransition"?Ve+"End":"transitionend";function Jr(t){return typeof t=="string"?document.getElementById(t):t}function Ye(t,e){var s=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!s||s==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);s=l?l[e]:null}return s==="auto"?null:s}function nt(t,e,s){var l=document.createElement(t);return l.className=e||"",s&&s.appendChild(l),l}function pt(t){var e=t.parentNode;e&&e.removeChild(t)}function Pi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Pe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Le(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function gn(t,e){if(t.classList!==void 0)return t.classList.contains(e);var s=Li(t);return s.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(s)}function V(t,e){if(t.classList!==void 0)for(var s=C(e),l=0,h=s.length;l<h;l++)t.classList.add(s[l]);else if(!gn(t,e)){var p=Li(t);vn(t,(p?p+" ":"")+e)}}function gt(t,e){t.classList!==void 0?t.classList.remove(e):vn(t,k((" "+Li(t)+" ").replace(" "+e+" "," ")))}function vn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Li(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ft(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Ga(t,e)}function Ga(t,e){var s=!1,l="DXImageTransform.Microsoft.Alpha";try{s=t.filters.item(l)}catch{if(e===1)return}e=Math.round(e*100),s?(s.Enabled=e!==100,s.Opacity=e):t.style.filter+=" progid:"+l+"(opacity="+e+")"}function Ti(t){for(var e=document.documentElement.style,s=0;s<t.length;s++)if(t[s]in e)return t[s];return!1}function fe(t,e,s){var l=e||new F(0,0);t.style[_n]=($.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(s?" scale("+s+")":"")}function bt(t,e){t._leaflet_pos=e,$.any3d?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function de(t){return t._leaflet_pos||new F(0,0)}var Ke,Xe,yn;if("onselectstart"in document)Ke=function(){q(window,"selectstart",Ot)},Xe=function(){ft(window,"selectstart",Ot)};else{var Je=Ti(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ke=function(){if(Je){var t=document.documentElement.style;yn=t[Je],t[Je]="none"}},Xe=function(){Je&&(document.documentElement.style[Je]=yn,yn=void 0)}}function bn(){q(window,"dragstart",Ot)}function wn(){ft(window,"dragstart",Ot)}var ki,xn;function Pn(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(Si(),ki=t,xn=t.style.outline,t.style.outline="none",q(window,"keydown",Si))}function Si(){!ki||(ki.style.outline=xn,ki=void 0,xn=void 0,ft(window,"keydown",Si))}function Qr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ln(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var qa={__proto__:null,TRANSFORM:_n,TRANSITION:Ve,TRANSITION_END:Xr,get:Jr,getStyle:Ye,create:nt,remove:pt,empty:Pi,toFront:Pe,toBack:Le,hasClass:gn,addClass:V,removeClass:gt,setClass:vn,getClass:Li,setOpacity:Ft,testProp:Ti,setTransform:fe,setPosition:bt,getPosition:de,get disableTextSelection(){return Ke},get enableTextSelection(){return Xe},disableImageDrag:bn,enableImageDrag:wn,preventOutline:Pn,restoreOutline:Si,getSizedParentNode:Qr,getScale:Ln};function q(t,e,s,l){if(e&&typeof e=="object")for(var h in e)kn(t,h,e[h],s);else{e=C(e);for(var p=0,g=e.length;p<g;p++)kn(t,e[p],s,l)}return this}var qt="_leaflet_events";function ft(t,e,s,l){if(arguments.length===1)ts(t),delete t[qt];else if(e&&typeof e=="object")for(var h in e)Sn(t,h,e[h],s);else if(e=C(e),arguments.length===2)ts(t,function(x){return z(e,x)!==-1});else for(var p=0,g=e.length;p<g;p++)Sn(t,e[p],s,l);return this}function ts(t,e){for(var s in t[qt]){var l=s.split(/\d/)[0];(!e||e(l))&&Sn(t,l,null,null,s)}}var Tn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function kn(t,e,s,l){var h=e+d(s)+(l?"_"+d(l):"");if(t[qt]&&t[qt][h])return this;var p=function(x){return s.call(l||t,x||window.event)},g=p;!$.touchNative&&$.pointer&&e.indexOf("touch")===0?p=Da(t,e,p):$.touch&&e==="dblclick"?p=Ua(t,p):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Tn[e]||e,p,$.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(p=function(x){x=x||window.event,En(t,x)&&g(x)},t.addEventListener(Tn[e],p,!1)):t.addEventListener(e,g,!1):t.attachEvent("on"+e,p),t[qt]=t[qt]||{},t[qt][h]=p}function Sn(t,e,s,l,h){h=h||e+d(s)+(l?"_"+d(l):"");var p=t[qt]&&t[qt][h];if(!p)return this;!$.touchNative&&$.pointer&&e.indexOf("touch")===0?Ba(t,e,p):$.touch&&e==="dblclick"?Wa(t,p):"removeEventListener"in t?t.removeEventListener(Tn[e]||e,p,!1):t.detachEvent("on"+e,p),t[qt][h]=null}function pe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Cn(t){return kn(t,"wheel",pe),this}function Qe(t){return q(t,"mousedown touchstart dblclick contextmenu",pe),t._leaflet_disable_click=!0,this}function Ot(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function me(t){return Ot(t),pe(t),this}function es(t,e){if(!e)return new F(t.clientX,t.clientY);var s=Ln(e),l=s.boundingClientRect;return new F((t.clientX-l.left)/s.x-e.clientLeft,(t.clientY-l.top)/s.y-e.clientTop)}var Va=$.win&&$.chrome?2*window.devicePixelRatio:$.gecko?window.devicePixelRatio:1;function is(t){return $.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Va:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function En(t,e){var s=e.relatedTarget;if(!s)return!0;try{for(;s&&s!==t;)s=s.parentNode}catch{return!1}return s!==t}var Ya={__proto__:null,on:q,off:ft,stopPropagation:pe,disableScrollPropagation:Cn,disableClickPropagation:Qe,preventDefault:Ot,stop:me,getMousePosition:es,getWheelDelta:is,isExternalTarget:En,addListener:q,removeListener:ft},ns=yt.extend({run:function(t,e,s,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=s||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=de(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=ct(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,s=this._duration*1e3;e<s?this._runFrame(this._easeOut(e/s),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var s=this._startPos.add(this._offset.multiplyBy(t));e&&s._round(),bt(this._el,s),this.fire("step")},_complete:function(){mt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Q=yt.extend({options:{crs:un,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=E(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ve&&$.any3d&&!$.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),q(this._proxy,Xr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,s){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(j(t),e,this.options.maxBounds),s=s||{},this._stop(),this._loaded&&!s.reset&&s!==!0){s.animate!==void 0&&(s.zoom=a({animate:s.animate},s.zoom),s.pan=a({animate:s.animate,duration:s.duration},s.pan));var l=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,s.zoom):this._tryAnimatedPan(t,s.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||($.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||($.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,s){var l=this.getZoomScale(e),h=this.getSize().divideBy(2),p=t instanceof F?t:this.latLngToContainerPoint(t),g=p.subtract(h).multiplyBy(1-1/l),x=this.containerPointToLatLng(h.add(g));return this.setView(x,e,{zoom:s})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():it(t);var s=K(e.paddingTopLeft||e.padding||[0,0]),l=K(e.paddingBottomRight||e.padding||[0,0]),h=this.getBoundsZoom(t,!1,s.add(l));if(h=typeof e.maxZoom=="number"?Math.min(e.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var p=l.subtract(s).divideBy(2),g=this.project(t.getSouthWest(),h),x=this.project(t.getNorthEast(),h),T=this.unproject(g.add(x).divideBy(2).add(p),h);return{center:T,zoom:h}},fitBounds:function(t,e){if(t=it(t),!t.isValid())throw new Error("Bounds are not valid.");var s=this._getBoundsCenterZoom(t,e);return this.setView(s.center,s.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=K(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ns,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){V(this._mapPane,"leaflet-pan-anim");var s=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,s,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,s){if(s=s||{},s.animate===!1||!$.any3d)return this.setView(t,e,s);this._stop();var l=this.project(this.getCenter()),h=this.project(t),p=this.getSize(),g=this._zoom;t=j(t),e=e===void 0?g:e;var x=Math.max(p.x,p.y),T=x*this.getZoomScale(g,e),O=h.distanceTo(l)||1,H=1.42,X=H*H;function tt(wt){var Zi=wt?-1:1,Bl=wt?T:x,Rl=T*T-x*x+Zi*X*X*O*O,Zl=2*Bl*X*O,$n=Rl/Zl,Is=Math.sqrt($n*$n+1)-$n,Hl=Is<1e-9?-18:Math.log(Is);return Hl}function ie(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function ge(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function Ri(wt){return ie(wt)/ge(wt)}var oe=tt(0);function Hn(wt){return x*(ge(oe)/ge(oe+H*wt))}function zl(wt){return x*(ge(oe)*Ri(oe+H*wt)-ie(oe))/X}function Nl(wt){return 1-Math.pow(1-wt,1.5)}var Il=Date.now(),zs=(tt(1)-oe)/H,Dl=s.duration?1e3*s.duration:1e3*zs*.8;function Ns(){var wt=(Date.now()-Il)/Dl,Zi=Nl(wt)*zs;wt<=1?(this._flyToFrame=ct(Ns,this),this._move(this.unproject(l.add(h.subtract(l).multiplyBy(zl(Zi)/O)),g),this.getScaleZoom(x/Hn(Zi),g),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,s.noMoveStart),Ns.call(this),this},flyToBounds:function(t,e){var s=this._getBoundsCenterZoom(t,e);return this.flyTo(s.center,s.zoom,e)},setMaxBounds:function(t){if(t=it(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var s=this.getCenter(),l=this._limitCenter(s,this._zoom,it(t));return s.equals(l)||this.panTo(l,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var s=K(e.paddingTopLeft||e.padding||[0,0]),l=K(e.paddingBottomRight||e.padding||[0,0]),h=this.project(this.getCenter()),p=this.project(t),g=this.getPixelBounds(),x=Nt([g.min.add(s),g.max.subtract(l)]),T=x.getSize();if(!x.contains(p)){this._enforcingBounds=!0;var O=p.subtract(x.getCenter()),H=x.extend(p).getSize().subtract(T);h.x+=O.x<0?-H.x:H.x,h.y+=O.y<0?-H.y:H.y,this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=a({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var s=this.getSize(),l=e.divideBy(2).round(),h=s.divideBy(2).round(),p=l.subtract(h);return!p.x&&!p.y?this:(t.animate&&t.pan?this.panBy(p):(t.pan&&this._rawPanBy(p),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:s}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=a({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=c(this._handleGeolocationResponse,this),s=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,s,t):navigator.geolocation.getCurrentPosition(e,s,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(!!this._container._leaflet_id){var e=t.code,s=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+s+"."})}},_handleGeolocationResponse:function(t){if(!!this._container._leaflet_id){var e=t.coords.latitude,s=t.coords.longitude,l=new Y(e,s),h=l.toBounds(t.coords.accuracy*2),p=this._locateOptions;if(p.setView){var g=this.getBoundsZoom(h);this.setView(l,p.maxZoom?Math.min(g,p.maxZoom):g)}var x={latlng:l,bounds:h,timestamp:t.timestamp};for(var T in t.coords)typeof t.coords[T]=="number"&&(x[T]=t.coords[T]);this.fire("locationfound",x)}},addHandler:function(t,e){if(!e)return this;var s=this[t]=new e(this);return this._handlers.push(s),this.options[t]&&s.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(mt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)pt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var s="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=nt("div",s,e||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),s=this.unproject(t.getTopRight());return new R(e,s)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,s){t=it(t),s=K(s||[0,0]);var l=this.getZoom()||0,h=this.getMinZoom(),p=this.getMaxZoom(),g=t.getNorthWest(),x=t.getSouthEast(),T=this.getSize().subtract(s),O=Nt(this.project(x,l),this.project(g,l)).getSize(),H=$.any3d?this.options.zoomSnap:1,X=T.x/O.x,tt=T.y/O.y,ie=e?Math.max(X,tt):Math.min(X,tt);return l=this.getScaleZoom(ie,l),H&&(l=Math.round(l/(H/100))*(H/100),l=e?Math.ceil(l/H)*H:Math.floor(l/H)*H),Math.max(h,Math.min(p,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var s=this._getTopLeftPoint(t,e);return new dt(s,s.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var s=this.options.crs;return e=e===void 0?this._zoom:e,s.scale(t)/s.scale(e)},getScaleZoom:function(t,e){var s=this.options.crs;e=e===void 0?this._zoom:e;var l=s.zoom(t*s.scale(e));return isNaN(l)?1/0:l},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(K(t),e)},layerPointToLatLng:function(t){var e=K(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(j(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(it(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return K(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return K(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(K(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return es(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Jr(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");q(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&$.any3d,V(t,"leaflet-container"+($.touch?" leaflet-touch":"")+($.retina?" leaflet-retina":"")+($.ielt9?" leaflet-oldie":"")+($.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Ye(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bt(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(V(t.markerPane,"leaflet-zoom-hide"),V(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){bt(this._mapPane,new F(0,0));var s=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var l=this._zoom!==e;this._moveStart(l,!1)._move(t,e)._moveEnd(l),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,s,l){e===void 0&&(e=this._zoom);var h=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?s&&s.pinch&&this.fire("zoom",s):((h||s&&s.pinch)&&this.fire("zoom",s),this.fire("move",s)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return mt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){bt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?ft:q;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),$.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){mt(this._resizeRequest),this._resizeRequest=ct(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var s=[],l,h=e==="mouseout"||e==="mouseover",p=t.target||t.srcElement,g=!1;p;){if(l=this._targets[d(p)],l&&(e==="click"||e==="preclick")&&this._draggableMoved(l)){g=!0;break}if(l&&l.listens(e,!0)&&(h&&!En(p,t)||(s.push(l),h))||p===this._container)break;p=p.parentNode}return!s.length&&!g&&!h&&this.listens(e,!0)&&(s=[this]),s},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var s=t.type;s==="mousedown"&&Pn(e),this._fireDOMEvent(t,s)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,s){if(t.type==="click"){var l=a({},t);l.type="preclick",this._fireDOMEvent(l,l.type,s)}var h=this._findEventTargets(t,e);if(s){for(var p=[],g=0;g<s.length;g++)s[g].listens(e,!0)&&p.push(s[g]);h=p.concat(h)}if(!!h.length){e==="contextmenu"&&Ot(t);var x=h[0],T={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var O=x.getLatLng&&(!x._radius||x._radius<=10);T.containerPoint=O?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=O?x.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(g=0;g<h.length;g++)if(h[g].fire(e,T,!0),T.originalEvent._stopped||h[g].options.bubblingMouseEvents===!1&&z(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return de(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var s=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return s.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var s=this.getSize()._divideBy(2);return this.project(t,e)._subtract(s)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,s){var l=this._getNewPixelOrigin(s,e);return this.project(t,e)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,e,s){var l=this._getNewPixelOrigin(s,e);return Nt([this.project(t.getSouthWest(),e)._subtract(l),this.project(t.getNorthWest(),e)._subtract(l),this.project(t.getSouthEast(),e)._subtract(l),this.project(t.getNorthEast(),e)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,s){if(!s)return t;var l=this.project(t,e),h=this.getSize().divideBy(2),p=new dt(l.subtract(h),l.add(h)),g=this._getBoundsOffset(p,s,e);return g.round().equals([0,0])?t:this.unproject(l.add(g),e)},_limitOffset:function(t,e){if(!e)return t;var s=this.getPixelBounds(),l=new dt(s.min.add(t),s.max.add(t));return t.add(this._getBoundsOffset(l,e))},_getBoundsOffset:function(t,e,s){var l=Nt(this.project(e.getNorthEast(),s),this.project(e.getSouthWest(),s)),h=l.min.subtract(t.min),p=l.max.subtract(t.max),g=this._rebound(h.x,-p.x),x=this._rebound(h.y,-p.y);return new F(g,x)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),s=this.getMaxZoom(),l=$.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(e,Math.min(s,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var s=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(s)?!1:(this.panBy(s,e),!0)},_createAnimProxy:function(){var t=this._proxy=nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var s=_n,l=this._proxy.style[s];fe(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),l===this._proxy.style[s]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,s){if(this._animatingZoom)return!0;if(s=s||{},!this._zoomAnimated||s.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(e),h=this._getCenterOffset(t)._divideBy(1-1/l);return s.animate!==!0&&!this.getSize().contains(h)?!1:(ct(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,s,l){!this._mapPane||(s&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,V(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ka(t,e){return new Q(t,e)}var jt=J.extend({options:{position:"topright"},initialize:function(t){E(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),s=this.getPosition(),l=t._controlCorners[s];return V(e,"leaflet-control"),s.indexOf("bottom")!==-1?l.insertBefore(e,l.firstChild):l.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ti=function(t){return new jt(t)};Q.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",s=this._controlContainer=nt("div",e+"control-container",this._container);function l(h,p){var g=e+h+" "+e+p;t[h+p]=nt("div",g,s)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)pt(this._controlCorners[t]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rs=jt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,s,l){return s<l?-1:l<s?1:0}},initialize:function(t,e,s){E(this,s),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in e)this._addLayer(e[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return jt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){V(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(V(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=nt("div",t),s=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Qe(e),Cn(e);var l=this._section=nt("section",t+"-list");s&&(this._map.on("click",this.collapse,this),q(e,{mouseenter:function(){q(l,"click",Ot),this.expand(),setTimeout(function(){ft(l,"click",Ot)})},mouseleave:this.collapse},this));var h=this._layersLink=nt("a",t+"-toggle",e);h.href="#",h.title="Layers",h.setAttribute("role","button"),q(h,"click",Ot),q(h,"focus",this.expand,this),s||this.expand(),this._baseLayersList=nt("div",t+"-base",l),this._separator=nt("div",t+"-separator",l),this._overlaysList=nt("div",t+"-overlays",l),e.appendChild(l)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,s){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:s}),this.options.sortLayers&&this._layers.sort(c(function(l,h){return this.options.sortFunction(l.layer,h.layer,l.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Pi(this._baseLayersList),Pi(this._overlaysList),this._layerControlInputs=[];var t,e,s,l,h=0;for(s=0;s<this._layers.length;s++)l=this._layers[s],this._addItem(l),e=e||l.overlay,t=t||!l.overlay,h+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),s=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;s&&this._map.fire(s,e)},_createRadioElement:function(t,e){var s='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=s,l.firstChild},_addItem:function(t){var e=document.createElement("label"),s=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=s):l=this._createRadioElement("leaflet-base-layers_"+d(this),s),this._layerControlInputs.push(l),l.layerId=d(t.layer),q(l,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var p=document.createElement("span");e.appendChild(p),p.appendChild(l),p.appendChild(h);var g=t.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t=this._layerControlInputs,e,s,l=[],h=[];this._handlingClick=!0;for(var p=t.length-1;p>=0;p--)e=t[p],s=this._getLayer(e.layerId).layer,e.checked?l.push(s):e.checked||h.push(s);for(p=0;p<h.length;p++)this._map.hasLayer(h[p])&&this._map.removeLayer(h[p]);for(p=0;p<l.length;p++)this._map.hasLayer(l[p])||this._map.addLayer(l[p]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,s,l=this._map.getZoom(),h=t.length-1;h>=0;h--)e=t[h],s=this._getLayer(e.layerId).layer,e.disabled=s.options.minZoom!==void 0&&l<s.options.minZoom||s.options.maxZoom!==void 0&&l>s.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Xa=function(t,e,s){return new rs(t,e,s)},An=jt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",s=nt("div",e+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,e+"-in",s,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,e+"-out",s,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),s},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,s,l,h){var p=nt("a",s,l);return p.innerHTML=t,p.href="#",p.title=e,p.setAttribute("role","button"),p.setAttribute("aria-label",e),Qe(p),q(p,"click",me),q(p,"click",h,this),q(p,"click",this._refocusOnMap,this),p},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";gt(this._zoomInButton,e),gt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(V(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(V(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Q.mergeOptions({zoomControl:!0}),Q.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new An,this.addControl(this.zoomControl))});var Ja=function(t){return new An(t)},ss=jt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",s=nt("div",e),l=this.options;return this._addScales(l,e+"-line",s),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),s},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,s){t.metric&&(this._mScale=nt("div",e,s)),t.imperial&&(this._iScale=nt("div",e,s))},_update:function(){var t=this._map,e=t.getSize().y/2,s=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(s)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),s=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,s,e/t)},_updateImperial:function(t){var e=t*3.2808399,s,l,h;e>5280?(s=e/5280,l=this._getRoundNum(s),this._updateScale(this._iScale,l+" mi",l/s)):(h=this._getRoundNum(e),this._updateScale(this._iScale,h+" ft",h/e))},_updateScale:function(t,e,s){t.style.width=Math.round(this.options.maxWidth*s)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),s=t/e;return s=s>=10?10:s>=5?5:s>=3?3:s>=2?2:1,e*s}}),Qa=function(t){return new ss(t)},tl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',On=jt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($.inlineSvg?tl+" ":"")+"Leaflet</a>"},initialize:function(t){E(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=nt("div","leaflet-control-attribution"),Qe(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var s=[];this.options.prefix&&s.push(this.options.prefix),t.length&&s.push(t.join(", ")),this._container.innerHTML=s.join(' <span aria-hidden="true">|</span> ')}}});Q.mergeOptions({attributionControl:!0}),Q.addInitHook(function(){this.options.attributionControl&&new On().addTo(this)});var el=function(t){return new On(t)};jt.Layers=rs,jt.Zoom=An,jt.Scale=ss,jt.Attribution=On,ti.layers=Xa,ti.zoom=Ja,ti.scale=Qa,ti.attribution=el;var Vt=J.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vt.addTo=function(t,e){return t.addHandler(e,this),this};var il={Events:vt},os=$.touch?"touchstart mousedown":"mousedown",re=yt.extend({options:{clickTolerance:3},initialize:function(t,e,s,l){E(this,l),this._element=t,this._dragStartTarget=e||t,this._preventOutline=s},enable:function(){this._enabled||(q(this._dragStartTarget,os,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(re._dragging===this&&this.finishDrag(!0),ft(this._dragStartTarget,os,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!!this._enabled&&(this._moved=!1,!gn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){re._dragging===this&&this.finishDrag();return}if(!(re._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(re._dragging=this,this._preventOutline&&Pn(this._element),bn(),Ke(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,s=Qr(this._element);this._startPoint=new F(e.clientX,e.clientY),this._startPos=de(this._element),this._parentScale=Ln(s);var l=t.type==="mousedown";q(document,l?"mousemove":"touchmove",this._onMove,this),q(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(!!this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,s=new F(e.clientX,e.clientY)._subtract(this._startPoint);!s.x&&!s.y||Math.abs(s.x)+Math.abs(s.y)<this.options.clickTolerance||(s.x/=this._parentScale.x,s.y/=this._parentScale.y,Ot(t),this._moved||(this.fire("dragstart"),this._moved=!0,V(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),V(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(s),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),bt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ft(document,"mousemove touchmove",this._onMove,this),ft(document,"mouseup touchend touchcancel",this._onUp,this),wn(),Xe(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,re._dragging=!1}});function as(t,e){if(!e||!t.length)return t.slice();var s=e*e;return t=sl(t,s),t=rl(t,s),t}function ls(t,e,s){return Math.sqrt(ei(t,e,s,!0))}function nl(t,e,s){return ei(t,e,s)}function rl(t,e){var s=t.length,l=typeof Uint8Array!=void 0+""?Uint8Array:Array,h=new l(s);h[0]=h[s-1]=1,Mn(t,h,e,0,s-1);var p,g=[];for(p=0;p<s;p++)h[p]&&g.push(t[p]);return g}function Mn(t,e,s,l,h){var p=0,g,x,T;for(x=l+1;x<=h-1;x++)T=ei(t[x],t[l],t[h],!0),T>p&&(g=x,p=T);p>s&&(e[g]=1,Mn(t,e,s,l,g),Mn(t,e,s,g,h))}function sl(t,e){for(var s=[t[0]],l=1,h=0,p=t.length;l<p;l++)ol(t[l],t[h])>e&&(s.push(t[l]),h=l);return h<p-1&&s.push(t[p-1]),s}var us;function hs(t,e,s,l,h){var p=l?us:_e(t,s),g=_e(e,s),x,T,O;for(us=g;;){if(!(p|g))return[t,e];if(p&g)return!1;x=p||g,T=Ci(t,e,x,s,h),O=_e(T,s),x===p?(t=T,p=O):(e=T,g=O)}}function Ci(t,e,s,l,h){var p=e.x-t.x,g=e.y-t.y,x=l.min,T=l.max,O,H;return s&8?(O=t.x+p*(T.y-t.y)/g,H=T.y):s&4?(O=t.x+p*(x.y-t.y)/g,H=x.y):s&2?(O=T.x,H=t.y+g*(T.x-t.x)/p):s&1&&(O=x.x,H=t.y+g*(x.x-t.x)/p),new F(O,H,h)}function _e(t,e){var s=0;return t.x<e.min.x?s|=1:t.x>e.max.x&&(s|=2),t.y<e.min.y?s|=4:t.y>e.max.y&&(s|=8),s}function ol(t,e){var s=e.x-t.x,l=e.y-t.y;return s*s+l*l}function ei(t,e,s,l){var h=e.x,p=e.y,g=s.x-h,x=s.y-p,T=g*g+x*x,O;return T>0&&(O=((t.x-h)*g+(t.y-p)*x)/T,O>1?(h=s.x,p=s.y):O>0&&(h+=g*O,p+=x*O)),g=t.x-h,x=t.y-p,l?g*g+x*x:new F(h,p)}function Jt(t){return!N(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]!="undefined"}function cs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jt(t)}var al={__proto__:null,simplify:as,pointToSegmentDistance:ls,closestPointOnSegment:nl,clipSegment:hs,_getEdgeIntersection:Ci,_getBitCode:_e,_sqClosestPointOnSegment:ei,isFlat:Jt,_flat:cs};function fs(t,e,s){var l,h=[1,4,2,8],p,g,x,T,O,H,X,tt;for(p=0,H=t.length;p<H;p++)t[p]._code=_e(t[p],e);for(x=0;x<4;x++){for(X=h[x],l=[],p=0,H=t.length,g=H-1;p<H;g=p++)T=t[p],O=t[g],T._code&X?O._code&X||(tt=Ci(O,T,X,e,s),tt._code=_e(tt,e),l.push(tt)):(O._code&X&&(tt=Ci(O,T,X,e,s),tt._code=_e(tt,e),l.push(tt)),l.push(T));t=l}return t}var ll={__proto__:null,clipPolygon:fs},zn={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new Y(t.y,t.x)},bounds:new dt([-180,-90],[180,90])},Nn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new dt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,s=this.R,l=t.lat*e,h=this.R_MINOR/s,p=Math.sqrt(1-h*h),g=p*Math.sin(l),x=Math.tan(Math.PI/4-l/2)/Math.pow((1-g)/(1+g),p/2);return l=-s*Math.log(Math.max(x,1e-10)),new F(t.lng*e*s,l)},unproject:function(t){for(var e=180/Math.PI,s=this.R,l=this.R_MINOR/s,h=Math.sqrt(1-l*l),p=Math.exp(-t.y/s),g=Math.PI/2-2*Math.atan(p),x=0,T=.1,O;x<15&&Math.abs(T)>1e-7;x++)O=h*Math.sin(g),O=Math.pow((1-O)/(1+O),h/2),T=Math.PI/2-2*Math.atan(p*O)-g,g+=T;return new Y(g*e,t.x*e/s)}},ul={__proto__:null,LonLat:zn,Mercator:Nn,SphericalMercator:an},hl=a({},ne,{code:"EPSG:3395",projection:Nn,transformation:function(){var t=.5/(Math.PI*Nn.R);return Ge(t,.5,-t,.5)}()}),ds=a({},ne,{code:"EPSG:4326",projection:zn,transformation:Ge(1/180,1,-1/180,.5)}),cl=a({},It,{projection:zn,transformation:Ge(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var s=e.lng-t.lng,l=e.lat-t.lat;return Math.sqrt(s*s+l*l)},infinite:!0});It.Earth=ne,It.EPSG3395=hl,It.EPSG3857=un,It.EPSG900913=ya,It.EPSG4326=ds,It.Simple=cl;var Ut=yt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(!!e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var s=this.getEvents();e.on(s,this),this.once("remove",function(){e.off(s,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Q.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var s in this._layers)t.call(e,this._layers[s]);return this},_addLayers:function(t){t=t?N(t)?t:[t]:[];for(var e=0,s=t.length;e<s;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,s=this._getZoomSpan();for(var l in this._zoomBoundLayers){var h=this._zoomBoundLayers[l].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),e=h.maxZoom===void 0?e:Math.max(e,h.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,s!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Te=Ut.extend({initialize:function(t,e){E(this,e),this._layers={};var s,l;if(t)for(s=0,l=t.length;s<l;s++)this.addLayer(t[s])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),s,l;for(s in this._layers)l=this._layers[s],l[t]&&l[t].apply(l,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var s in this._layers)t.call(e,this._layers[s]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),fl=function(t,e){return new Te(t,e)},ke=Te.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Te.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Te.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var s=this._layers[e];t.extend(s.getBounds?s.getBounds():s.getLatLng())}return t}}),dl=function(t,e){return new ke(t,e)},Se=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){E(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var s=this._getIconUrl(t);if(!s){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(s,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,e){var s=this.options,l=s[e+"Size"];typeof l=="number"&&(l=[l,l]);var h=K(l),p=K(e==="shadow"&&s.shadowAnchor||s.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(s.className||""),p&&(t.style.marginLeft=-p.x+"px",t.style.marginTop=-p.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return $.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function pl(t){return new Se(t)}var ii=Se.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ii.imagePath!="string"&&(ii.imagePath=this._detectIconPath()),(this.options.imagePath||ii.imagePath)+Se.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(s,l,h){var p=l.exec(s);return p&&p[h]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=nt("div","leaflet-default-icon-path",document.body),e=Ye(t,"background-image")||Ye(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var s=document.querySelector('link[href$="leaflet.css"]');return s?s.href.substring(0,s.href.length-11-1):""}}),ps=Vt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new re(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),V(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,s=e._map,l=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,p=de(e._icon),g=s.getPixelBounds(),x=s.getPixelOrigin(),T=Nt(g.min._subtract(x).add(h),g.max._subtract(x).subtract(h));if(!T.contains(p)){var O=K((Math.max(T.max.x,p.x)-T.max.x)/(g.max.x-T.max.x)-(Math.min(T.min.x,p.x)-T.min.x)/(g.min.x-T.min.x),(Math.max(T.max.y,p.y)-T.max.y)/(g.max.y-T.max.y)-(Math.min(T.min.y,p.y)-T.min.y)/(g.min.y-T.min.y)).multiplyBy(l);s.panBy(O,{animate:!1}),this._draggable._newPos._add(O),this._draggable._startPos._add(O),bt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ct(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(mt(this._panRequest),this._panRequest=ct(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,s=e._shadow,l=de(e._icon),h=e._map.layerPointToLatLng(l);s&&bt(s,l),e._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){mt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ei=Ut.extend({options:{icon:new ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){E(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),s=t.icon.createIcon(this._icon),l=!1;s!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(s.title=t.title),s.tagName==="IMG"&&(s.alt=t.alt||"")),V(s,e),t.keyboard&&(s.tabIndex="0",s.setAttribute("role","button")),this._icon=s,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&q(s,"focus",this._panOnFocus,this);var h=t.icon.createShadow(this._shadow),p=!1;h!==this._shadow&&(this._removeShadow(),p=!0),h&&(V(h,e),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&p&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&bt(this._icon,t),this._shadow&&bt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(!!this.options.interactive&&(V(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ps)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ps(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ft(this._icon,t),this._shadow&&Ft(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(!!t){var e=this.options.icon.options,s=e.iconSize?K(e.iconSize):K(0,0),l=e.iconAnchor?K(e.iconAnchor):K(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:s.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ml(t,e){return new Ei(t,e)}var se=Ut.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return E(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ai=se.extend({options:{fill:!0,radius:10},initialize:function(t,e){E(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return se.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,s=this._clickTolerance(),l=[t+s,e+s];this._pxBounds=new dt(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _l(t,e){return new Ai(t,e)}var In=Ai.extend({initialize:function(t,e,s){if(typeof e=="number"&&(e=a({},s,{radius:e})),E(this,e),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:se.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,s=this._map,l=s.options.crs;if(l.distance===ne.distance){var h=Math.PI/180,p=this._mRadius/ne.R/h,g=s.project([e+p,t]),x=s.project([e-p,t]),T=g.add(x).divideBy(2),O=s.unproject(T).lat,H=Math.acos((Math.cos(p*h)-Math.sin(e*h)*Math.sin(O*h))/(Math.cos(e*h)*Math.cos(O*h)))/h;(isNaN(H)||H===0)&&(H=p/Math.cos(Math.PI/180*e)),this._point=T.subtract(s.getPixelOrigin()),this._radius=isNaN(H)?0:T.x-s.project([O,t-H]).x,this._radiusY=T.y-g.y}else{var X=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(X).x}this._updateBounds()}});function gl(t,e,s){return new In(t,e,s)}var Qt=se.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){E(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,s=null,l=ei,h,p,g=0,x=this._parts.length;g<x;g++)for(var T=this._parts[g],O=1,H=T.length;O<H;O++){h=T[O-1],p=T[O];var X=l(t,h,p,!0);X<e&&(e=X,s=l(t,h,p))}return s&&(s.distance=Math.sqrt(e)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,s,l,h,p,g,x=this._rings[0],T=x.length;if(!T)return null;for(t=0,e=0;t<T-1;t++)e+=x[t].distanceTo(x[t+1])/2;if(e===0)return this._map.layerPointToLatLng(x[0]);for(t=0,l=0;t<T-1;t++)if(h=x[t],p=x[t+1],s=h.distanceTo(p),l+=s,l>e)return g=(l-e)/s,this._map.layerPointToLatLng([p.x-g*(p.x-h.x),p.y-g*(p.y-h.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],s=Jt(t),l=0,h=t.length;l<h;l++)s?(e[l]=j(t[l]),this._bounds.extend(e[l])):e[l]=this._convertLatLngs(t[l]);return e},_project:function(){var t=new dt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new F(t,t);!this._rawPxBounds||(this._pxBounds=new dt([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,s){var l=t[0]instanceof Y,h=t.length,p,g;if(l){for(g=[],p=0;p<h;p++)g[p]=this._map.latLngToLayerPoint(t[p]),s.extend(g[p]);e.push(g)}else for(p=0;p<h;p++)this._projectLatlngs(t[p],e,s)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,s,l,h,p,g,x,T;for(s=0,h=0,p=this._rings.length;s<p;s++)for(T=this._rings[s],l=0,g=T.length;l<g-1;l++)x=hs(T[l],T[l+1],t,l,!0),x&&(e[h]=e[h]||[],e[h].push(x[0]),(x[1]!==T[l+1]||l===g-2)&&(e[h].push(x[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,s=0,l=t.length;s<l;s++)t[s]=as(t[s],e)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var s,l,h,p,g,x,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(s=0,p=this._parts.length;s<p;s++)for(x=this._parts[s],l=0,g=x.length,h=g-1;l<g;h=l++)if(!(!e&&l===0)&&ls(t,x[h],x[l])<=T)return!0;return!1}});function vl(t,e){return new Qt(t,e)}Qt._flat=cs;var Ce=Qt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,s,l,h,p,g,x,T,O=this._rings[0],H=O.length;if(!H)return null;for(p=g=x=0,t=0,e=H-1;t<H;e=t++)s=O[t],l=O[e],h=s.y*l.x-l.y*s.x,g+=(s.x+l.x)*h,x+=(s.y+l.y)*h,p+=h*3;return p===0?T=O[0]:T=[g/p,x/p],this._map.layerPointToLatLng(T)},_convertLatLngs:function(t){var e=Qt.prototype._convertLatLngs.call(this,t),s=e.length;return s>=2&&e[0]instanceof Y&&e[0].equals(e[s-1])&&e.pop(),e},_setLatLngs:function(t){Qt.prototype._setLatLngs.call(this,t),Jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,s=new F(e,e);if(t=new dt(t.min.subtract(s),t.max.add(s)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,h=this._rings.length,p;l<h;l++)p=fs(this._rings[l],t,!0),p.length&&this._parts.push(p)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,s,l,h,p,g,x,T,O;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(p=0,T=this._parts.length;p<T;p++)for(s=this._parts[p],g=0,O=s.length,x=O-1;g<O;x=g++)l=s[g],h=s[x],l.y>t.y!=h.y>t.y&&t.x<(h.x-l.x)*(t.y-l.y)/(h.y-l.y)+l.x&&(e=!e);return e||Qt.prototype._containsPoint.call(this,t,!0)}});function yl(t,e){return new Ce(t,e)}var te=ke.extend({initialize:function(t,e){E(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=N(t)?t:t.features,s,l,h;if(e){for(s=0,l=e.length;s<l;s++)h=e[s],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var p=this.options;if(p.filter&&!p.filter(t))return this;var g=Dn(t,p);return g?(g.feature=zi(t),g.defaultOptions=g.options,this.resetStyle(g),p.onEachFeature&&p.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=a({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Dn(t,e){var s=t.type==="Feature"?t.geometry:t,l=s?s.coordinates:null,h=[],p=e&&e.pointToLayer,g=e&&e.coordsToLatLng||Bn,x,T,O,H;if(!l&&!s)return null;switch(s.type){case"Point":return x=g(l),ms(p,t,x,e);case"MultiPoint":for(O=0,H=l.length;O<H;O++)x=g(l[O]),h.push(ms(p,t,x,e));return new ke(h);case"LineString":case"MultiLineString":return T=Oi(l,s.type==="LineString"?0:1,g),new Qt(T,e);case"Polygon":case"MultiPolygon":return T=Oi(l,s.type==="Polygon"?1:2,g),new Ce(T,e);case"GeometryCollection":for(O=0,H=s.geometries.length;O<H;O++){var X=Dn({geometry:s.geometries[O],type:"Feature",properties:t.properties},e);X&&h.push(X)}return new ke(h);default:throw new Error("Invalid GeoJSON object.")}}function ms(t,e,s,l){return t?t(e,s):new Ei(s,l&&l.markersInheritOptions&&l)}function Bn(t){return new Y(t[1],t[0],t[2])}function Oi(t,e,s){for(var l=[],h=0,p=t.length,g;h<p;h++)g=e?Oi(t[h],e-1,s):(s||Bn)(t[h]),l.push(g);return l}function Rn(t,e){return t=j(t),t.alt!==void 0?[y(t.lng,e),y(t.lat,e),y(t.alt,e)]:[y(t.lng,e),y(t.lat,e)]}function Mi(t,e,s,l){for(var h=[],p=0,g=t.length;p<g;p++)h.push(e?Mi(t[p],e-1,s,l):Rn(t[p],l));return!e&&s&&h.push(h[0]),h}function Ee(t,e){return t.feature?a({},t.feature,{geometry:e}):zi(e)}function zi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Zn={toGeoJSON:function(t){return Ee(this,{type:"Point",coordinates:Rn(this.getLatLng(),t)})}};Ei.include(Zn),In.include(Zn),Ai.include(Zn),Qt.include({toGeoJSON:function(t){var e=!Jt(this._latlngs),s=Mi(this._latlngs,e?1:0,!1,t);return Ee(this,{type:(e?"Multi":"")+"LineString",coordinates:s})}}),Ce.include({toGeoJSON:function(t){var e=!Jt(this._latlngs),s=e&&!Jt(this._latlngs[0]),l=Mi(this._latlngs,s?2:e?1:0,!0,t);return e||(l=[l]),Ee(this,{type:(s?"Multi":"")+"Polygon",coordinates:l})}}),Te.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(s){e.push(s.toGeoJSON(t).geometry.coordinates)}),Ee(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var s=e==="GeometryCollection",l=[];return this.eachLayer(function(h){if(h.toGeoJSON){var p=h.toGeoJSON(t);if(s)l.push(p.geometry);else{var g=zi(p);g.type==="FeatureCollection"?l.push.apply(l,g.features):l.push(g)}}}),s?Ee(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function _s(t,e){return new te(t,e)}var bl=_s,Ni=Ut.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,s){this._url=t,this._bounds=it(e),E(this,s)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(V(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Pe(this._image),this},bringToBack:function(){return this._map&&Le(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=it(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:nt("img");if(V(e,"leaflet-image-layer"),this._zoomAnimated&&V(e,"leaflet-zoom-animated"),this.options.className&&V(e,this.options.className),e.onselectstart=v,e.onmousemove=v,e.onload=c(this.fire,this,"load"),e.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),s=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,s,e)},_reset:function(){var t=this._image,e=new dt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),s=e.getSize();bt(t,e.min),t.style.width=s.x+"px",t.style.height=s.y+"px"},_updateOpacity:function(){Ft(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),wl=function(t,e,s){return new Ni(t,e,s)},gs=Ni.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:nt("video");if(V(e,"leaflet-image-layer"),this._zoomAnimated&&V(e,"leaflet-zoom-animated"),this.options.className&&V(e,this.options.className),e.onselectstart=v,e.onmousemove=v,e.onloadeddata=c(this.fire,this,"load"),t){for(var s=e.getElementsByTagName("source"),l=[],h=0;h<s.length;h++)l.push(s[h].src);this._url=s.length>0?l:[e.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var p=0;p<this._url.length;p++){var g=nt("source");g.src=this._url[p],e.appendChild(g)}}});function xl(t,e,s){return new gs(t,e,s)}var vs=Ni.extend({_initImage:function(){var t=this._image=this._url;V(t,"leaflet-image-layer"),this._zoomAnimated&&V(t,"leaflet-zoom-animated"),this.options.className&&V(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Pl(t,e,s){return new vs(t,e,s)}var Yt=Ut.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,e){E(this,t),this._source=e},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ft(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ft(this._container,1),this.bringToFront(),this.options.interactive&&(V(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ft(this._container,0),this._removeTimeout=setTimeout(c(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pe(this._container),this},bringToBack:function(){return this._map&&Le(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof ke){e=null;var s=this._source._layers;for(var l in s)if(s[l]._map){e=s[l];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=K(this.options.offset),s=this._getAnchor();this._zoomAnimated?bt(this._container,t.add(s)):e=e.add(t).add(s);var l=this._containerBottom=-e.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=l+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});Q.include({_initOverlay:function(t,e,s,l){var h=e;return h instanceof t||(h=new t(l).setContent(e)),s&&h.setLatLng(s),h}}),Ut.include({_initOverlay:function(t,e,s,l){var h=s;return h instanceof t?(E(h,l),h._source=this):(h=e&&!l?e:new t(l,this),h.setContent(s)),h}});var Ii=Yt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Yt.prototype.openOn.call(this,t)},onAdd:function(t){Yt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof se||this._source.on("preclick",pe))},onRemove:function(t){Yt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof se||this._source.off("preclick",pe))},getEvents:function(){var t=Yt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=nt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),s=this._wrapper=nt("div",t+"-content-wrapper",e);if(this._contentNode=nt("div",t+"-content",s),Qe(e),Cn(this._contentNode),q(e,"contextmenu",pe),this._tipContainer=nt("div",t+"-tip-container",e),this._tip=nt("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=nt("a",t+"-close-button",e);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',q(l,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var s=t.offsetWidth;s=Math.min(s,this.options.maxWidth),s=Math.max(s,this.options.minWidth),e.width=s+1+"px",e.whiteSpace="",e.height="";var l=t.offsetHeight,h=this.options.maxHeight,p="leaflet-popup-scrolled";h&&l>h?(e.height=h+"px",V(t,p)):gt(t,p),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),s=this._getAnchor();bt(this._container,e.add(s))},_adjustPan:function(t){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,s=parseInt(Ye(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+s,h=this._containerWidth,p=new F(this._containerLeft,-l-this._containerBottom);p._add(de(this._container));var g=e.layerPointToContainerPoint(p),x=K(this.options.autoPanPadding),T=K(this.options.autoPanPaddingTopLeft||x),O=K(this.options.autoPanPaddingBottomRight||x),H=e.getSize(),X=0,tt=0;g.x+h+O.x>H.x&&(X=g.x+h-H.x+O.x),g.x-X-T.x<0&&(X=g.x-T.x),g.y+l+O.y>H.y&&(tt=g.y+l-H.y+O.y),g.y-tt-T.y<0&&(tt=g.y-T.y),(X||tt)&&e.fire("autopanstart").panBy([X,tt],{animate:t&&t.type==="moveend"})}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ll=function(t,e){return new Ii(t,e)};Q.mergeOptions({closePopupOnClick:!0}),Q.include({openPopup:function(t,e,s){return this._initOverlay(Ii,t,e,s).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ut.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Ii,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){me(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof se)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Di=Yt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Yt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Yt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Yt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=nt("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,s,l=this._map,h=this._container,p=l.latLngToContainerPoint(l.getCenter()),g=l.layerPointToContainerPoint(t),x=this.options.direction,T=h.offsetWidth,O=h.offsetHeight,H=K(this.options.offset),X=this._getAnchor();x==="top"?(e=T/2,s=O):x==="bottom"?(e=T/2,s=0):x==="center"?(e=T/2,s=O/2):x==="right"?(e=0,s=O/2):x==="left"?(e=T,s=O/2):g.x<p.x?(x="right",e=0,s=O/2):(x="left",e=T+(H.x+X.x)*2,s=O/2),t=t.subtract(K(e,s,!0)).add(H).add(X),gt(h,"leaflet-tooltip-right"),gt(h,"leaflet-tooltip-left"),gt(h,"leaflet-tooltip-top"),gt(h,"leaflet-tooltip-bottom"),V(h,"leaflet-tooltip-"+x),bt(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ft(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tl=function(t,e){return new Di(t,e)};Q.include({openTooltip:function(t,e,s){return this._initOverlay(Di,t,e,s).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ut.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Di,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",s={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?s.add=this._openTooltip:(s.mouseover=this._openTooltip,s.mouseout=this.closeTooltip,s.click=this._openTooltip),this._tooltip.options.sticky&&(s.mousemove=this._moveTooltip),this[e](s),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e=t.latlng,s,l;this._tooltip.options.sticky&&t.originalEvent&&(s=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(s),e=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(e)}});var ys=Se.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),s=this.options;if(s.html instanceof Element?(Pi(e),e.appendChild(s.html)):e.innerHTML=s.html!==!1?s.html:"",s.bgPos){var l=K(s.bgPos);e.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function kl(t){return new ys(t)}Se.Default=ii;var ni=Ut.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){E(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),pt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,s=-t(-1/0,1/0),l=0,h=e.length,p;l<h;l++)p=e[l].style.zIndex,e[l]!==this._container&&p&&(s=t(s,+p));isFinite(s)&&(this.options.zIndex=s+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!$.ielt9){Ft(this._container,this.options.opacity);var t=+new Date,e=!1,s=!1;for(var l in this._tiles){var h=this._tiles[l];if(!(!h.current||!h.loaded)){var p=Math.min(1,(t-h.loaded)/200);Ft(h.el,p),p<1?e=!0:(h.active?s=!0:this._onOpaqueTile(h),h.active=!0)}}s&&!this._noPrune&&this._pruneTiles(),e&&(mt(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var s in this._levels)s=Number(s),this._levels[s].el.children.length||s===t?(this._levels[s].el.style.zIndex=e-Math.abs(t-s),this._onUpdateLevel(s)):(pt(this._levels[s].el),this._removeTilesAtZoom(s),this._onRemoveLevel(s),delete this._levels[s]);var l=this._levels[t],h=this._map;return l||(l=this._levels[t]={},l.el=nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=e,l.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,h.getCenter(),h.getZoom()),v(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(!!this._map){var t,e,s=this._map.getZoom();if(s>this.options.maxZoom||s<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var l=e.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)pt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,s,l){var h=Math.floor(t/2),p=Math.floor(e/2),g=s-1,x=new F(+h,+p);x.z=+g;var T=this._tileCoordsToKey(x),O=this._tiles[T];return O&&O.active?(O.retain=!0,!0):(O&&O.loaded&&(O.retain=!0),g>l?this._retainParent(h,p,g,l):!1)},_retainChildren:function(t,e,s,l){for(var h=2*t;h<2*t+2;h++)for(var p=2*e;p<2*e+2;p++){var g=new F(h,p);g.z=s+1;var x=this._tileCoordsToKey(g),T=this._tiles[x];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);s+1<l&&this._retainChildren(h,p,s+1,l)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,s,l){var h=Math.round(e);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var p=this.options.updateWhenZooming&&h!==this._tileZoom;(!l||p)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),s||this._pruneTiles(),this._noPrune=!!s),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var s in this._levels)this._setZoomTransform(this._levels[s],t,e)},_setZoomTransform:function(t,e,s){var l=this._map.getZoomScale(s,t.zoom),h=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(e,s)).round();$.any3d?fe(t.el,h,l):bt(t.el,h)},_resetGrid:function(){var t=this._map,e=t.options.crs,s=this._tileSize=this.getTileSize(),l=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],l).x/s.x),Math.ceil(t.project([0,e.wrapLng[1]],l).x/s.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],l).y/s.x),Math.ceil(t.project([e.wrapLat[1],0],l).y/s.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,s=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),l=e.getZoomScale(s,this._tileZoom),h=e.project(t,this._tileZoom).floor(),p=e.getSize().divideBy(l*2);return new dt(h.subtract(p),h.add(p))},_update:function(t){var e=this._map;if(!!e){var s=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(l),p=h.getCenter(),g=[],x=this.options.keepBuffer,T=new dt(h.getBottomLeft().subtract([x,-x]),h.getTopRight().add([x,-x]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var O in this._tiles){var H=this._tiles[O].coords;(H.z!==this._tileZoom||!T.contains(new F(H.x,H.y)))&&(this._tiles[O].current=!1)}if(Math.abs(s-this._tileZoom)>1){this._setView(t,s);return}for(var X=h.min.y;X<=h.max.y;X++)for(var tt=h.min.x;tt<=h.max.x;tt++){var ie=new F(tt,X);if(ie.z=this._tileZoom,!!this._isValidTile(ie)){var ge=this._tiles[this._tileCoordsToKey(ie)];ge?ge.current=!0:g.push(ie)}}if(g.sort(function(oe,Hn){return oe.distanceTo(p)-Hn.distanceTo(p)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ri=document.createDocumentFragment();for(tt=0;tt<g.length;tt++)this._addTile(g[tt],Ri);this._level.el.appendChild(Ri)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var s=this._globalTileRange;if(!e.wrapLng&&(t.x<s.min.x||t.x>s.max.x)||!e.wrapLat&&(t.y<s.min.y||t.y>s.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return it(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,s=this.getTileSize(),l=t.scaleBy(s),h=l.add(s),p=e.unproject(l,t.z),g=e.unproject(h,t.z);return[p,g]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),s=new R(e[0],e[1]);return this.options.noWrap||(s=this._map.wrapLatLngBounds(s)),s},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),s=new F(+e[0],+e[1]);return s.z=+e[2],s},_removeTile:function(t){var e=this._tiles[t];!e||(pt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){V(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=v,t.onmousemove=v,$.ielt9&&this.options.opacity<1&&Ft(t,this.options.opacity)},_addTile:function(t,e){var s=this._getTilePos(t),l=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&ct(c(this._tileReady,this,t,null,h)),bt(h,s),this._tiles[l]={el:h,coords:t,current:!0},e.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,e,s){e&&this.fire("tileerror",{error:e,tile:s,coords:t});var l=this._tileCoordsToKey(t);s=this._tiles[l],s&&(s.loaded=+new Date,this._map._fadeAnimated?(Ft(s.el,0),mt(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this)):(s.active=!0,this._pruneTiles()),e||(V(s.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:s.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$.ielt9||!this._map._fadeAnimated?ct(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new F(this._wrapX?m(t.x,this._wrapX):t.x,this._wrapY?m(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new dt(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Sl(t){return new ni(t)}var Ae=ni.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=E(this,e),e.detectRetina&&$.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var s=document.createElement("img");return q(s,"load",c(this._tileOnLoad,this,e,s)),q(s,"error",c(this._tileOnError,this,e,s)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(s.referrerPolicy=this.options.referrerPolicy),s.alt="",s.setAttribute("role","presentation"),s.src=this.getTileUrl(t),s},getTileUrl:function(t){var e={r:$.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var s=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=s),e["-y"]=s}return M(this._url,a(e,this.options))},_tileOnLoad:function(t,e){$.ielt9?setTimeout(c(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,s){var l=this.options.errorTileUrl;l&&e.getAttribute("src")!==l&&(e.src=l),t(s,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,s=this.options.zoomReverse,l=this.options.zoomOffset;return s&&(t=e-t),t+l},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=v,e.onerror=v,!e.complete)){e.src=I;var s=this._tiles[t].coords;pt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:s})}},_removeTile:function(t){var e=this._tiles[t];if(!!e)return e.el.setAttribute("src",I),ni.prototype._removeTile.call(this,t)},_tileReady:function(t,e,s){if(!(!this._map||s&&s.getAttribute("src")===I))return ni.prototype._tileReady.call(this,t,e,s)}});function bs(t,e){return new Ae(t,e)}var ws=Ae.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var s=a({},this.defaultWmsParams);for(var l in e)l in this.options||(s[l]=e[l]);e=E(this,e);var h=e.detectRetina&&$.retina?2:1,p=this.getTileSize();s.width=p.x*h,s.height=p.y*h,this.wmsParams=s},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ae.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),s=this._crs,l=Nt(s.project(e[0]),s.project(e[1])),h=l.min,p=l.max,g=(this._wmsVersion>=1.3&&this._crs===ds?[h.y,h.x,p.y,p.x]:[h.x,h.y,p.x,p.y]).join(","),x=Ae.prototype.getTileUrl.call(this,t);return x+A(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(t,e){return a(this.wmsParams,t),e||this.redraw(),this}});function Cl(t,e){return new ws(t,e)}Ae.WMS=ws,bs.wms=Cl;var ee=Ut.extend({options:{padding:.1},initialize:function(t){E(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&V(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var s=this._map.getZoomScale(e,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,e),p=l.multiplyBy(-s).add(h).subtract(this._map._getNewPixelOrigin(t,e));$.any3d?fe(this._container,p,s):bt(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),s=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new dt(s,s.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xs=ee.extend({options:{tolerance:0},getEvents:function(){var t=ee.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ee.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");q(t,"mousemove",this._onMouseMove,this),q(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),q(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){mt(this._redrawRequest),delete this._ctx,pt(this._container),ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ee.prototype._update.call(this);var t=this._bounds,e=this._container,s=t.getSize(),l=$.retina?2:1;bt(e,t.min),e.width=l*s.x,e.height=l*s.y,e.style.width=s.x+"px",e.style.height=s.y+"px",$.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ee.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,s=e.next,l=e.prev;s?s.prev=l:this._drawLast=l,l?l.next=s:this._drawFirst=s,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),s=[],l,h;for(h=0;h<e.length;h++){if(l=Number(e[h]),isNaN(l))return;s.push(l)}t.options._dashArray=s}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ct(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new dt,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var s=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,s.x,s.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(!!this._drawing){var s,l,h,p,g=t._parts,x=g.length,T=this._ctx;if(!!x){for(T.beginPath(),s=0;s<x;s++){for(l=0,h=g[s].length;l<h;l++)p=g[s][l],T[l?"lineTo":"moveTo"](p.x,p.y);e&&T.closePath()}this._fillStroke(T,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,s=this._ctx,l=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||l)/l;h!==1&&(s.save(),s.scale(1,h)),s.beginPath(),s.arc(e.x,e.y/h,l,0,Math.PI*2,!1),h!==1&&s.restore(),this._fillStroke(s,t)}},_fillStroke:function(t,e){var s=e.options;s.fill&&(t.globalAlpha=s.fillOpacity,t.fillStyle=s.fillColor||s.color,t.fill(s.fillRule||"evenodd")),s.stroke&&s.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=s.opacity,t.lineWidth=s.weight,t.strokeStyle=s.color,t.lineCap=s.lineCap,t.lineJoin=s.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),s,l,h=this._drawFirst;h;h=h.next)s=h.layer,s.options.interactive&&s._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(s))&&(l=s);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(gt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var s,l,h=this._drawFirst;h;h=h.next)s=h.layer,s.options.interactive&&s._containsPoint(e)&&(l=s);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(V(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,s){this._map._fireDOMEvent(e,s||e.type,t)},_bringToFront:function(t){var e=t._order;if(!!e){var s=e.next,l=e.prev;if(s)s.prev=l;else return;l?l.next=s:s&&(this._drawFirst=s),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(!!e){var s=e.next,l=e.prev;if(l)l.next=s;else return;s?s.prev=l:l&&(this._drawLast=l),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Ps(t){return $.canvas?new xs(t):null}var ri=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),El={_initContainer:function(){this._container=nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ee.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ri("shape");V(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ri("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;pt(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,s=t._fill,l=t.options,h=t._container;h.stroked=!!l.stroke,h.filled=!!l.fill,l.stroke?(e||(e=t._stroke=ri("stroke")),h.appendChild(e),e.weight=l.weight+"px",e.color=l.color,e.opacity=l.opacity,l.dashArray?e.dashStyle=N(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=l.lineCap.replace("butt","flat"),e.joinstyle=l.lineJoin):e&&(h.removeChild(e),t._stroke=null),l.fill?(s||(s=t._fill=ri("fill")),h.appendChild(s),s.color=l.fillColor||l.color,s.opacity=l.fillOpacity):s&&(h.removeChild(s),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),s=Math.round(t._radius),l=Math.round(t._radiusY||s);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+s+","+l+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Pe(t._container)},_bringToBack:function(t){Le(t._container)}},Bi=$.vml?ri:Ar,si=ee.extend({_initContainer:function(){this._container=Bi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ee.prototype._update.call(this);var t=this._bounds,e=t.getSize(),s=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,s.setAttribute("width",e.x),s.setAttribute("height",e.y)),bt(s,t.min),s.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Bi("path");t.options.className&&V(e,t.options.className),t.options.interactive&&V(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){pt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,s=t.options;!e||(s.stroke?(e.setAttribute("stroke",s.color),e.setAttribute("stroke-opacity",s.opacity),e.setAttribute("stroke-width",s.weight),e.setAttribute("stroke-linecap",s.lineCap),e.setAttribute("stroke-linejoin",s.lineJoin),s.dashArray?e.setAttribute("stroke-dasharray",s.dashArray):e.removeAttribute("stroke-dasharray"),s.dashOffset?e.setAttribute("stroke-dashoffset",s.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),s.fill?(e.setAttribute("fill",s.fillColor||s.color),e.setAttribute("fill-opacity",s.fillOpacity),e.setAttribute("fill-rule",s.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Or(t._parts,e))},_updateCircle:function(t){var e=t._point,s=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||s,h="a"+s+","+l+" 0 1,0 ",p=t._empty()?"M0 0":"M"+(e.x-s)+","+e.y+h+s*2+",0 "+h+-s*2+",0 ";this._setPath(t,p)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Pe(t._path)},_bringToBack:function(t){Le(t._path)}});$.vml&&si.include(El);function Ls(t){return $.svg||$.vml?new si(t):null}Q.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Ps(t)||Ls(t)}});var Ts=Ce.extend({initialize:function(t,e){Ce.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=it(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Al(t,e){return new Ts(t,e)}si.create=Bi,si.pointsToPath=Or,te.geometryToLayer=Dn,te.coordsToLatLng=Bn,te.coordsToLatLngs=Oi,te.latLngToCoords=Rn,te.latLngsToCoords=Mi,te.getFeature=Ee,te.asFeature=zi,Q.mergeOptions({boxZoom:!0});var ks=Vt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){q(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ke(),bn(),this._startPoint=this._map.mouseEventToContainerPoint(t),q(document,{contextmenu:me,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=nt("div","leaflet-zoom-box",this._container),V(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new dt(this._point,this._startPoint),s=e.getSize();bt(this._box,e.min),this._box.style.width=s.x+"px",this._box.style.height=s.y+"px"},_finish:function(){this._moved&&(pt(this._box),gt(this._container,"leaflet-crosshair")),Xe(),wn(),ft(document,{contextmenu:me,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Q.addInitHook("addHandler","boxZoom",ks),Q.mergeOptions({doubleClickZoom:!0});var Ss=Vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,s=e.getZoom(),l=e.options.zoomDelta,h=t.originalEvent.shiftKey?s-l:s+l;e.options.doubleClickZoom==="center"?e.setZoom(h):e.setZoomAround(t.containerPoint,h)}});Q.addInitHook("addHandler","doubleClickZoom",Ss),Q.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cs=Vt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new re(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}V(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=it(this._map.options.maxBounds);this._offsetLimit=Nt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,s=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(s),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),s=this._initialWorldOffset,l=this._draggable._newPos.x,h=(l-e+s)%t+e-s,p=(l+e+s)%t-e-s,g=Math.abs(h+s)<Math.abs(p+s)?h:p;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var e=this._map,s=e.options,l=!s.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),l)e.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1e3,g=s.easeLinearity,x=h.multiplyBy(g/p),T=x.distanceTo([0,0]),O=Math.min(s.inertiaMaxSpeed,T),H=x.multiplyBy(O/T),X=O/(s.inertiaDeceleration*g),tt=H.multiplyBy(-X/2).round();!tt.x&&!tt.y?e.fire("moveend"):(tt=e._limitOffset(tt,e.options.maxBounds),ct(function(){e.panBy(tt,{duration:X,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});Q.addInitHook("addHandler","dragging",Cs),Q.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Es=Vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),q(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,s=t.scrollTop||e.scrollTop,l=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(l,s)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},s=this.keyCodes,l,h;for(l=0,h=s.left.length;l<h;l++)e[s.left[l]]=[-1*t,0];for(l=0,h=s.right.length;l<h;l++)e[s.right[l]]=[t,0];for(l=0,h=s.down.length;l<h;l++)e[s.down[l]]=[0,t];for(l=0,h=s.up.length;l<h;l++)e[s.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},s=this.keyCodes,l,h;for(l=0,h=s.zoomIn.length;l<h;l++)e[s.zoomIn[l]]=t;for(l=0,h=s.zoomOut.length;l<h;l++)e[s.zoomOut[l]]=-t},_addHooks:function(){q(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,s=this._map,l;if(e in this._panKeys)(!s._panAnim||!s._panAnim._inProgress)&&(l=this._panKeys[e],t.shiftKey&&(l=K(l).multiplyBy(3)),s.panBy(l),s.options.maxBounds&&s.panInsideBounds(s.options.maxBounds));else if(e in this._zoomKeys)s.setZoom(s.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&s._popup&&s._popup.options.closeOnEscapeKey)s.closePopup();else return;me(t)}}});Q.addInitHook("addHandler","keyboard",Es),Q.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var As=Vt.extend({addHooks:function(){q(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=is(t),s=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(s-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),l),me(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),s=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,p=s?Math.ceil(h/s)*s:h,g=t._limitZoom(e+(this._delta>0?p:-p))-e;this._delta=0,this._startTime=null,g&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+g):t.setZoomAround(this._lastMousePos,e+g))}});Q.addInitHook("addHandler","scrollWheelZoom",As);var Ol=600;Q.mergeOptions({tapHold:$.touchNative&&$.safari&&$.mobile,tapTolerance:15});var Os=Vt.extend({addHooks:function(){q(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new F(e.clientX,e.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(q(document,"touchend",Ot),q(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Ol),q(document,"touchend touchcancel contextmenu",this._cancel,this),q(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ft(document,"touchend",Ot),ft(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new F(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var s=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});s._simulated=!0,e.target.dispatchEvent(s)}});Q.addInitHook("addHandler","tapHold",Os),Q.mergeOptions({touchZoom:$.touch,bounceAtZoomLimits:!0});var Ms=Vt.extend({addHooks:function(){V(this._map._container,"leaflet-touch-zoom"),q(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var s=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(s.add(l)._divideBy(2))),this._startDist=s.distanceTo(l),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),q(document,"touchmove",this._onTouchMove,this),q(document,"touchend touchcancel",this._onTouchEnd,this),Ot(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,s=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]),h=s.distanceTo(l)/this._startDist;if(this._zoom=e.getScaleZoom(h,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&h<1||this._zoom>e.getMaxZoom()&&h>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var p=s._add(l)._divideBy(2)._subtract(this._centerPoint);if(h===1&&p.x===0&&p.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),mt(this._animRequest);var g=c(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=ct(g,this,!0),Ot(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,mt(this._animRequest),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Q.addInitHook("addHandler","touchZoom",Ms),Q.BoxZoom=ks,Q.DoubleClickZoom=Ss,Q.Drag=Cs,Q.Keyboard=Es,Q.ScrollWheelZoom=As,Q.TapHold=Os,Q.TouchZoom=Ms,n.Bounds=dt,n.Browser=$,n.CRS=It,n.Canvas=xs,n.Circle=In,n.CircleMarker=Ai,n.Class=J,n.Control=jt,n.DivIcon=ys,n.DivOverlay=Yt,n.DomEvent=Ya,n.DomUtil=qa,n.Draggable=re,n.Evented=yt,n.FeatureGroup=ke,n.GeoJSON=te,n.GridLayer=ni,n.Handler=Vt,n.Icon=Se,n.ImageOverlay=Ni,n.LatLng=Y,n.LatLngBounds=R,n.Layer=Ut,n.LayerGroup=Te,n.LineUtil=al,n.Map=Q,n.Marker=Ei,n.Mixin=il,n.Path=se,n.Point=F,n.PolyUtil=ll,n.Polygon=Ce,n.Polyline=Qt,n.Popup=Ii,n.PosAnimation=ns,n.Projection=ul,n.Rectangle=Ts,n.Renderer=ee,n.SVG=si,n.SVGOverlay=vs,n.TileLayer=Ae,n.Tooltip=Di,n.Transformation=ln,n.Util=_t,n.VideoOverlay=gs,n.bind=c,n.bounds=Nt,n.canvas=Ps,n.circle=gl,n.circleMarker=_l,n.control=ti,n.divIcon=kl,n.extend=a,n.featureGroup=dl,n.geoJSON=_s,n.geoJson=bl,n.gridLayer=Sl,n.icon=pl,n.imageOverlay=wl,n.latLng=j,n.latLngBounds=it,n.layerGroup=fl,n.map=Ka,n.marker=ml,n.point=K,n.polygon=yl,n.polyline=vl,n.popup=Ll,n.rectangle=Al,n.setOptions=E,n.stamp=d,n.svg=Ls,n.svgOverlay=Pl,n.tileLayer=bs,n.tooltip=Tl,n.transformation=Ge,n.version=o,n.videoOverlay=xl;var Ml=window.L;n.noConflict=function(){return window.L=Ml,this},window.L=n})})($t,$t.exports);class Yh{constructor(i,n,o=""){Oe(this,"imap",{});Oe(this,"control",{});Oe(this,"overlays",{});Oe(this,"baseLayers",{Terrain:$t.exports.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}),Satellite:$t.exports.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})});let a=this.baseLayers.Terrain;o&&(a=this.baseLayers[o]),this.imap=$t.exports.map(i,{center:[n.location.lat,n.location.lng],zoom:n.zoom,minZoom:n.minZoom,zoomControl:!1,layers:[a]})}addLayer(i,n){this.overlays[i]=n,this.imap.addLayer(n)}addLayerGroup(i){this.overlays[i]=$t.exports.layerGroup([]),this.imap.addLayer(this.overlays[i])}showLayerControl(){this.control=$t.exports.control.layers(this.baseLayers,this.overlays).addTo(this.imap)}showZoomControl(i="bottomright"){$t.exports.control.zoom({position:i}).addTo(this.imap)}moveTo(i,n){this.imap.setZoom(i),this.imap.panTo(new $t.exports.LatLng(n.lat,n.lng))}zoomTo(i){this.imap.setView(new $t.exports.LatLng(i.lat,i.lng),8)}addMarker(i,n="",o="default"){let a={},u=$t.exports.marker([i.lat,i.lng]);if(n){var c=$t.exports.popup({maxWidth:500,minWidth:500,maxHeight:350,closeButton:!1});c.setContent(n),c.update(),u.bindPopup(c)}this.overlays[o]?a=this.overlays[o]:(a=$t.exports.layerGroup([]),this.overlays[o]=a,this.imap.addLayer(a)),u.addTo(a)}invalidateSize(){this.imap.invalidateSize(),this.imap._onResize()}}function Kh(r,i,n){const o=be("DonationService"),a={location:{lat:48.70956025245414,lng:2.1667407013069417},zoom:8,minZoom:1};let u=null;gi(async()=>{u=new Yh("donation-map",a),u.showZoomControl(),u.addLayerGroup("Engineering School"),u.addLayerGroup("Faculty"),u.showLayerControl(),(await o.getDonations()).forEach(d=>{c(d)})});function c(f){const d=f.image.replaceAll(" h","><img src=h"),_=`<br><h1><b>${f.candidate.firstName} | ${f.candidate.lastName} | Students: ${f.amount.toString()}</b></h1><br><img src=${d}><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>`;u.addMarker({lat:f.lat,lng:f.lng},_,f.method),u.moveTo(11,{lat:f.lat,lng:f.lng})}return[c]}class ia extends St{constructor(i){super(),kt(this,i,Kh,null,Lt,{addDonationMarker:0})}get addDonationMarker(){return this.$$.ctx[0]}}function Xh(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A,P,M;o=new we({props:{subTitle:"Please add a Location",title:"Schools of University of Paris-Saclay"}}),c=new on({});let N={};return y=new ia({props:N}),r[2](y),P=new Vh({}),P.$on("message",r[1]),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),d=S("div"),_=S("div"),m=S("div"),v=Z(),ht(y.$$.fragment),k=Z(),C=S("div"),E=S("h1"),E.textContent="Here you can add the missing Schools of University of Paris-Saclay",A=Z(),ht(P.$$.fragment),b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered"),b(m,"class","box"),b(m,"id","secondary-map"),cr(m,"height","400px"),b(_,"class","column has-text-centered"),b(E,"class","title is-4"),b(C,"class","column box has-text-centered"),b(d,"class","columns is-vcentered")},m(z,I){W(z,i,I),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(z,f,I),W(z,d,I),w(d,_),w(_,m),w(_,v),lt(y,_,null),w(d,k),w(d,C),w(C,E),w(C,A),lt(P,C,null),M=!0},p(z,[I]){const B={};y.$set(B)},i(z){M||(rt(o.$$.fragment,z),rt(c.$$.fragment,z),rt(y.$$.fragment,z),rt(P.$$.fragment,z),M=!0)},o(z){ot(o.$$.fragment,z),ot(c.$$.fragment,z),ot(y.$$.fragment,z),ot(P.$$.fragment,z),M=!1},d(z){z&&U(i),ut(o),ut(c),z&&U(f),z&&U(d),r[2](null),ut(y),ut(P)}}}function Jh(r,i,n){let o=null;function a(c){o.addDonationMarker(c.detail.donation)}function u(c){$e[c?"unshift":"push"](()=>{o=c,n(0,o)})}return[o,a,u]}class Qh extends St{constructor(i){super(),kt(this,i,Jh,Xh,Lt,{})}}function tc(r){let i,n,o,a,u,c,f,d,_;return o=new we({props:{subTitle:"Map",title:"Schools of University of Paris-Saclay"}}),c=new on({}),d=new ia({}),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),ht(d.$$.fragment),b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered")},m(m,v){W(m,i,v),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(m,f,v),lt(d,m,v),_=!0},p:et,i(m){_||(rt(o.$$.fragment,m),rt(c.$$.fragment,m),rt(d.$$.fragment,m),_=!0)},o(m){ot(o.$$.fragment,m),ot(c.$$.fragment,m),ot(d.$$.fragment,m),_=!1},d(m){m&&U(i),ut(o),ut(c),m&&U(f),ut(d,m)}}}class ec extends St{constructor(i){super(),kt(this,i,null,tc,Lt,{})}}function ic(r,i){i===void 0&&(i={});var n=i.insertAt;if(r&&typeof document!="undefined"){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r))}}function le(r,i){return typeof r=="string"?(i||document).querySelector(r):r||null}function pi(r){var i=r.getBoundingClientRect();return{top:i.top+(document.documentElement.scrollTop||document.body.scrollTop),left:i.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function nc(r){return r.offsetParent===null}function rc(r){var i=r.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}function sc(r){var i=window.getComputedStyle(r),n=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight);return r.clientWidth-n}function oc(r,i,n){var o=document.createEvent("HTMLEvents");o.initEvent(i,!0,!0);for(var a in n)o[a]=n[a];return r.dispatchEvent(o)}function Xi(r){return r.titleHeight+r.margins.top+r.paddings.top}function Yi(r){return r.margins.left+r.paddings.left}function na(r){return r.margins.top+r.margins.bottom+r.paddings.top+r.paddings.bottom+r.titleHeight+r.legendHeight}function Ji(r){return r.margins.left+r.margins.right+r.paddings.left+r.paddings.right}function ac(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function ra(r){return parseFloat(r.toFixed(2))}function or(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];n||(n=o?r[0]:r[r.length-1]);var a=new Array(Math.abs(i)).fill(n);return r=o?a.concat(r):r.concat(a)}function sa(r,i){return(r+"").length*i}function Ze(r,i){return{x:Math.sin(r*yo)*i,y:Math.cos(r*yo)*i}}function Re(r){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!Number.isNaN(r)&&r!==void 0&&!!Number.isFinite(r)&&!(i&&r<0)}function lc(r){return Number(Math.round(r+"e4")+"e-4")}function oa(r){var i=void 0,n=void 0,o=void 0;if(r instanceof Date)return new Date(r.getTime());if((r===void 0?"undefined":jf(r))!=="object"||r===null)return r;i=Array.isArray(r)?[]:{};for(o in r)n=r[o],i[o]=oa(n);return i}function aa(r,i){var n=void 0,o=void 0;return r<=i?(n=i-r,o=r):(n=r-i,o=i),[n,o]}function Zt(r,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.length-r.length;return n>0?r=or(r,n):i=or(i,n),[r,i]}function Lr(r,i){if(r)return r.length>i?r.slice(0,i-3)+"...":r}function uc(r){var i=void 0;if(typeof r=="number")i=r;else if(typeof r=="string"&&(i=Number(r),Number.isNaN(i)))return r;var n=Math.floor(Math.log10(Math.abs(i)));if(n<=2)return i;var o=Math.floor(n/3),a=Math.pow(10,n-3*o)*+(i/Math.pow(10,n)).toFixed(1);return Math.round(100*a)/100+" "+["","K","M","B","T"][o]}function la(r,i){for(var n=[],o=0;o<r.length;o++)n.push([r[o],i[o]]);var a=function(c,f){var d=f[0]-c[0],_=f[1]-c[1];return{length:Math.sqrt(Math.pow(d,2)+Math.pow(_,2)),angle:Math.atan2(_,d)}},u=function(c,f,d,_){var m=a(f||c,d||c),v=m.angle+(_?Math.PI:0),y=.2*m.length;return[c[0]+Math.cos(v)*y,c[1]+Math.sin(v)*y]};return function(c,f){return c.reduce(function(d,_,m,v){return m===0?_[0]+","+_[1]:d+" "+f(_,m,v)},"")}(n,function(c,f,d){var _=u(d[f-1],d[f-2],c),m=u(c,d[f-1],d[f+1],!0);return"C "+_[0]+","+_[1]+" "+m[0]+","+m[1]+" "+c[0]+","+c[1]})}function Vn(r){return r>255?255:r<0?0:r}function Tr(r,i){var n=_a(r),o=!1;n[0]=="#"&&(n=n.slice(1),o=!0);var a=parseInt(n,16),u=Vn((a>>16)+i),c=Vn((a>>8&255)+i),f=Vn((255&a)+i);return(o?"#":"")+(f|c<<8|u<<16).toString(16)}function hc(r){var i=/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i;return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(r)||i.test(r)}function ho(r,i){return typeof r=="string"?(i||document).querySelector(r):r||null}function st(r,i){var n=document.createElementNS("http://www.w3.org/2000/svg",r);for(var o in i){var a=i[o];if(o==="inside")ho(a).appendChild(n);else if(o==="around"){var u=ho(a);u.parentNode.insertBefore(n,u),n.appendChild(u)}else o==="styles"?(a===void 0?"undefined":Gf(a))==="object"&&Object.keys(a).map(function(c){n.style[c]=a[c]}):(o==="className"&&(o="class"),o==="innerHTML"?n.textContent=a:n.setAttribute(o,a))}return n}function cc(r,i){return st("linearGradient",{inside:r,id:i,x1:0,x2:0,y1:0,y2:1})}function Yn(r,i,n,o){return st("stop",{inside:r,style:"stop-color: "+n,offset:i,"stop-opacity":o})}function fc(r,i,n,o){return st("svg",{className:i,inside:r,width:n,height:o})}function dc(r){return st("defs",{inside:r})}function ar(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,o={className:r,transform:i};return n&&(o.inside=n),st("g",o)}function Qi(r){return st("path",{className:arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d:r,styles:{stroke:arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none",fill:arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none","stroke-width":arguments.length>4&&arguments[4]!==void 0?arguments[4]:2}})}function pc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=n.x+r.x,f=n.y+r.y,d=n.x+i.x,_=n.y+i.y;return"M"+n.x+" "+n.y+`
		L`+c+" "+f+`
		A `+o+" "+o+" 0 "+u+" "+(a?1:0)+`
		`+d+" "+_+" z"}function mc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=n.x+r.x,f=n.y+r.y,d=n.x+i.x,_=2*n.y,m=n.y+i.y;return"M"+n.x+" "+n.y+`
		L`+c+" "+f+`
		A `+o+" "+o+" 0 "+u+" "+(a?1:0)+`
		`+d+" "+_+` z
		L`+c+" "+_+`
		A `+o+" "+o+" 0 "+u+" "+(a?1:0)+`
		`+d+" "+m+" z"}function _c(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=n.x+r.x,f=n.y+r.y,d=n.x+i.x,_=n.y+i.y;return"M"+c+" "+f+`
		A `+o+" "+o+" 0 "+u+" "+(a?1:0)+`
		`+d+" "+_}function gc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=n.x+r.x,f=n.y+r.y,d=n.x+i.x,_=2*o+f,m=n.y+r.y;return"M"+c+" "+f+`
		A `+o+" "+o+" 0 "+u+" "+(a?1:0)+`
		`+d+" "+_+`
		M`+c+" "+_+`
		A `+o+" "+o+" 0 "+u+" "+(a?1:0)+`
		`+d+" "+m}function co(r,i){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o="path-fill-gradient-"+i+"-"+(n?"lighter":"default"),a=cc(r,o),u=[1,.6,.2];return n&&(u=[.4,.2,0]),Yn(a,"0%",i,u[0]),Yn(a,"50%",i,u[1]),Yn(a,"100%",i,u[2]),o}function vc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pa,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none";return st("rect",{className:"percentage-bar",x:r,y:i,width:n,height:o,fill:u,styles:{stroke:Tr(u,-25),"stroke-dasharray":"0, "+(o+n)+", "+n+", "+o,"stroke-width":a}})}function ua(r,i,n,o,a){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},f={className:r,x:i,y:n,width:o,height:o,rx:a,fill:u};return Object.keys(c).map(function(d){f[d]=c[d]}),st("rect",f)}function yc(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",a=arguments[4];a=arguments.length>5&&arguments[5]!==void 0&&arguments[5]?Lr(a,ga):a;var u={className:"legend-bar",x:0,y:0,width:n,height:"2px",fill:o},c=st("text",{className:"legend-dataset-text",x:0,y:0,dy:2*Tt+"px","font-size":1.2*Tt+"px","text-anchor":"start",fill:kr,innerHTML:a}),f=st("g",{transform:"translate("+r+", "+i+")"});return f.appendChild(st("rect",u)),f.appendChild(c),f}function bc(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",a=arguments[4];a=arguments.length>5&&arguments[5]!==void 0&&arguments[5]?Lr(a,ga):a;var u={className:"legend-dot",cx:0,cy:0,r:n,fill:o},c=st("text",{className:"legend-dataset-text",x:0,y:0,dx:Tt+"px",dy:Tt/3+"px","font-size":1.2*Tt+"px","text-anchor":"start",fill:kr,innerHTML:a}),f=st("g",{transform:"translate("+r+", "+i+")"});return f.appendChild(st("circle",u)),f.appendChild(c),f}function fi(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},u=a.fontSize||Tt;return st("text",{className:r,x:i,y:n,dy:(a.dy!==void 0?a.dy:u/2)+"px","font-size":u+"px",fill:a.fill||kr,"text-anchor":a.textAnchor||"start",innerHTML:o})}function wc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};a.stroke||(a.stroke=We);var u=st("line",{className:"line-vertical "+a.className,x1:0,x2:0,y1:n,y2:o,styles:{stroke:a.stroke}}),c=st("text",{x:0,y:n>o?n+ue:n-ue-Tt,dy:Tt+"px","font-size":Tt+"px","text-anchor":"middle",innerHTML:i+""}),f=st("g",{transform:"translate("+r+", 0)"});return f.appendChild(u),f.appendChild(c),f}function ha(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};a.stroke||(a.stroke=We),a.lineType||(a.lineType=""),a.shortenNumbers&&(i=uc(i));var u=st("line",{className:"line-horizontal "+a.className+(a.lineType==="dashed"?"dashed":""),x1:n,x2:o,y1:0,y2:0,styles:{stroke:a.stroke}}),c=st("text",{x:n<o?n-ue:n+ue,y:0,dy:Tt/2-2+"px","font-size":Tt+"px","text-anchor":n<o?"end":"start",innerHTML:i+""}),f=st("g",{transform:"translate(0, "+r+")","stroke-opacity":1});return c!==0&&c!=="0"||(f.style.stroke="rgba(27, 31, 35, 0.6)"),f.appendChild(u),f.appendChild(c),f}function xc(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Re(r)||(r=0),o.pos||(o.pos="left"),o.offset||(o.offset=0),o.mode||(o.mode="span"),o.stroke||(o.stroke=We),o.className||(o.className="");var a=-1*He,u=o.mode==="span"?n+He:0;return o.mode==="tick"&&o.pos==="right"&&(a=n+He,u=n),a+=o.offset,u+=o.offset,ha(r,i,a,u,{stroke:o.stroke,className:o.className,lineType:o.lineType,shortenNumbers:o.shortenNumbers})}function Pc(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Re(r)||(r=0),o.pos||(o.pos="bottom"),o.offset||(o.offset=0),o.mode||(o.mode="span"),o.stroke||(o.stroke=We),o.className||(o.className="");var a=n+He,u=o.mode==="span"?-1*He:n;return o.mode==="tick"&&o.pos==="top"&&(a=-1*He,u=0),wc(r,i,a,u,{stroke:o.stroke,className:o.className,lineType:o.lineType})}function Lc(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};o.labelPos||(o.labelPos="right");var a=st("text",{className:"chart-label",x:o.labelPos==="left"?ue:n-sa(i,5)-ue,y:0,dy:Tt/-2+"px","font-size":Tt+"px","text-anchor":"start",innerHTML:i+""}),u=ha(r,"",0,n,{stroke:o.stroke||We,className:o.className||"",lineType:o.lineType});return u.appendChild(a),u}function Tc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},u=r-i,c=st("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:We,"stroke-dasharray":n+", "+u},x:0,y:0,width:n,height:u});a.labelPos||(a.labelPos="right");var f=st("text",{className:"chart-label",x:a.labelPos==="left"?ue:n-sa(o+"",4.5)-ue,y:0,dy:Tt/-2+"px","font-size":Tt+"px","text-anchor":"start",innerHTML:o+""}),d=st("g",{transform:"translate(0, "+i+")"});return d.appendChild(c),d.appendChild(f),d}function kc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},d=aa(i,f.zeroLine),_=Wf(d,2),m=_[0],v=_[1];v-=c,m===0&&(m=f.minHeight,v-=f.minHeight),Re(r)||(r=0),Re(v)||(v=0),Re(m,!0)||(m=0),Re(n,!0)||(n=0);var y=st("rect",{className:"bar mini",style:"fill: "+o,"data-point-index":u,x:r,y:v,width:n,height:m});if((a+="")||a.length){y.setAttribute("y",0),y.setAttribute("x",0);var k=st("text",{className:"data-point-value",x:n/2,y:0,dy:Tt/2*-1+"px","font-size":Tt+"px","text-anchor":"middle",innerHTML:a}),C=st("g",{"data-point-index":u,transform:"translate("+r+", "+v+")"});return C.appendChild(y),C.appendChild(k),C}return y}function Sc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=st("circle",{style:"fill: "+o,"data-point-index":u,cx:r,cy:i,r:n});if((a+="")||a.length){c.setAttribute("cy",0),c.setAttribute("cx",0);var f=st("text",{className:"data-point-value",x:0,y:0,dy:Tt/2*-1-n+"px","font-size":Tt+"px","text-anchor":"middle",innerHTML:a}),d=st("g",{"data-point-index":u,transform:"translate("+r+", "+i+")"});return d.appendChild(c),d.appendChild(f),d}return c}function Cc(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},u=i.map(function(v,y){return r[y]+","+v}).join("L");o.spline&&(u=la(r,i));var c=Qi("M"+u,"line-graph-path",n);if(o.heatline){var f=co(a.svgDefs,n);c.style.stroke="url(#"+f+")"}var d={path:c};if(o.regionFill){var _=co(a.svgDefs,n,!0),m="M"+r[0]+","+a.zeroLine+"L"+u+"L"+r.slice(-1)[0]+","+a.zeroLine;d.region=Qi(m,"region-fill","none","url(#"+_+")")}return d}function yi(r,i,n,o){var a=typeof i=="string"?i:i.join(", ");return[r,{transform:n.join(", ")},o,he,"translate",{transform:a}]}function Ec(r,i,n){return yi(r,[n,0],[i,0],je)}function fo(r,i,n){return yi(r,[0,n],[0,i],je)}function Ac(r,i,n,o){var a=i-n,u=r.childNodes[0];return[[u,{height:a,"stroke-dasharray":u.getAttribute("width")+", "+a},je,he],yi(r,[0,o],[0,n],je)]}function Oc(r,i,n,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u=aa(n,(arguments.length>5&&arguments[5]!==void 0?arguments[5]:{}).zeroLine),c=Yf(u,2),f=c[0],d=c[1];return d-=a,r.nodeName!=="rect"?[[r.childNodes[0],{width:o,height:f},mi,he],yi(r,r.getAttribute("transform").split("(")[1].slice(0,-1),[i,d],je)]:[[r,{width:o,height:f,x:i,y:d},mi,he]]}function Mc(r,i,n){return r.nodeName!=="circle"?[yi(r,r.getAttribute("transform").split("(")[1].slice(0,-1),[i,n],je)]:[[r,{cx:i,cy:n},mi,he]]}function zc(r,i,n,o,a){var u=[],c=n.map(function(v,y){return i[y]+","+v}).join("L");a&&(c=la(i,n));var f=[r.path,{d:"M"+c},bo,he];if(u.push(f),r.region){var d=i[0]+","+o+"L",_="L"+i.slice(-1)[0]+", "+o,m=[r.region,{d:"M"+d+c+_},bo,he];u.push(m)}return u}function po(r,i){return[r,{d:i},mi,he]}function Nc(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function Ic(r,i,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"linear",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=r.cloneNode(!0),f=r.cloneNode(!0);for(var d in i){var _=void 0;_=d==="transform"?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var m=u[d]||r.getAttribute(d),v=i[d],y={attributeName:d,from:m,to:v,begin:"0s",dur:n/1e3+"s",values:m+";"+v,keySplines:Jf[o],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};a&&(y.type=a);for(var k in y)_.setAttribute(k,y[k]);c.appendChild(_),a?f.setAttribute(d,"translate("+v+")"):f.setAttribute(d,v)}return[c,f]}function tn(r,i){r.style.transform=i,r.style.webkitTransform=i,r.style.msTransform=i,r.style.mozTransform=i,r.style.oTransform=i}function Dc(r,i){var n=[],o=[];i.map(function(u){var c=u[0],f=c.parentNode,d=void 0,_=void 0;u[0]=c;var m=Ic.apply(void 0,Nc(u)),v=Xf(m,2);d=v[0],_=v[1],n.push(_),o.push([d,f]),f&&f.replaceChild(d,c)});var a=r.cloneNode(!0);return o.map(function(u,c){u[1]&&(u[1].replaceChild(n[c],u[0]),i[c][0]=n[c])}),a}function Bc(r,i,n){if(n.length!==0){var o=Dc(i,n);i.parentNode==r&&(r.removeChild(i),r.appendChild(o)),setTimeout(function(){o.parentNode==r&&(r.removeChild(o),r.appendChild(i))},Kf)}}function Rc(r,i){var n=document.createElement("a");n.style="display: none";var o=new Blob(i,{type:"image/svg+xml; charset=utf-8"}),a=window.URL.createObjectURL(o);n.href=a,n.download=r,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)},300)}function Zc(r){var i=r.cloneNode(!0);i.classList.add("chart-container"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var n=le.create("style",{innerHTML:Qf});i.insertBefore(n,i.firstChild);var o=le.create("div");return o.appendChild(i),o.innerHTML}function Hc(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function $c(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function Fc(r,i){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||typeof i!="object"&&typeof i!="function"?r:i}function jc(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i)}function mo(r){var i=new Date(r);return i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i}function Kn(r){var i=r.getDate(),n=r.getMonth()+1;return[r.getFullYear(),(n>9?"":"0")+n,(i>9?"":"0")+i].join("-")}function ve(r){return new Date(r.getTime())}function Xn(r,i){var n=fa(r);return Math.ceil(Uc(n,i)/hi)}function Uc(r,i){var n=nd*va;return(mo(i)-mo(r))/n}function Wc(r,i){return r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear()}function ca(r){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=rd[r];return i?n.slice(0,3):n}function _o(r,i){return new Date(i,r+1,0)}function fa(r){var i=ve(r),n=i.getDay();return n!==0&&De(i,-1*n),i}function De(r,i){r.setDate(r.getDate()+i)}function Gc(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function bi(r,i,n){var o=Object.keys(xo).filter(function(u){return r.includes(u)}),a=xo[o[0]];return Object.assign(a,{constants:i,getData:n}),new ad(a)}function qc(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function Vc(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function Yc(r,i){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||typeof i!="object"&&typeof i!="function"?r:i}function Kc(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i)}function Xc(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function Jc(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function Qc(r,i){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||typeof i!="object"&&typeof i!="function"?r:i}function tf(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i)}function lr(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function ui(r){if(r===0)return[0,0];if(isNaN(r))return{mantissa:-6755399441055744,exponent:972};var i=r>0?1:-1;if(!isFinite(r))return{mantissa:4503599627370496*i,exponent:972};r=Math.abs(r);var n=Math.floor(Math.log10(r));return[i*(r/Math.pow(10,n)),n]}function ef(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=Math.ceil(r),o=Math.floor(i),a=n-o,u=a,c=1;a>5&&(a%2!=0&&(a=++n-o),u=a/2,c=2),a<=2&&(c=a/(u=4)),a===0&&(u=5,c=1);for(var f=[],d=0;d<=u;d++)f.push(o+c*d);return f}function oi(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=ui(r),o=dd(n,2),a=o[0],u=o[1],c=i?i/Math.pow(10,u):0,f=ef(a=a.toFixed(6),c);return f=f.map(function(d){return d*Math.pow(10,u)})}function nf(r){function i(_,m){for(var v=oi(_),y=v[1]-v[0],k=0,C=1;k<m;C++)k+=y,v.unshift(-1*k);return v}var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=Math.max.apply(Math,lr(r)),a=Math.min.apply(Math,lr(r)),u=[];if(o>=0&&a>=0)ui(o)[1],u=n?oi(o,a):oi(o);else if(o>0&&a<0){var c=Math.abs(a);o>=c?(ui(o)[1],u=i(o,c)):(ui(c)[1],u=i(c,o).reverse().map(function(_){return-1*_}))}else if(o<=0&&a<=0){var f=Math.abs(a),d=Math.abs(o);ui(f)[1],u=(u=n?oi(f,d):oi(f)).reverse().map(function(_){return-1*_})}return u}function rf(r){var i=da(r);return r.indexOf(0)>=0?r.indexOf(0):r[0]>0?-1*r[0]/i:-1*r[r.length-1]/i+(r.length-1)}function da(r){return r[1]-r[0]}function sf(r){return r[r.length-1]-r[0]}function ji(r,i){return ra(i.zeroLine-r*i.scaleMultiplier)}function of(r,i){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=i.reduce(function(a,u){return Math.abs(u-r)<Math.abs(a-r)?u:a},[]);return n?i.indexOf(o):o}function af(r,i){for(var n=Math.max.apply(Math,lr(r)),o=1/(i-1),a=[],u=0;u<i;u++){var c=n*(o*u);a.push(c)}return a}function lf(r,i){return i.filter(function(n){return n<r}).length}function uf(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function hf(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function cf(r,i){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||typeof i!="object"&&typeof i!="function"?r:i}function ff(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i)}function df(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function pf(r,i){r.labels=r.labels||[];var n=r.labels.length,o=r.datasets,a=new Array(n).fill(0);return o||(o=[{values:a}]),o.map(function(u){if(u.values){var c=u.values;c=(c=c.map(function(f){return isNaN(f)?0:f})).length>n?c.slice(0,n):or(c,n-c.length,0),u.values=c}else u.values=a;u.chartType||(u.chartType=i)}),r.yRegions&&r.yRegions.map(function(u){if(u.end<u.start){var c=[u.end,u.start];u.start=c[0],u.end=c[1]}}),r}function mf(r){var i=r.labels.length,n=new Array(i).fill(0),o={labels:r.labels.slice(0,-1),datasets:r.datasets.map(function(a){return{name:"",values:n.slice(0,-1),chartType:a.chartType}})};return r.yMarkers&&(o.yMarkers=[{value:0,label:""}]),r.yRegions&&(o.yRegions=[{start:0,end:0,label:""}]),o}function _f(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=r/i.length;o<=0&&(o=1);var a=o/Bf,u=void 0;if(n){var c=Math.max.apply(Math,df(i.map(function(f){return f.length})));u=Math.ceil(c/a)}return i.map(function(f,d){return(f+="").length>a&&(n?d%u!=0&&(f=""):f=a-3>0?f.slice(0,a-3)+" ...":f.slice(0,a)+".."),f})}function go(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function gf(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function vf(r,i){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||typeof i!="object"&&typeof i!="function"?r:i}function yf(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i)}function bf(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function wf(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function xf(r,i){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||typeof i!="object"&&typeof i!="function"?r:i}function Pf(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i)}function Lf(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function Tf(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"line",i=arguments[1],n=arguments[2];return r==="axis-mixed"?(n.type="line",new ur(i,n)):To[r]?new To[r](i,n):void console.error("Undefined chart type: "+r)}var kf='.chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ol,.graph-svg-tip ul{padding-left:0;display:-webkit-box;display:-ms-flexbox;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;-webkit-box-flex:1;-ms-flex:1;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}';ic(kf);var Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};le.create=function(r,i){var n=document.createElement(r);for(var o in i){var a=i[o];if(o==="inside")le(a).appendChild(n);else if(o==="around"){var u=le(a);u.parentNode.insertBefore(n,u),n.appendChild(u)}else o==="styles"?(a===void 0?"undefined":Sf(a))==="object"&&Object.keys(a).map(function(c){n.style[c]=a[c]}):o in n?n[o]=a:n.setAttribute(o,a)}return n};var Cf={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12},Ef=700,Af=400,Of=100,Mf=.5,zf=0,Nf=4,vo=4,If=20,pa=2,Jn=5,Be=10,Df=2,Bf=7,Rf=5,ai=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey"],Zf=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],Hf={bar:ai,line:ai,pie:ai,percentage:ai,heatmap:Zf,donut:ai},yo=Math.PI/180,ma=360,$f=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),Ff=function(){function r(i){var n=i.parent,o=n===void 0?null:n,a=i.colors,u=a===void 0?[]:a;ac(this,r),this.parent=o,this.colors=u,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return $f(r,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var i=this;this.container=le.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:`<span class="title"></span>
				<ul class="data-point-list"></ul>
				<div class="svg-pointer"></div>`}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){i.hideTip()})}},{key:"fill",value:function(){var i=this,n=void 0;this.index&&this.container.setAttribute("data-point-index",this.index),n=this.titleValueFirst?"<strong>"+this.titleValue+"</strong>"+this.titleName:this.titleName+"<strong>"+this.titleValue+"</strong>",this.title.innerHTML=n,this.dataPointList.innerHTML="",this.listValues.map(function(o,a){var u=i.colors[a]||"black",c=o.formatted===0||o.formatted?o.formatted:o.value,f=le.create("li",{styles:{"border-top":"3px solid "+u},innerHTML:'<strong style="display: block;">'+(c===0||c?c:"")+`</strong>
					`+(o.title?o.title:"")});i.dataPointList.appendChild(f)})}},{key:"calcPosition",value:function(){var i=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-Rf,this.left=this.x-i/2;var n=this.parent.offsetWidth-i,o=this.container.querySelector(".svg-pointer");if(this.left<0)o.style.left="calc(50% - "+-1*this.left+"px)",this.left=0;else if(this.left>n){var a="calc(50% + "+(this.left-n)+"px)";o.style.left=a,this.left=n}else o.style.left="50%"}},{key:"setValues",value:function(i,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;this.titleName=o.name,this.titleValue=o.value,this.listValues=a,this.x=i,this.y=n,this.titleValueFirst=o.valueFirst||0,this.index=u,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),r}(),jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Uf={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"},_a=function(r){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(r)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(r).map(function(i,n){return n!==0?Number(i).toString(16):"#"}).reduce(function(i,n){return""+i+n}):Uf[r]||r},Wf=function(){function r(i,n){var o=[],a=!0,u=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(a=(f=d.next()).done)&&(o.push(f.value),!n||o.length!==n);a=!0);}catch(_){u=!0,c=_}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}return o}return function(i,n){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return r(i,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},He=6,ue=4,ga=15,Tt=10,We="#dadada",kr="#555b51",qf={bar:function(r){var i=void 0;r.nodeName!=="rect"&&(i=r.getAttribute("transform"),r=r.childNodes[0]);var n=r.cloneNode();return n.style.fill="#000000",n.style.opacity="0.4",i&&n.setAttribute("transform",i),n},dot:function(r){var i=void 0;r.nodeName!=="circle"&&(i=r.getAttribute("transform"),r=r.childNodes[0]);var n=r.cloneNode(),o=r.getAttribute("r"),a=r.getAttribute("fill");return n.setAttribute("r",parseInt(o)+vo),n.setAttribute("fill",a),n.style.opacity="0.6",i&&n.setAttribute("transform",i),n},heat_square:function(r){var i=void 0;r.nodeName!=="circle"&&(i=r.getAttribute("transform"),r=r.childNodes[0]);var n=r.cloneNode(),o=r.getAttribute("r"),a=r.getAttribute("fill");return n.setAttribute("r",parseInt(o)+vo),n.setAttribute("fill",a),n.style.opacity="0.6",i&&n.setAttribute("transform",i),n}},Vf={bar:function(r,i){var n=void 0;r.nodeName!=="rect"&&(n=r.getAttribute("transform"),r=r.childNodes[0]);var o=["x","y","width","height"];Object.values(r.attributes).filter(function(a){return o.includes(a.name)&&a.specified}).map(function(a){i.setAttribute(a.name,a.nodeValue)}),n&&i.setAttribute("transform",n)},dot:function(r,i){var n=void 0;r.nodeName!=="circle"&&(n=r.getAttribute("transform"),r=r.childNodes[0]);var o=["cx","cy"];Object.values(r.attributes).filter(function(a){return o.includes(a.name)&&a.specified}).map(function(a){i.setAttribute(a.name,a.nodeValue)}),n&&i.setAttribute("transform",n)},heat_square:function(r,i){var n=void 0;r.nodeName!=="circle"&&(n=r.getAttribute("transform"),r=r.childNodes[0]);var o=["cx","cy"];Object.values(r.attributes).filter(function(a){return o.includes(a.name)&&a.specified}).map(function(a){i.setAttribute(a.name,a.nodeValue)}),n&&i.setAttribute("transform",n)}},Yf=function(){function r(i,n){var o=[],a=!0,u=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(a=(f=d.next()).done)&&(o.push(f.value),!n||o.length!==n);a=!0);}catch(_){u=!0,c=_}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}return o}return function(i,n){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return r(i,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),mi=350,bo=350,je=mi,Kf=250,he="easein",Xf=function(){function r(i,n){var o=[],a=!0,u=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(a=(f=d.next()).done)&&(o.push(f.value),!n||o.length!==n);a=!0);}catch(_){u=!0,c=_}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}return o}return function(i,n){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return r(i,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Jf={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"},Qf=".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}",td=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),Sr=function(){function r(i,n){if(Hc(this,r),n=oa(n),this.parent=typeof i=="string"?document.querySelector(i):i,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=n,this.title=n.title||"",this.type=n.type||"",this.realData=this.prepareData(n.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(n.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:n.isNavigable||0,animate:n.animate!==void 0?n.animate:1,truncateLegends:n.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(Cf));var o=this.measures;this.setMeasures(n),this.title.length||(o.titleHeight=0),this.config.showLegend||(o.legendHeight=0),this.argHeight=n.height||o.baseHeight,this.state={},this.options={},this.initTimeout=Ef,this.config.isNavigable&&(this.overlays=[]),this.configure(n)}return td(r,[{key:"prepareData",value:function(i){return i}},{key:"prepareFirstData",value:function(i){return i}},{key:"validateColors",value:function(i,n){var o=[];return(i=(i||[]).concat(Hf[n])).forEach(function(a){var u=_a(a);hc(u)?o.push(u):console.warn('"'+a+'" is not a valid color.')}),o}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var i=this,n=this.argHeight;this.baseHeight=n,this.height=n-na(this.measures),this.boundDrawFn=function(){return i.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var i={inside:this.parent,className:"chart-container"};this.independentWidth&&(i.styles={width:this.independentWidth+"px"}),this.container=le.create("div",i)}},{key:"makeTooltip",value:function(){this.tip=new Ff({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var i=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];n&&nc(this.parent)||(this.updateWidth(),this.calc(n),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(a){return a.setup(i.drawArea)}),this.render(this.components,!1),o&&(this.data=this.realData,setTimeout(function(){i.update(i.data)},this.initTimeout)),this.renderLegend(),this.setupNavigation(o))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){this.baseWidth=sc(this.parent),this.width=this.baseWidth-Ji(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var i=this.measures;this.svg=fc(this.container,"frappe-chart chart",this.baseWidth,this.baseHeight),this.svgDefs=dc(this.svg),this.title.length&&(this.titleEL=fi("title",i.margins.left,i.margins.top,this.title,{fontSize:i.titleFontSize,fill:"#666666",dy:i.titleFontSize}));var n=Xi(i);this.drawArea=ar(this.type+"-chart chart-draw-area","translate("+Yi(i)+", "+n+")"),this.config.showLegend&&(n+=this.height+i.paddings.bottom,this.legendArea=ar("chart-legend","translate("+Yi(i)+", "+n+")")),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(Yi(i),Xi(i))}},{key:"updateTipOffset",value:function(i,n){this.tip.offset={x:i,y:n}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(i){i||console.error("No data to update."),this.data=this.prepareData(i),this.calc(),this.render(this.components,this.config.animate),this.renderLegend()}},{key:"render",value:function(){var i=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.components,o=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.config.isNavigable&&this.overlays.map(function(u){return u.parentNode.removeChild(u)});var a=[];n.forEach(function(u){a=a.concat(u.update(o))}),a.length>0?(Bc(this.container,this.svg,a),setTimeout(function(){n.forEach(function(u){return u.make()}),i.updateNav()},Af)):(n.forEach(function(u){return u.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(){}},{key:"setupNavigation",value:function(){var i=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.config.isNavigable&&n&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(o){rc(i.container)&&(o=o||window.event,i.keyActions[o.keyCode]&&i.keyActions[o.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var i=Zc(this.svg);Rc(this.title||"Chart",[i])}}]),r}(),ed=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),id=function r(i,n,o){i===null&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(a===void 0){var u=Object.getPrototypeOf(i);return u===null?void 0:r(u,n,o)}if("value"in a)return a.value;var c=a.get;if(c!==void 0)return c.call(o)},Cr=function(r){function i(n,o){return $c(this,i),Fc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,o))}return jc(i,r),ed(i,[{key:"configure",value:function(n){id(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,n),this.config.formatTooltipY=(n.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=n.maxSlices||20,this.config.maxLegendPoints=n.maxLegendPoints||20}},{key:"calc",value:function(){var n=this,o=this.state,a=this.config.maxSlices;o.sliceTotals=[];var u=this.data.labels.map(function(d,_){var m=0;return n.data.datasets.map(function(v){m+=v.values[_]}),[m,d]}).filter(function(d){return d[0]>=0}),c=u;if(u.length>a){u.sort(function(d,_){return _[0]-d[0]}),c=u.slice(0,a-1);var f=0;u.slice(a-1).map(function(d){f+=d[0]}),c.push([f,"Rest"]),this.colors[a-1]="grey"}o.labels=[],c.map(function(d){o.sliceTotals.push(lc(d[0])),o.labels.push(d[1])}),o.grandTotal=o.sliceTotals.reduce(function(d,_){return d+_},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var n=this,o=this.state;this.legendArea.textContent="",this.legendTotals=o.sliceTotals.slice(0,this.config.maxLegendPoints);var a=0,u=0;this.legendTotals.map(function(c,f){var d=150,_=Math.floor((n.width-Ji(n.measures))/d);n.legendTotals.length<_&&(d=n.width/n.legendTotals.length),a>_&&(a=0,u+=20);var m=d*a+5,v=n.config.truncateLegends?Lr(o.labels[f],d/10):o.labels[f],y=n.config.formatTooltipY?n.config.formatTooltipY(c):c,k=bc(m,u,5,n.colors[f],v+": "+y,!1);n.legendArea.appendChild(k),a++})}}]),i}(Sr),wo=12,hi=7,va=1e3,nd=86400,rd=["January","February","March","April","May","June","July","August","September","October","November","December"],sd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ht=function(){function r(i,n){var o=[],a=!0,u=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(a=(f=d.next()).done)&&(o.push(f.value),!n||o.length!==n);a=!0);}catch(_){u=!0,c=_}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}return o}return function(i,n){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return r(i,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),od=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),ad=function(){function r(i){var n=i.layerClass,o=n===void 0?"":n,a=i.layerTransform,u=a===void 0?"":a,c=i.constants,f=i.getData,d=i.makeElements,_=i.animateElements;Gc(this,r),this.layerTransform=u,this.constants=c,this.makeElements=d,this.getData=f,this.animateElements=_,this.store=[],this.labels=[],this.layerClass=o,this.layerClass=typeof this.layerClass=="function"?this.layerClass():this.layerClass,this.refresh()}return od(r,[{key:"refresh",value:function(i){this.data=i||this.getData()}},{key:"setup",value:function(i){this.layer=ar(this.layerClass,this.layerTransform,i)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(i){var n=this;this.store=this.makeElements(i),this.layer.textContent="",this.store.forEach(function(o){n.layer.appendChild(o)}),this.labels.forEach(function(o){n.layer.appendChild(o)})}},{key:"update",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.refresh();var n=[];return i&&(n=this.animateElements(this.data)||[]),n}}]),r}(),xo={donutSlices:{layerClass:"donut-slices",makeElements:function(r){return r.sliceStrings.map(function(i,n){var o=Qi(i,"donut-path",r.colors[n],"none",r.strokeWidth);return o.style.transition="transform .3s;",o})},animateElements:function(r){return this.store.map(function(i,n){return po(i,r.sliceStrings[n])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(r){return r.sliceStrings.map(function(i,n){var o=Qi(i,"pie-path","none",r.colors[n]);return o.style.transition="transform .3s;",o})},animateElements:function(r){return this.store.map(function(i,n){return po(i,r.sliceStrings[n])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(r){var i=this;return r.xPositions.map(function(n,o){return vc(n,0,r.widths[o],i.constants.barHeight,i.constants.barDepth,r.colors[o])})},animateElements:function(r){if(r)return[]}},yAxis:{layerClass:"y axis",makeElements:function(r){var i=this;return r.positions.map(function(n,o){return xc(n,r.labels[o],i.constants.width,{mode:i.constants.mode,pos:i.constants.pos,shortenNumbers:i.constants.shortenNumbers})})},animateElements:function(r){var i=r.positions,n=r.labels,o=this.oldData.positions,a=this.oldData.labels,u=Zt(o,i),c=Ht(u,2);o=c[0],i=c[1];var f=Zt(a,n),d=Ht(f,2);return a=d[0],n=d[1],this.render({positions:o,labels:n}),this.store.map(function(_,m){return fo(_,i[m],o[m])})}},xAxis:{layerClass:"x axis",makeElements:function(r){var i=this;return r.positions.map(function(n,o){return Pc(n,r.calcLabels[o],i.constants.height,{mode:i.constants.mode,pos:i.constants.pos})})},animateElements:function(r){var i=r.positions,n=r.calcLabels,o=this.oldData.positions,a=this.oldData.calcLabels,u=Zt(o,i),c=Ht(u,2);o=c[0],i=c[1];var f=Zt(a,n),d=Ht(f,2);return a=d[0],n=d[1],this.render({positions:o,calcLabels:n}),this.store.map(function(_,m){return Ec(_,i[m],o[m])})}},yMarkers:{layerClass:"y-markers",makeElements:function(r){var i=this;return r.map(function(n){return Lc(n.position,n.label,i.constants.width,{labelPos:n.options.labelPos,mode:"span",lineType:"dashed"})})},animateElements:function(r){var i=Zt(this.oldData,r),n=Ht(i,2);this.oldData=n[0];var o=(r=n[1]).map(function(f){return f.position}),a=r.map(function(f){return f.label}),u=r.map(function(f){return f.options}),c=this.oldData.map(function(f){return f.position});return this.render(c.map(function(f,d){return{position:c[d],label:a[d],options:u[d]}})),this.store.map(function(f,d){return fo(f,o[d],c[d])})}},yRegions:{layerClass:"y-regions",makeElements:function(r){var i=this;return r.map(function(n){return Tc(n.startPos,n.endPos,i.constants.width,n.label,{labelPos:n.options.labelPos})})},animateElements:function(r){var i=Zt(this.oldData,r),n=Ht(i,2);this.oldData=n[0];var o=(r=n[1]).map(function(m){return m.endPos}),a=r.map(function(m){return m.label}),u=r.map(function(m){return m.startPos}),c=r.map(function(m){return m.options}),f=this.oldData.map(function(m){return m.endPos}),d=this.oldData.map(function(m){return m.startPos});this.render(f.map(function(m,v){return{startPos:d[v],endPos:f[v],label:a[v],options:c[v]}}));var _=[];return this.store.map(function(m,v){_=_.concat(Ac(m,u[v],o[v],f[v]))}),_}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(r){var i=this,n=this.constants,o=n.index,a=n.colWidth,u=n.rowHeight,c=n.squareSize,f=n.radius,d=n.xTranslate,_=0;return this.serializedSubDomains=[],r.cols.map(function(m,v){v===1&&i.labels.push(fi("domain-name",d,-12,ca(o,!0).toUpperCase(),{fontSize:9})),m.map(function(y,k){if(y.fill){var C={"data-date":y.yyyyMmDd,"data-value":y.dataValue,"data-day":k},E=ua("day",d,_,c,f,y.fill,C);i.serializedSubDomains.push(E)}_+=u}),_=0,d+=a}),this.serializedSubDomains},animateElements:function(r){if(r)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(r){var i=this.constants;return this.unitType="bar",this.units=r.yPositions.map(function(n,o){return kc(r.xPositions[o],n,r.barWidth,i.color,r.labels[o],o,r.offsets[o],{zeroLine:r.zeroLine,barsWidth:r.barsWidth,minHeight:i.minHeight})}),this.units},animateElements:function(r){var i=r.xPositions,n=r.yPositions,o=r.offsets,a=r.labels,u=this.oldData.xPositions,c=this.oldData.yPositions,f=this.oldData.offsets,d=this.oldData.labels,_=Zt(u,i),m=Ht(_,2);u=m[0],i=m[1];var v=Zt(c,n),y=Ht(v,2);c=y[0],n=y[1];var k=Zt(f,o),C=Ht(k,2);f=C[0],o=C[1];var E=Zt(d,a),A=Ht(E,2);d=A[0],a=A[1],this.render({xPositions:u,yPositions:c,offsets:f,labels:a,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var P=[];return this.store.map(function(M,N){P=P.concat(Oc(M,i[N],n[N],r.barWidth,o[N],{zeroLine:r.zeroLine}))}),P}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(r){var i=this.constants;return this.unitType="dot",this.paths={},i.hideLine||(this.paths=Cc(r.xPositions,r.yPositions,i.color,{heatline:i.heatline,regionFill:i.regionFill,spline:i.spline},{svgDefs:i.svgDefs,zeroLine:r.zeroLine})),this.units=[],i.hideDots||(this.units=r.yPositions.map(function(n,o){return Sc(r.xPositions[o],n,r.radius,i.color,i.valuesOverPoints?r.values[o]:"",o)})),Object.values(this.paths).concat(this.units)},animateElements:function(r){var i=r.xPositions,n=r.yPositions,o=r.values,a=this.oldData.xPositions,u=this.oldData.yPositions,c=this.oldData.values,f=Zt(a,i),d=Ht(f,2);a=d[0],i=d[1];var _=Zt(u,n),m=Ht(_,2);u=m[0],n=m[1];var v=Zt(c,o),y=Ht(v,2);c=y[0],o=y[1],this.render({xPositions:a,yPositions:u,values:o,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var k=[];return Object.keys(this.paths).length&&(k=k.concat(zc(this.paths,i,n,r.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(C,E){k=k.concat(Mc(C,i[E],n[E]))}),k}}},ld=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),ud=function r(i,n,o){i===null&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(a===void 0){var u=Object.getPrototypeOf(i);return u===null?void 0:r(u,n,o)}if("value"in a)return a.value;var c=a.get;if(c!==void 0)return c.call(o)},hd=function(r){function i(n,o){Vc(this,i);var a=Yc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,o));return a.type="percentage",a.setup(),a}return Kc(i,r),ld(i,[{key:"setMeasures",value:function(n){var o=this.measures;this.barOptions=n.barOptions||{};var a=this.barOptions;a.height=a.height||If,a.depth=a.depth||pa,o.paddings.right=30,o.legendHeight=60,o.baseHeight=8*(a.height+.5*a.depth)}},{key:"setupComponents",value:function(){var n=this.state,o=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},function(){return{xPositions:n.xPositions,widths:n.widths,colors:this.colors}}.bind(this)]];this.components=new Map(o.map(function(a){var u=bi.apply(void 0,qc(a));return[a[0],u]}))}},{key:"calc",value:function(){var n=this;ud(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"calc",this).call(this);var o=this.state;o.xPositions=[],o.widths=[];var a=0;o.sliceTotals.map(function(u){var c=n.width*u/o.grandTotal;o.widths.push(c),o.xPositions.push(a),a+=c})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var n=this,o=this.state;this.container.addEventListener("mousemove",function(a){var u=n.components.get("percentageBars").store,c=a.target;if(u.includes(c)){var f=u.indexOf(c),d=pi(n.container),_=pi(c),m=_.left-d.left+parseInt(c.getAttribute("width"))/2,v=_.top-d.top,y=(n.formattedLabels&&n.formattedLabels.length>0?n.formattedLabels[f]:n.state.labels[f])+": ",k=o.sliceTotals[f]/o.grandTotal;n.tip.setValues(m,v,{name:y,value:(100*k).toFixed(1)+"%"}),n.tip.showTip()}})}}]),i}(Cr),cd=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),Po=function r(i,n,o){i===null&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(a===void 0){var u=Object.getPrototypeOf(i);return u===null?void 0:r(u,n,o)}if("value"in a)return a.value;var c=a.get;if(c!==void 0)return c.call(o)},fd=function(r){function i(n,o){Jc(this,i);var a=Qc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,o));return a.type="pie",a.initTimeout=0,a.init=1,a.setup(),a}return tf(i,r),cd(i,[{key:"configure",value:function(n){Po(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,n),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=n.hoverRadio||.1,this.config.startAngle=n.startAngle||0,this.clockWise=n.clockWise||!1}},{key:"calc",value:function(){var n=this;Po(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"calc",this).call(this);var o=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;var a=this.radius,u=this.clockWise,c=o.slicesProperties||[];o.sliceStrings=[],o.slicesProperties=[];var f=180-this.config.startAngle;o.sliceTotals.map(function(d,_){var m=f,v=d/o.grandTotal*ma,y=v>180?1:0,k=u?-v:v,C=f+=k,E=Ze(m,a),A=Ze(C,a),P=n.init&&c[_],M=void 0,N=void 0;n.init?(M=P?P.startPosition:E,N=P?P.endPosition:E):(M=E,N=A);var z=v===360?mc(M,N,n.center,n.radius,u,y):pc(M,N,n.center,n.radius,u,y);o.sliceStrings.push(z),o.slicesProperties.push({startPosition:E,endPosition:A,value:d,total:o.grandTotal,startAngle:m,endAngle:C,angle:k})}),this.init=0}},{key:"setupComponents",value:function(){var n=this.state,o=[["pieSlices",{},function(){return{sliceStrings:n.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(o.map(function(a){var u=bi.apply(void 0,Xc(a));return[a[0],u]}))}},{key:"calTranslateByAngle",value:function(n){var o=this.radius,a=this.hoverRadio,u=Ze(n.startAngle+n.angle/2,o);return"translate3d("+u.x*a+"px,"+u.y*a+"px,0)"}},{key:"hoverSlice",value:function(n,o,a,u){if(n){var c=this.colors[o];if(a){tn(n,this.calTranslateByAngle(this.state.slicesProperties[o])),n.style.fill=Tr(c,50);var f=pi(this.svg),d=u.pageX-f.left+10,_=u.pageY-f.top-10,m=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[o]:this.state.labels[o])+": ",v=(100*this.state.sliceTotals[o]/this.state.grandTotal).toFixed(1);this.tip.setValues(d,_,{name:m,value:v+"%"}),this.tip.showTip()}else tn(n,"translate3d(0,0,0)"),this.tip.hideTip(),n.style.fill=c}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(n){var o=n.target,a=this.components.get("pieSlices").store,u=this.curActiveSliceIndex,c=this.curActiveSlice;if(a.includes(o)){var f=a.indexOf(o);this.hoverSlice(c,u,!1),this.curActiveSlice=o,this.curActiveSliceIndex=f,this.hoverSlice(o,f,!0,n)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),i}(Cr),dd=function(){function r(i,n){var o=[],a=!0,u=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(a=(f=d.next()).done)&&(o.push(f.value),!n||o.length!==n);a=!0);}catch(_){u=!0,c=_}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}return o}return function(i,n){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return r(i,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pd=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),Wt=Be+Df,Ie=Wt,md=function(r){function i(n,o){hf(this,i);var a=cf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,o));a.type="heatmap",a.countLabel=o.countLabel||"";var u=["Sunday","Monday"],c=u.includes(o.startSubDomain)?o.startSubDomain:"Sunday";return a.startSubDomainIndex=u.indexOf(c),a.setup(),a}return ff(i,r),pd(i,[{key:"setMeasures",value:function(n){var o=this.measures;this.discreteDomains=n.discreteDomains===0?0:1,o.paddings.top=3*Ie,o.paddings.bottom=0,o.legendHeight=2*Ie,o.baseHeight=Ie*hi+na(o);var a=this.data,u=this.discreteDomains?wo:0;this.independentWidth=(Xn(a.start,a.end)+u)*Wt+Ji(o)}},{key:"updateWidth",value:function(){var n=this.discreteDomains?wo:0,o=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=(o+n)*Wt+Ji(this.measures)}},{key:"prepareData",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;if(n.start&&n.end&&n.start>n.end)throw new Error("Start date cannot be greater than end date.");if(n.start||(n.start=new Date,n.start.setFullYear(n.start.getFullYear()-1)),n.end||(n.end=new Date),n.dataPoints=n.dataPoints||{},parseInt(Object.keys(n.dataPoints)[0])>1e5){var o={};Object.keys(n.dataPoints).forEach(function(a){var u=new Date(a*va);o[Kn(u)]=n.dataPoints[a]}),n.dataPoints=o}return n}},{key:"calc",value:function(){var n=this.state;n.start=ve(this.data.start),n.end=ve(this.data.end),n.firstWeekStart=ve(n.start),n.noOfWeeks=Xn(n.start,n.end),n.distribution=af(Object.values(this.data.dataPoints),Jn),n.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var n=this,o=this.state,a=this.discreteDomains?0:1,u=o.domainConfigs.map(function(f,d){return["heatDomain",{index:f.index,colWidth:Wt,rowHeight:Ie,squareSize:Be,radius:n.rawChartArgs.radius||0,xTranslate:o.domainConfigs.filter(function(_,m){return m<d}).map(function(_){return _.cols.length-a}).reduce(function(_,m){return _+m},0)*Wt},function(){return o.domainConfigs[d]}.bind(n)]});this.components=new Map(u.map(function(f,d){var _=bi.apply(void 0,uf(f));return[f[0]+"-"+d,_]}));var c=0;sd.forEach(function(f,d){if([1,3,5].includes(d)){var _=fi("subdomain-name",-Wt/2,c,f,{fontSize:Be,dy:8,textAnchor:"end"});n.drawArea.appendChild(_)}c+=Ie})}},{key:"update",value:function(n){n||console.error("No data to update."),this.data=this.prepareData(n),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var n=this;this.container.addEventListener("mousemove",function(o){n.components.forEach(function(a){var u=a.store,c=o.target;if(u.includes(c)){var f=c.getAttribute("data-value"),d=c.getAttribute("data-date").split("-"),_=ca(parseInt(d[1])-1,!0),m=n.container.getBoundingClientRect(),v=c.getBoundingClientRect(),y=parseInt(o.target.getAttribute("width")),k=v.left-m.left+y/2,C=v.top-m.top,E=f+" "+n.countLabel,A=" on "+_+" "+d[0]+", "+d[2];n.tip.setValues(k,C,{name:A,value:E,valueFirst:1},[]),n.tip.showTip()}})})}},{key:"renderLegend",value:function(){var n=this;this.legendArea.textContent="";var o=0,a=Ie,u=this.rawChartArgs.radius||0,c=fi("subdomain-name",o,a,"Less",{fontSize:Be+1,dy:9});o=2*Wt+Wt/2,this.legendArea.appendChild(c),this.colors.slice(0,Jn).map(function(d,_){var m=ua("heatmap-legend-unit",o+(Wt+3)*_,a,Be,u,d);n.legendArea.appendChild(m)});var f=fi("subdomain-name",o+Jn*(Wt+3)+Wt/4,a,"More",{fontSize:Be+1,dy:9});this.legendArea.appendChild(f)}},{key:"getDomains",value:function(){for(var n=this.state,o=[n.start.getMonth(),n.start.getFullYear()],a=o[0],u=o[1],c=[n.end.getMonth(),n.end.getFullYear()],f=c[0]-a+1+12*(c[1]-u),d=[],_=ve(n.start),m=0;m<f;m++){var v=n.end;if(!Wc(_,n.end)){var y=[_.getMonth(),_.getFullYear()];v=_o(y[0],y[1])}d.push(this.getDomainConfig(_,v)),De(v,1),_=v}return d}},{key:"getDomainConfig",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=[n.getMonth(),n.getFullYear()],u=a[0],c=a[1],f=fa(n),d={index:u,cols:[]};De(o=ve(o)||_o(u,c),1);for(var _=Xn(f,o),m=[],v=void 0,y=0;y<_;y++)v=this.getCol(f,u),m.push(v),De(f=new Date(v[hi-1].yyyyMmDd),1);return v[hi-1].dataValue!==void 0&&(De(f,1),m.push(this.getCol(f,u,!0))),d.cols=m,d}},{key:"getCol",value:function(n,o){for(var a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=this.state,c=ve(n),f=[],d=0;d<hi;d++,De(c,1)){var _={},m=c>=u.start&&c<=u.end;a||c.getMonth()!==o||!m?_.yyyyMmDd=Kn(c):_=this.getSubDomainConfig(c),f.push(_)}return f}},{key:"getSubDomainConfig",value:function(n){var o=Kn(n),a=this.data.dataPoints[o];return{yyyyMmDd:o,dataValue:a||0,fill:this.colors[lf(a,this.state.distribution)]}}}]),i}(Sr),_d=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),Qn=function r(i,n,o){i===null&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(a===void 0){var u=Object.getPrototypeOf(i);return u===null?void 0:r(u,n,o)}if("value"in a)return a.value;var c=a.get;if(c!==void 0)return c.call(o)},ur=function(r){function i(n,o){gf(this,i);var a=vf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,o));return a.barOptions=o.barOptions||{},a.lineOptions=o.lineOptions||{},a.type=o.type||"line",a.init=1,a.setup(),a}return yf(i,r),_d(i,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(n){Qn(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,n),n.axisOptions=n.axisOptions||{},n.tooltipOptions=n.tooltipOptions||{},this.config.xAxisMode=n.axisOptions.xAxisMode||"span",this.config.yAxisMode=n.axisOptions.yAxisMode||"span",this.config.xIsSeries=n.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=n.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=n.tooltipOptions.formatTooltipX,this.config.formatTooltipY=n.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=n.valuesOverPoints}},{key:"prepareData",value:function(){return pf(arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data,this.type)}},{key:"prepareFirstData",value:function(){return mf(arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data)}},{key:"calc",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.calcXPositions(),n||this.calcYAxisParameters(this.getAllYValues(),this.type==="line"),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var n=this.state,o=this.data.labels;n.datasetLength=o.length,n.unitWidth=this.width/n.datasetLength,n.xOffset=n.unitWidth/2,n.xAxis={labels:o,positions:o.map(function(a,u){return ra(n.xOffset+u*n.unitWidth)})}}},{key:"calcYAxisParameters",value:function(n){var o=nf(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"false"),a=this.height/sf(o),u=da(o)*a,c=this.height-rf(o)*u;this.state.yAxis={labels:o,positions:o.map(function(f){return c-f*a}),scaleMultiplier:a,zeroLine:c},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var n=this.state,o=function(a){return a.map(function(u){return ji(u,n.yAxis)})};n.datasets=this.data.datasets.map(function(a,u){var c=a.values,f=a.cumulativeYs||[];return{name:a.name&&a.name.replace(/<|>|&/g,function(d){return d=="&"?"&amp;":d=="<"?"&lt;":"&gt;"}),index:u,chartType:a.chartType,values:c,yPositions:o(c),cumulativeYs:f,cumulativeYPos:o(f)}})}},{key:"calcYExtremes",value:function(){var n=this.state;if(this.barOptions.stacked)return void(n.yExtremes=n.datasets[n.datasets.length-1].cumulativeYPos);n.yExtremes=new Array(n.datasetLength).fill(9999),n.datasets.map(function(o){o.yPositions.map(function(a,u){a<n.yExtremes[u]&&(n.yExtremes[u]=a)})})}},{key:"calcYRegions",value:function(){var n=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(o){return o.position=ji(o.value,n.yAxis),o.options||(o.options={}),o})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(o){return o.startPos=ji(o.start,n.yAxis),o.endPos=ji(o.end,n.yAxis),o.options||(o.options={}),o}))}},{key:"getAllYValues",value:function(){var n,o=this,a="values";if(this.barOptions.stacked){a="cumulativeYs";var u=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(function(f,d){var _=o.data.datasets[d].values;f[a]=u=u.map(function(m,v){return m+_[v]})})}var c=this.data.datasets.map(function(f){return f[a]});return this.data.yMarkers&&c.push(this.data.yMarkers.map(function(f){return f.value})),this.data.yRegions&&this.data.yRegions.map(function(f){c.push([f.end,f.start])}),(n=[]).concat.apply(n,go(c))}},{key:"setupComponents",value:function(){var n=this,o=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var m=this.state;return m.xAxis.calcLabels=_f(this.width,m.xAxis.labels,this.config.xIsSeries),m.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],a=this.state.datasets.filter(function(m){return m.chartType==="bar"}),u=this.state.datasets.filter(function(m){return m.chartType==="line"}),c=a.map(function(m){var v=m.index;return["barGraph-"+m.index,{index:v,color:n.colors[v],stacked:n.barOptions.stacked,valuesOverPoints:n.config.valuesOverPoints,minHeight:n.height*zf},function(){var y=this.state,k=y.datasets[v],C=this.barOptions.stacked,E=this.barOptions.spaceRatio||Mf,A=y.unitWidth*(1-E),P=A/(C?1:a.length),M=y.xAxis.positions.map(function(I){return I-A/2});C||(M=M.map(function(I){return I+P*v}));var N=new Array(y.datasetLength).fill("");this.config.valuesOverPoints&&(N=C&&k.index===y.datasets.length-1?k.cumulativeYs:k.values);var z=new Array(y.datasetLength).fill(0);return C&&(z=k.yPositions.map(function(I,B){return I-k.cumulativeYPos[B]})),{xPositions:M,yPositions:k.yPositions,offsets:z,labels:N,zeroLine:y.yAxis.zeroLine,barsWidth:A,barWidth:P}}.bind(n)]}),f=u.map(function(m){var v=m.index;return["lineGraph-"+m.index,{index:v,color:n.colors[v],svgDefs:n.svgDefs,heatline:n.lineOptions.heatline,regionFill:n.lineOptions.regionFill,spline:n.lineOptions.spline,hideDots:n.lineOptions.hideDots,hideLine:n.lineOptions.hideLine,valuesOverPoints:n.config.valuesOverPoints},function(){var y=this.state,k=y.datasets[v],C=y.yAxis.positions[0]<y.yAxis.zeroLine?y.yAxis.positions[0]:y.yAxis.zeroLine;return{xPositions:y.xAxis.positions,yPositions:k.yPositions,values:k.values,zeroLine:C,radius:this.lineOptions.dotSize||Nf}}.bind(n)]}),d=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];o=o.concat(c,f,d);var _=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(o.filter(function(m){return!_.includes(m[0])||n.state[m[0]]}).map(function(m){var v=bi.apply(void 0,go(m));return(m[0].includes("lineGraph")||m[0].includes("barGraph"))&&n.dataUnitComponents.push(v),[m[0],v]}))}},{key:"makeDataByIndex",value:function(){var n=this;this.dataByIndex={};var o=this.state,a=this.config.formatTooltipX,u=this.config.formatTooltipY;o.xAxis.labels.map(function(c,f){var d=n.state.datasets.map(function(_,m){var v=_.values[f];return{title:_.name,value:v,yPos:_.yPositions[f],color:n.colors[m],formatted:u?u(v):v}});n.dataByIndex[f]={label:c,formattedLabel:a?a(c):c,xPos:o.xAxis.positions[f],values:d,yExtreme:o.yExtremes[f]}})}},{key:"bindTooltip",value:function(){var n=this;this.container.addEventListener("mousemove",function(o){var a=n.measures,u=pi(n.container),c=o.pageX-u.left-Yi(a),f=o.pageY-u.top;f<n.height+Xi(a)&&f>Xi(a)?n.mapTooltipXPosition(c):n.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(n){var o=this.state;if(o.yExtremes){var a=of(n,o.xAxis.positions,!0);if(a>=0){var u=this.dataByIndex[a];this.tip.setValues(u.xPos+this.tip.offset.x,u.yExtreme+this.tip.offset.y,{name:u.formattedLabel,value:""},u.values,a),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var n=this,o=this.data;o.datasets.length>1&&(this.legendArea.textContent="",o.datasets.map(function(a,u){var c=Of,f=yc(c*u,"0",c,n.colors[u],a.name,n.config.truncateLegends);n.legendArea.appendChild(f)}))}},{key:"makeOverlay",value:function(){var n=this;if(this.init)return void(this.init=0);this.overlayGuides&&this.overlayGuides.forEach(function(o){var a=o.overlay;a.parentNode.removeChild(a)}),this.overlayGuides=this.dataUnitComponents.map(function(o){return{type:o.unitType,overlay:void 0,units:o.units}}),this.state.currentIndex===void 0&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(o){var a=o.units[n.state.currentIndex];o.overlay=qf[o.type](a),n.drawArea.appendChild(o.overlay)})}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(n){var o=n.overlay;o.parentNode.removeChild(o)})}},{key:"bindOverlay",value:function(){var n=this;this.parent.addEventListener("data-select",function(){n.updateOverlay()})}},{key:"bindUnits",value:function(){var n=this;this.dataUnitComponents.map(function(o){o.units.map(function(a){a.addEventListener("click",function(){var u=a.getAttribute("data-point-index");n.setCurrentDataPoint(u)})})}),this.tip.container.addEventListener("click",function(){var o=n.tip.container.getAttribute("data-point-index");n.setCurrentDataPoint(o)})}},{key:"updateOverlay",value:function(){var n=this;this.overlayGuides.map(function(o){var a=o.units[n.state.currentIndex];Vf[o.type](a,o.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.currentIndex,o=this.state;return{index:n,label:o.xAxis.labels[n],values:o.datasets.map(function(a){return a.values[n]})}}},{key:"setCurrentDataPoint",value:function(n){var o=this.state;(n=parseInt(n))<0&&(n=0),n>=o.xAxis.labels.length&&(n=o.xAxis.labels.length-1),n!==o.currentIndex&&(o.currentIndex=n,oc(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.state.datasetLength;Qn(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addDataPoint",this).call(this,n,o,a),this.data.labels.splice(a,0,n),this.data.datasets.map(function(u,c){u.values.splice(a,0,o[c])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(Qn(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"removeDataPoint",this).call(this,n),this.data.labels.splice(n,1),this.data.datasets.map(function(o){o.values.splice(n,1)}),this.update(this.data))}},{key:"updateDataset",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.data.datasets[o].values=n,this.update(this.data)}},{key:"updateDatasets",value:function(n){this.data.datasets.map(function(o,a){n[a]&&(o.values=n[a])}),this.update(this.data)}}]),i}(Sr),gd=function(){function r(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,n,o){return n&&r(i.prototype,n),o&&r(i,o),i}}(),Lo=function r(i,n,o){i===null&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(a===void 0){var u=Object.getPrototypeOf(i);return u===null?void 0:r(u,n,o)}if("value"in a)return a.value;var c=a.get;if(c!==void 0)return c.call(o)},vd=function(r){function i(n,o){wf(this,i);var a=xf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,o));return a.type="donut",a.initTimeout=0,a.init=1,a.setup(),a}return Pf(i,r),gd(i,[{key:"configure",value:function(n){Lo(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,n),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=n.hoverRadio||.1,this.config.startAngle=n.startAngle||0,this.clockWise=n.clockWise||!1,this.strokeWidth=n.strokeWidth||30}},{key:"calc",value:function(){var n=this;Lo(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"calc",this).call(this);var o=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;var a=this.radius,u=this.clockWise,c=o.slicesProperties||[];o.sliceStrings=[],o.slicesProperties=[];var f=180-this.config.startAngle;o.sliceTotals.map(function(d,_){var m=f,v=d/o.grandTotal*ma,y=v>180?1:0,k=u?-v:v,C=f+=k,E=Ze(m,a),A=Ze(C,a),P=n.init&&c[_],M=void 0,N=void 0;n.init?(M=P?P.startPosition:E,N=P?P.endPosition:E):(M=E,N=A);var z=v===360?gc(M,N,n.center,n.radius,n.clockWise,y):_c(M,N,n.center,n.radius,n.clockWise,y);o.sliceStrings.push(z),o.slicesProperties.push({startPosition:E,endPosition:A,value:d,total:o.grandTotal,startAngle:m,endAngle:C,angle:k})}),this.init=0}},{key:"setupComponents",value:function(){var n=this.state,o=[["donutSlices",{},function(){return{sliceStrings:n.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(o.map(function(a){var u=bi.apply(void 0,bf(a));return[a[0],u]}))}},{key:"calTranslateByAngle",value:function(n){var o=this.radius,a=this.hoverRadio,u=Ze(n.startAngle+n.angle/2,o);return"translate3d("+u.x*a+"px,"+u.y*a+"px,0)"}},{key:"hoverSlice",value:function(n,o,a,u){if(n){var c=this.colors[o];if(a){tn(n,this.calTranslateByAngle(this.state.slicesProperties[o])),n.style.stroke=Tr(c,50);var f=pi(this.svg),d=u.pageX-f.left+10,_=u.pageY-f.top-10,m=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[o]:this.state.labels[o])+": ",v=(100*this.state.sliceTotals[o]/this.state.grandTotal).toFixed(1);this.tip.setValues(d,_,{name:m,value:v+"%"}),this.tip.showTip()}else tn(n,"translate3d(0,0,0)"),this.tip.hideTip(),n.style.stroke=c}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(n){var o=n.target,a=this.components.get("donutSlices").store,u=this.curActiveSliceIndex,c=this.curActiveSlice;if(a.includes(o)){var f=a.indexOf(o);this.hoverSlice(c,u,!1),this.curActiveSlice=o,this.curActiveSliceIndex=f,this.hoverSlice(o,f,!0,n)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),i}(Cr),To={bar:ur,line:ur,percentage:hd,heatmap:md,pie:fd,donut:vd},yd=function r(i,n){return Lf(this,r),Tf(n.type,i,n)};function bd(r){let i,n,o;return{c(){i=S("div")},m(a,u){W(a,i,u),r[18](i),n||(o=Mt(i,"data-select",r[17]),n=!0)},p:et,i:et,o:et,d(a){a&&U(i),r[18](null),n=!1,o()}}}function wd(r,i,n){let{data:o={labels:[],datasets:[{values:[]}],yMarkers:{},yRegions:[]}}=i,{title:a=""}=i,{type:u="line"}=i,{height:c=300}=i,{animate:f=!0}=i,{axisOptions:d={}}=i,{barOptions:_={}}=i,{lineOptions:m={}}=i,{tooltipOptions:v={}}=i,{colors:y=[]}=i,{valuesOverPoints:k=0}=i,{isNavigable:C=!1}=i,{maxSlices:E=3}=i,A=null,P;function M(D){return function(...ct){if(A)return D(...ct)}}const N=M((D,Ct,ct)=>A.addDataPoint(D,Ct,ct)),z=M(D=>A.removeDataPoint(D)),I=M(()=>A.export()),B=M(D=>A.update(D));gi(()=>{A=new yd(P,{data:o,title:a,type:u,height:c,animate:f,colors:y,axisOptions:d,barOptions:_,lineOptions:m,tooltipOptions:v,valuesOverPoints:k,isNavigable:C,maxSlices:E})}),Mo(()=>{A=null});function at(D){er.call(this,r,D)}function G(D){$e[D?"unshift":"push"](()=>{P=D,n(0,P)})}return r.$$set=D=>{"data"in D&&n(1,o=D.data),"title"in D&&n(2,a=D.title),"type"in D&&n(3,u=D.type),"height"in D&&n(4,c=D.height),"animate"in D&&n(5,f=D.animate),"axisOptions"in D&&n(6,d=D.axisOptions),"barOptions"in D&&n(7,_=D.barOptions),"lineOptions"in D&&n(8,m=D.lineOptions),"tooltipOptions"in D&&n(9,v=D.tooltipOptions),"colors"in D&&n(10,y=D.colors),"valuesOverPoints"in D&&n(11,k=D.valuesOverPoints),"isNavigable"in D&&n(12,C=D.isNavigable),"maxSlices"in D&&n(13,E=D.maxSlices)},r.$$.update=()=>{r.$$.dirty&2&&B(o)},[P,o,a,u,c,f,d,_,m,v,y,k,C,E,N,z,I,at,G]}class ko extends St{constructor(i){super(),kt(this,i,wd,bd,Lt,{data:1,title:2,type:3,height:4,animate:5,axisOptions:6,barOptions:7,lineOptions:8,tooltipOptions:9,colors:10,valuesOverPoints:11,isNavigable:12,maxSlices:13,addDataPoint:14,removeDataPoint:15,exportChart:16})}get addDataPoint(){return this.$$.ctx[14]}get removeDataPoint(){return this.$$.ctx[15]}get exportChart(){return this.$$.ctx[16]}}function xd(r){let i,n,o,a,u,c,f,d,_,m,v,y,k,C,E,A,P,M;return o=new we({props:{subTitle:"Analytics",title:"Schools of University of Paris-Saclay"}}),c=new on({}),y=new ko({props:{data:r[0],type:"pie"}}),P=new ko({props:{data:r[1],type:"bar"}}),{c(){i=S("div"),n=S("div"),ht(o.$$.fragment),a=Z(),u=S("div"),ht(c.$$.fragment),f=Z(),d=S("div"),_=S("div"),m=S("h1"),m.textContent="By School Type",v=Z(),ht(y.$$.fragment),k=Z(),C=S("div"),E=S("h1"),E.textContent="By School/Campus Of Paris-Saclay",A=Z(),ht(P.$$.fragment),b(n,"class","column is-two-thirds"),b(u,"class","column"),b(i,"class","columns is-vcentered"),b(m,"class","title is-4"),b(_,"class","column has-text-centered"),b(E,"class","title is-4"),b(C,"class","column has-text-centered"),b(d,"class","columns")},m(N,z){W(N,i,z),w(i,n),lt(o,n,null),w(i,a),w(i,u),lt(c,u,null),W(N,f,z),W(N,d,z),w(d,_),w(_,m),w(_,v),lt(y,_,null),w(d,k),w(d,C),w(C,E),w(C,A),lt(P,C,null),M=!0},p(N,[z]){const I={};z&1&&(I.data=N[0]),y.$set(I);const B={};z&2&&(B.data=N[1]),P.$set(B)},i(N){M||(rt(o.$$.fragment,N),rt(c.$$.fragment,N),rt(y.$$.fragment,N),rt(P.$$.fragment,N),M=!0)},o(N){ot(o.$$.fragment,N),ot(c.$$.fragment,N),ot(y.$$.fragment,N),ot(P.$$.fragment,N),M=!1},d(N){N&&U(i),ut(o),ut(c),N&&U(f),N&&U(d),ut(y),ut(P)}}}function Pd(r,i,n){const o=be("DonationService");let a={labels:["Engineering School","Faculty"],datasets:[{values:[0,0]}]},u={labels:[],datasets:[{values:[]}]};return gi(async()=>{let c=await o.getDonations();c.forEach(d=>{d.method=="Engineering School"?n(0,a.datasets[0].values[0]+=d.amount,a):d.method=="Faculty"&&n(0,a.datasets[0].values[1]+=d.amount,a)});let f=await o.getCandidates();n(1,u.labels=[],u),f.forEach(d=>{u.labels.push(`${d.lastName}, ${d.firstName}`),u.datasets[0].values.push(0)}),f.forEach((d,_)=>{c.forEach(m=>{m.candidate._id==d._id&&n(1,u.datasets[0].values[_]+=m.amount,u)})})}),[a,u]}class Ld extends St{constructor(i){super(),kt(this,i,Pd,xd,Lt,{})}}function Td(r){let i,n,o;return n=new kh({props:{routes:r[0]}}),{c(){i=S("div"),ht(n.$$.fragment),b(i,"class","container")},m(a,u){W(a,i,u),lt(n,i,null),o=!0},p:et,i(a){o||(rt(n.$$.fragment,a),o=!0)},o(a){ot(n.$$.fragment,a),o=!1},d(a){a&&U(i),ut(n)}}}function kd(r){return Ql("DonationService",new dh("https://webbackendpaul.herokuapp.com")),[{"/":Qs,"/login":Oh,"/signup":Dh,"/donate":Qh,"/report":Fh,"/map":ec,"/charts":Ld,"/logout":Qs}]}class Sd extends St{constructor(i){super(),kt(this,i,kd,Td,Lt,{})}}new Sd({target:document.body});
